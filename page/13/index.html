<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#9400D3"><meta name="generator" content="Hexo 5.4.2">
<link rel="preconnect" href="https://s4.zstatic.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#9400D3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#9400D3","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>



<link rel="canonical" href="http://example.com/page/13/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/13/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>BNU-FZH</title>
  







<script async src="/lib/fireworks.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">BNU-FZH</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">fengzhenhua@outlook.com</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-导航"><a href="/%E5%AF%BC%E8%88%AA/" rel="section"><i class="fa fa-paper-plane fa-fw"></i>导航</a></li><li class="menu-item menu-item-软件"><a href="/%E8%BD%AF%E4%BB%B6/" rel="section"><i class="fa fa-briefcase fa-fw"></i>软件</a></li><li class="menu-item menu-item-收藏"><a href="/%E6%94%B6%E8%97%8F/" rel="section"><i class="fa fa-folder fa-fw"></i>收藏</a></li><li class="menu-item menu-item-工作"><a href="/%E5%B7%A5%E4%BD%9C/" rel="section"><i class="fa fa-folder fa-fw"></i>工作</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">559</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://www.zxxk.com/" title="学科资源 → https:&#x2F;&#x2F;www.zxxk.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>学科资源</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://zujuan.xkw.com/" title="组卷题库 → https:&#x2F;&#x2F;zujuan.xkw.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>组卷题库</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://192.168.1.14/" title="实验信息 → http:&#x2F;&#x2F;192.168.1.14&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>实验信息</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhixue.com/" title="智学阅卷 → https:&#x2F;&#x2F;www.zhixue.com" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>智学阅卷</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://chat.deepseek.com/" title="深度求索 → https:&#x2F;&#x2F;chat.deepseek.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>深度求索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tongyi.com/" title="通义千问 → https:&#x2F;&#x2F;www.tongyi.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>通义千问</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.scnet.cn/ui/chatbot/" title="国家超算 → https:&#x2F;&#x2F;www.scnet.cn&#x2F;ui&#x2F;chatbot&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>国家超算</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yuanbao.tencent.com/chat" title="腾讯元宝 → https:&#x2F;&#x2F;yuanbao.tencent.com&#x2F;chat" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>腾讯元宝</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/" title="必应搜索 → https:&#x2F;&#x2F;cn.bing.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>必应搜索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.hao268.com/" title="网址之家 → https:&#x2F;&#x2F;www.hao268.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>网址之家</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ac.scmor.com/" title="思谋学术 → https:&#x2F;&#x2F;ac.scmor.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>思谋学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://search.essclick.com/" title="爱思学术 → https:&#x2F;&#x2F;search.essclick.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>爱思学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://scholar.lanfanshu.cn/" title="番薯学术 → https:&#x2F;&#x2F;scholar.lanfanshu.cn&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>番薯学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://xmsoushu.com/" title="熊猫搜书 → https:&#x2F;&#x2F;xmsoushu.com&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>熊猫搜书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/translator" title="必应翻译 → https:&#x2F;&#x2F;cn.bing.com&#x2F;translator" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>必应翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.baidu.com/#zh/en" title="百度翻译 → https:&#x2F;&#x2F;fanyi.baidu.com&#x2F;#zh&#x2F;en" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>百度翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.youdao.com/?keyfrom=fanyi.logo" title="有道翻译 → https:&#x2F;&#x2F;fanyi.youdao.com&#x2F;?keyfrom&#x3D;fanyi.logo" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>有道翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.oxfordlearnersdictionaries.com/definition/english/" title="牛津翻译 → https:&#x2F;&#x2F;www.oxfordlearnersdictionaries.com&#x2F;definition&#x2F;english&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>牛津翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://wx.qq.com/" title="网页微信 → https:&#x2F;&#x2F;wx.qq.com" rel="noopener me" target="_blank"><i class="fab fa-weixin fa-fw"></i>网页微信</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://login.partner.microsoftonline.cn/" title="微软办公 → https:&#x2F;&#x2F;login.partner.microsoftonline.cn" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软办公</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mathsolver.microsoft.com/" title="微软数学 → https:&#x2F;&#x2F;mathsolver.microsoft.com" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软数学</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.mail.bnu.edu.cn/" title="师大邮箱 → https:&#x2F;&#x2F;www.mail.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>师大邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mail.sina.com.cn/" title="新浪邮箱 → https:&#x2F;&#x2F;mail.sina.com.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>新浪邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.aliyundrive.com/sign/in" title="阿里云盘 → https:&#x2F;&#x2F;www.aliyundrive.com&#x2F;sign&#x2F;in" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>阿里云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yun.139.com/w/#/" title="移动云盘 → https:&#x2F;&#x2F;yun.139.com&#x2F;w&#x2F;#&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>移动云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianguoyun.com/d/login" title="坚果网盘 → https:&#x2F;&#x2F;www.jianguoyun.com&#x2F;d&#x2F;login" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>坚果网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://efss.qloud.my/index.php/login?clear=1" title="Next云盘 → https:&#x2F;&#x2F;efss.qloud.my&#x2F;index.php&#x2F;login?clear&#x3D;1" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>Next云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.123pan.com/" title="123 网盘 → https:&#x2F;&#x2F;www.123pan.com&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>123 网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://annas-archive.org/" title="安娜档案 → https:&#x2F;&#x2F;annas-archive.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>安娜档案</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://book.sciencereading.cn/" title="科学文库 → https:&#x2F;&#x2F;book.sciencereading.cn" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>科学文库</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ylibrary.org/" title="Ylibrary → https:&#x2F;&#x2F;ylibrary.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Ylibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tboxn.com/sites/320.html" title="Zlibrary → https:&#x2F;&#x2F;www.tboxn.com&#x2F;sites&#x2F;320.html" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Zlibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.koushare.com/" title="蔻享官网 → https:&#x2F;&#x2F;www.koushare.com" rel="noopener me" target="_blank"><i class="fas fa-globe-asia fa-fw"></i>蔻享官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.duolingo.cn/" title="多邻国官 → https:&#x2F;&#x2F;www.duolingo.cn" rel="noopener me" target="_blank"><i class="fas fa-school fa-fw"></i>多邻国官</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.bnu.edu.cn/" title="师大官网 → https:&#x2F;&#x2F;www.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>师大官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://one.bnu.edu.cn/" title="数字京师 → https:&#x2F;&#x2F;one.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>数字京师</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.runoob.com/font-awesome/fontawesome-icons-brand.html" title="图站图标 → https:&#x2F;&#x2F;www.runoob.com&#x2F;font-awesome&#x2F;fontawesome-icons-brand.html" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>图站图标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://shields.io/badges" title="项目微标 → https:&#x2F;&#x2F;shields.io&#x2F;badges" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>项目微标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jd.com/" title="京东购物 → https:&#x2F;&#x2F;www.jd.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>京东购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.taobao.com/" title="淘宝购物 → https:&#x2F;&#x2F;www.taobao.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>淘宝购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/" title="LaTeXLiv → https:&#x2F;&#x2F;www.latexlive.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXLiv</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/help" title="LaTeXHel → https:&#x2F;&#x2F;www.latexlive.com&#x2F;help" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXHel</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://p2t.breezedeus.com/" title="Pix2Text → https:&#x2F;&#x2F;p2t.breezedeus.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Pix2Text</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://simpletex.cn/" title="Simplete → https:&#x2F;&#x2F;simpletex.cn" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Simplete</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/29/Linux%E4%BD%BF%E7%94%A8dnsmasq%E5%BC%80%E5%90%AF%E6%9C%AC%E5%9C%B0dns%E7%BC%93%E5%AD%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/29/Linux%E4%BD%BF%E7%94%A8dnsmasq%E5%BC%80%E5%90%AF%E6%9C%AC%E5%9C%B0dns%E7%BC%93%E5%AD%98/" class="post-title-link" itemprop="url">Linux使用dnsmasq开启本地dns缓存</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-29 10:36:25" itemprop="dateCreated datePublished" datetime="2024-11-29T10:36:25+08:00">2024-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="通俗解释-dns">通俗解释 DNS</h1>
<p>DNS (Domain Name System) 是域名系统的缩写，它作为可以将域名和 IP
地址相互映射的一个分布式数据库。通俗来讲，互联网上每台电脑都会有一个<code>身份证号</code>来标记电脑，然后电脑相互访问时就需要知道这个身份证号才能到达指定的电脑，这个身份证号就是<code>IP</code>地址。但是，如果仅仅是有限的几台电脑，这个方法足够应对了，然而互联网上有无数的电脑，每次访问某台电脑，就需要查询这台电脑的
<code>IP</code>,
显然一个人不可能记住那么多的<code>IP</code>地址。为了方便人的记忆，我们可以为
<code>IP</code>
起一个别名,也就是域名，比如<code>www.baidu.com</code>，同时把<code>IP</code>和<code>www.baidu.com</code>的对应关系保存在<code>/etc/hosts</code>文件中。
这样每次电脑访问这台电脑时就直接访问<code>www.baidu.com</code>,
然后电脑就会去<code>/etc/hosts</code>查询这个域名对应的<code>IP</code>,
然后根据查到的<code>IP</code>访问对应的电脑。
然而，这样做以后，每个人的电脑就会保存不同的<code>hosts</code>文件，同时也需要每次访问新的电脑都要编辑这个<code>hosts</code>文件，世界很大，维护<code>hosts</code>会耽误大量的时间，同时若自己换了电脑，那必然也要带上这个自己习惯的<code>hosts</code>文件到新的电脑。为了解决这个问题，网络上出现了专门同步<code>IP</code>与域名对应关系的分布式服务器（也是一台电脑）,
这台电脑就叫做 DNS 服务器。当我们知道了 DNS 服务器的
<code>IP</code>以后，把这个
<code>IP</code>告诉我们自己的电脑，这样每次访问互联网，我们自己的电脑就会向
DNS 服务器发出申请，返回相应域名的
<code>IP</code>地址，然后再通过这个<code>IP</code>访问域名对应的电脑,
于是<code>hosts</code>文件实现了全网同步。但是，随之而来的问题是 DNS
服务器的性能会因不同的设备而有差异，同时不同 DNS
服务器也会因为通信线路和地理位置等造成访问速度不同，我们肯定希望速度越快越好，于是人们就需要选择那些可靠的大厂
DNS 服务器。</p>
<h1 id="提升网络访问速度">提升网络访问速度</h1>
<p>随着互联网的发展，全球的电脑越来越多，同一个网站为了更好的展示效果和更强大的功能而链接到多个网站。有时候，我们可以快速打开一个网站，但是它会花相当长的时间来打开完整的网站，这个体验就不是很好了。
事实上，DNS
服务器再快也不会比自己电脑上保存了<code>hosts</code>文件快，似乎问题又回到了最初，但是又不一样。为了提高访问速度，我们可以通过某些软件记录下每次访问过的域名和相应的<code>IP</code>地址，这样第二次以后速度会实现质的飞越。同时，现在的硬盘价格也是相当便宜，我们平时游览的网站通常也是和自己相关领域的有限数目的网站，因此使用软件自动缓存下这些访问过的记录也是一件相当容易的事情，这会给我们网上冲浪带来质的飞越。</p>
<h1 id="全自动安装脚本">全自动安装脚本</h1>
<p>如果您使用的是<code>ArchLinux</code>,
同时不想关注细节，请直接保存脚本<code>syndns.sh</code>后，执行<code>sudo chmod +x syndns.sh &amp;&amp; ./syndns -i</code>
, 即可一键配置好本地<code>dns</code>缓存。</p>
<figure class="highlight sh"><figcaption><span>syndns.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Program  : syndns.sh</span></span><br><span class="line"><span class="comment"># Version  : v1.1</span></span><br><span class="line"><span class="comment"># Date     : 2024-11-30 00:52</span></span><br><span class="line"><span class="comment"># Author   : fengzhenhua</span></span><br><span class="line"><span class="comment"># Email    : fengzhenhua@outlook.com</span></span><br><span class="line"><span class="comment"># CopyRight: Copyright (C) 2022-2025 FengZhenhua(冯振华)</span></span><br><span class="line"><span class="comment"># License  : Distributed under terms of the MIT license.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 检测软件依懒, 若未检测到，则自动安装</span></span><br><span class="line"><span class="function"><span class="title">SYNDNS_DEPEND</span></span>()&#123;</span><br><span class="line">    <span class="keyword">for</span> VAR <span class="keyword">in</span> <span class="variable">$1</span> ;<span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="string">&quot;<span class="subst">$(pacman -Q |grep $VAR)</span>&quot;</span> = <span class="string">&quot;&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">sudo</span> pacman -S <span class="variable">$VAR</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line">&#125;</span><br><span class="line">SYN_EXE=<span class="string">&quot;/usr/local/bin/<span class="variable">$&#123;0%.sh&#125;</span>&quot;</span></span><br><span class="line">SYN_AUTO=<span class="string">&quot;<span class="variable">$HOME</span>/.config/autostart/<span class="variable">$&#123;0%.sh&#125;</span>.desktop&quot;</span></span><br><span class="line">SYN_SUDO=<span class="string">&quot;/etc/sudoers.d/01_<span class="variable">$USER</span>&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$1</span> == <span class="string">&quot;-i&quot;</span> -o <span class="variable">$1</span> == <span class="string">&quot;-I&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        SYNDNS_DEPEND <span class="string">&quot;inetutils dnsmasq&quot;</span></span><br><span class="line">        <span class="built_in">sudo</span> <span class="built_in">cp</span> -f <span class="variable">$0</span> <span class="variable">$SYN_EXE</span></span><br><span class="line">        <span class="built_in">sudo</span> <span class="built_in">chmod</span> +x <span class="variable">$SYN_EXE</span></span><br><span class="line">        <span class="keyword">if</span> [ ! -e <span class="variable">$SYN_AUTO</span> ]; <span class="keyword">then</span></span><br><span class="line">           <span class="built_in">sudo</span> <span class="built_in">touch</span> <span class="variable">$SYN_AUTO</span></span><br><span class="line"><span class="built_in">cat</span> &gt; <span class="variable">$SYN_AUTO</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">[Desktop Entry]</span></span><br><span class="line"><span class="string">Name=SynDns</span></span><br><span class="line"><span class="string">TryExec=syndns</span></span><br><span class="line"><span class="string">Exec=$SYN_EXE</span></span><br><span class="line"><span class="string">Type=Application</span></span><br><span class="line"><span class="string">Categories=GNOME;GTK;System;Utility;TerminalEmulator;</span></span><br><span class="line"><span class="string">StartupNotify=true</span></span><br><span class="line"><span class="string">X-Desktop-File-Install-Version=0.22</span></span><br><span class="line"><span class="string">X-GNOME-Autostart-enabled=true</span></span><br><span class="line"><span class="string">Hidden=false</span></span><br><span class="line"><span class="string">NoDisplay=false</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&quot;cat &gt; /etc/dnsmasq.conf&quot;</span> &lt;&lt;<span class="string">EOA</span></span><br><span class="line"><span class="string">domain-needed</span></span><br><span class="line"><span class="string">bogus-priv</span></span><br><span class="line"><span class="string">resolv-file=/etc/resolv.conf</span></span><br><span class="line"><span class="string">no-poll</span></span><br><span class="line"><span class="string">interface=lo</span></span><br><span class="line"><span class="string">listen-address=127.0.0.1</span></span><br><span class="line"><span class="string">bind-interfaces</span></span><br><span class="line"><span class="string">no-hosts</span></span><br><span class="line"><span class="string">addn-hosts=/dev/shm/dnsrecord.txt</span></span><br><span class="line"><span class="string">cache-size=9999</span></span><br><span class="line"><span class="string">port=53</span></span><br><span class="line"><span class="string">EOA</span></span><br><span class="line"><span class="keyword">if</span> [ ! -e <span class="variable">$SYN_SUDO</span> ]; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">sudo</span> <span class="built_in">touch</span> <span class="variable">$SYN_SUDO</span></span><br><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&quot;cat &gt; <span class="variable">$SYN_SUDO</span>&quot;</span> &lt;&lt;<span class="string">EOB</span></span><br><span class="line"><span class="string">$USER ALL=(ALL) NOPASSWD: /bin/systemctl restart dnsmasq.service, /bin/systemctl start dnsmasq.service</span></span><br><span class="line"><span class="string">EOB</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">SYN_REC=$(grep <span class="string">&quot;addn-hosts&quot;</span> /etc/dnsmasq.conf)</span><br><span class="line">SYN_REC=<span class="variable">$&#123;SYN_REC#*=&#125;</span></span><br><span class="line"><span class="built_in">cat</span> /etc/hosts &gt; <span class="variable">$SYN_REC</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="subst">$(hostname -i)</span>                 localhost:&quot;</span> &gt;&gt; <span class="variable">$SYN_REC</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl start dnsmasq.service</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>本脚本全自动配置好了<code>dnsmasq</code>,
但是若想达到自己快速访问自己习惯的网站，请在<code>/etc/hosts</code>文件中加入<code>IP</code>和域名映射，具体操作参见：<a
href="/2024/11/29/Linux解决无法访问学术网站的问题/">Linux解决无法访问学术网站的问题</a></p>
</div>
<h1 id="屏蔽广告">屏蔽广告</h1>
<ul>
<li>建立屏蔽文件存放目录：<code>sudo mkdir /etc/dnsmasq.d</code></li>
<li>下载<code>anti-Ad</code>广告列表: <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> curl -o /etc/dnsmasq.d/anti-ad-for-dnsmasq.conf https://anti-ad.net/anti-ad-for-dnsmasq.conf</span><br></pre></td></tr></table></figure></li>
<li>修改配置文件<code>/etc/dnsmasq.conf</code>: <figure class="highlight sh"><figcaption><span>/etc/dnsmasq.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">domain-needed</span><br><span class="line">bogus-priv</span><br><span class="line">resolv-file=/etc/resolv.conf</span><br><span class="line">no-poll</span><br><span class="line">interface=lo</span><br><span class="line">listen-address=127.0.0.1</span><br><span class="line">bind-interfaces</span><br><span class="line">no-hosts</span><br><span class="line">addn-hosts=/dev/shm/dnsrecord.txt</span><br><span class="line">addn-hosts=/etc/dnsmasq.d</span><br><span class="line">cache-size=9999</span><br><span class="line">port=53</span><br></pre></td></tr></table></figure></li>
<li>重启<code>dnsmasq.service</code>服务 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart dnsmasq.service</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="技术细节">技术细节</h1>
<h2 id="linux-使用-dnsmasq-开启本地-dns-缓存">Linux 使用 dnsmasq
开启本地 dns 缓存</h2>
<p><a target="_blank" rel="noopener" href="https://dnsmasq.org/doc.html">dnsmasq</a> 是一个轻量组 <a
target="_blank" rel="noopener" href="https://learn.microsoft.com/zh-cn/windows-server/troubleshoot/dynamic-host-configuration-protocol-basics">DHCP</a>
和缓存 <a
target="_blank" rel="noopener" href="https://www.pcmag.com/how-to/what-is-dns-how-it-works-domain-name-system">DNS</a>
服务器。</p>
<h3 id="安装-dnsmasq">1. 安装 dnsmasq</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S dnsmasq</span><br></pre></td></tr></table></figure>
<h3 id="配置-dnsmasq">2. 配置 dnsmasq</h3>
<p><code>dnsmasq</code>
的主配置文件为<code>/etc/dnsmasq.conf</code>。一些配置 <code>dns</code>
缓存相关参数（更多参数说明见 <a
target="_blank" rel="noopener" href="https://thekelleys.org.uk/dnsmasq/docs/dnsmasq.conf.example">https://thekelleys.org.uk/dnsmasq/docs/dnsmasq.conf.example</a>
或 <code>/etc/dnsmasq.conf</code> 内说明）</p>
<h4 id="配置文件设置">配置文件设置</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/dnsmasq.conf</span><br><span class="line"></span><br><span class="line">domain-needed</span><br><span class="line"></span><br><span class="line">port=53</span><br><span class="line"></span><br><span class="line">bogus-priv</span><br><span class="line"></span><br><span class="line">interface=lo</span><br><span class="line"></span><br><span class="line">bind-interfaces</span><br><span class="line"></span><br><span class="line">listen-address=127.0.0.1</span><br><span class="line"></span><br><span class="line">cache-size=4000</span><br><span class="line"></span><br><span class="line">resolv-file=/etc/resolv.dnsmasq</span><br><span class="line"></span><br><span class="line">no-poll</span><br></pre></td></tr></table></figure>
<h4 id="参数说明">参数说明</h4>
<p><strong>（1）domain-needed</strong></p>
<p>如果没有域名后缀的请求（即单个主机名的查询）会被忽略，不会被转发到上游
DNS 服务器。防止将无效的主机名查询发送到外部 DNS 服务器。</p>
<p><strong>（2）port</strong></p>
<p>绑定指定端口</p>
<p><strong>（3）bogus-priv</strong></p>
<p>阻止将私有 IP 地址范围的查询结果返回给客户端。如果上游 DNS
服务器返回的结果是私有 IP 地址，dnsmasq 会将其丢弃。防止意外将私有 IP
地址暴露在外部网络。</p>
<p><strong>（4）interface=lo</strong></p>
<p>指定 dnsmasq 仅监听在本地回环接口 lo 上。限制 dnsmasq
只在本机的回环接口上工作，不对外提供 DNS 服务，增加安全性。</p>
<p><strong>（5）bind-interfaces</strong></p>
<p>强制 dnsmasq 只绑定到配置中明确指定的接口（例如 lo）。确保 dnsmasq
只监听指定接口，防止不必要的接口绑定，增强控制和安全性。</p>
<p><strong>（6）listen-address</strong></p>
<p>指定 dnsmasq 应该监听 DNS 查询的 IP 地址。如果使用 dnsmasq 作为本地
DNS 缓存服务，设置为 127.0.0.1。</p>
<p><strong>（7）resolv-file</strong></p>
<p>设置包含上游 DNS 服务器的文件的路径，不打开的话，默认用
/etc/resolv.conf ，也可以直接指定，例如，我们在 /etc 中创建一个名为
resolv.dnsmasq 的文件，其内容如下：</p>
<p>cat /etc/resolv.dnsmasq</p>
<p>nameserver 8.8.8.8</p>
<p>这些配置将使 dnsmasq 能够从 8.8.8.8 查询 DNS 记录并在本地缓存。</p>
<p><strong>（8）cache-size</strong></p>
<p>定义要缓存的最大 DNS 记录数。</p>
<p><strong>（9）no-resolv</strong></p>
<p>dnsmasq不使用 /etc/resolv.conf 或者其他文件，不做上游DNS查询。取消注释此行以防止
dnsmasq 使用 /etc/resolv.conf 文件。</p>
<p><strong>（10）no-poll</strong></p>
<p>禁用 dnsmasq 对 /etc/resolv.dnsmasq 文件的持续轮询检查。提高<a
target="_blank" rel="noopener" href="https://marketing.csdn.net/p/3127db09a98e0723b83b2914d9256174?pId=2782?utm_source=glcblog&amp;spm=1001.2101.3001.7020">性能</a>，避免频繁检查该文件的变动。如果不经常修改该文件，这个选项可以避免不必要的文件系统访问。</p>
<h3 id="启用-dnsmasq-服务">3. 启用 dnsmasq 服务</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> --now dnsmasq.service</span><br></pre></td></tr></table></figure>
<h3 id="将默认-dns-设置为-dnsmasq">4. 将默认 DNS 设置为 dnsmasq</h3>
<p>如果已经取消注释 dnsmasq 配置中的 no-resolv 选项，则无需编辑
<code>/etc/resolv.conf</code>。</p>
<p>注释掉所有涉及 nameserver 的行，并写入127.0.0.1到
<code>/etc/resolv.conf</code>，如下示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/resolv.conf</span><br><span class="line"><span class="comment"># nameserver 8.8.8.8</span></span><br><span class="line">nameserver 127.0.0.1</span><br></pre></td></tr></table></figure>
<hr />
<center>
<i class="fa fa-flag" style="font-size:52px;color:red"></i><font color="DarkViolet" size="8" >
dnsmasq 性能优化</font>
</center>
<hr />
<p>我们都知道<code>Bind</code>不配合数据库的情况下，经常需要重新载入并读取配置文件，这是造成性能低下的原因。根据这点教训，我们可以考虑不读取<code>/etc/hosts</code>文件。而是另外指定一个在共享内存里的文件，比如<code>/dev/shm/dnsrecord.txt</code>
，这样就不费劲了，又由于内存的非持久性，重启就消失，可以设置为开机启动服务，实现每次开机自动同步<code>/etc/hosts</code>文件到内存中。</p>
<h3 id="配置-dnsmasq-1">1. 配置 dnsmasq</h3>
<figure class="highlight sh"><figcaption><span>/etc/dnsmasq.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">no-hosts</span><br><span class="line">addn-hosts=/dev/shm/dnsrecord.txt</span><br></pre></td></tr></table></figure>
<h3 id="创建同步脚本-syndns.sh">2. 创建同步脚本 syndns.sh</h3>
<figure class="highlight sh"><figcaption><span>/usr/local/bin/syndns</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># syndns.sh</span></span><br><span class="line"><span class="comment"># Copyright (C) 2024 Zhen-hua Feng &lt;fengzhenhua@outlook.com&gt;</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Distributed under terms of the MIT license.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="built_in">cat</span> /etc/hosts &gt; /dev/shm/dnsrecord.txt</span><br><span class="line"><span class="built_in">sudo</span> systemctl start dnsmasq.service</span><br></pre></td></tr></table></figure>
<h3 id="提升权限">3. 提升权限</h3>
<figure class="highlight sh"><figcaption><span>/etc/sudoers.d/01_feng</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feng ALL=(ALL) NOPASSWD: /bin/systemctl restart dnsmasq.service, /bin/systemctl start dnsmasq.service</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>提升启动<code>dnsmasq.service</code>的开启权限后，开机启动服务就不再需要<code>sudo</code>输入密码了，这样做更加合理。</p>
</div>
<h3 id="设置开机时启动">4. 设置开机时启动</h3>
<figure class="highlight sh"><figcaption><span>~/.config/autostart/syndns.desktop</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=SynDns</span><br><span class="line">TryExec=syndns</span><br><span class="line">Exec=/usr/local/bin/syndns</span><br><span class="line">Type=Application</span><br><span class="line">Categories=GNOME;GTK;System;Utility;TerminalEmulator;</span><br><span class="line">StartupNotify=<span class="literal">true</span></span><br><span class="line">X-Desktop-File-Install-Version=0.22</span><br><span class="line">X-GNOME-Autostart-enabled=<span class="literal">true</span></span><br><span class="line">Hidden=<span class="literal">false</span></span><br><span class="line">NoDisplay=<span class="literal">false</span></span><br></pre></td></tr></table></figure>
<div class="note primary"><p>由于本人的桌面环境是<code>Gnome</code>,
所以推荐使用此处的<code>ArchLinux</code>配置自启动程序的方法。同时，在尝试使用<code>systemctl</code>方案时并求成功，原因在于<code>systemctl</code>是系统级服务，启动时<code>cat</code>写入内存的文件<code>dnsrecord.txt</code>就属于具备<code>root</code>权限，因此由于<code>cat</code>权限不足而失败。</p>
</div>
<h2 id="针对网站提速">针对网站提速</h2>
<p>将常用网站的域名和<code>IP</code>放置到 <code>/etc/hosts</code>
文件可以缩短主机访问
<code>DNS</code>服务器的时间，前面将这些常用网站添加到内存文件
<code>/dev/shm/dnsrecord.txt</code>
中，这极大的提高了电脑访问的速度，因为即使是固态硬盘，它的读取速度也是与内存无法相比的，而这个文件却占据很小内存，甚至可以忽略不计。但是，在访问某一网站时，由于网站会借助
<code>cdn</code>
等添加一些<code>js</code>组件，而这一部分会零星的占用不少时间去访问
<code>DNS</code>服务器。为了进一步提速，就需要我们将这些后台访问的网址域名也添加到<code>/etc/hosts</code>文件中。方法是：打开
<code>firefox</code>
→<code>更多工具</code>→<code>Web 开发者工具</code>→<code>网络</code>,
然后就可以看到后台访问的许多网站，手动把这些域名解析后有可能获取多个<code>IP</code>,
将这些<code>IP</code>使用<code>Ping</code>工具测速后，把最快的<code>IP</code>添加到<code>hosts</code>中。下次访问主网站，速度就飞起了。</p>
<p>另外需要注意的是：<code>firefox</code>→<code>设置</code>→<code>隐私和安全</code>→取消<code>关闭Firfox时删除Cookie与网站数据</code>.
这样设置后，下次在访问此网站，那些缓存好的图片等就不需要再次下载了，网站只下载那些发生变动的部分，因此这又可以进一步的提升访问速度。</p>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/zh-tw/Dnsmasq">dnsmasq-ArchWiki</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/xaioxiaotutunuo/article/details/143356372">dnsmasq本地缓存dns方案</a></li>
<li><a
target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1174717">DNSmasq详细解析及详细配置</a></li>
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/51251861">linux基本服务系列之DNSmasq的使用</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/lps365/p/3366497.html">archlinux
DNS缓存建立</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gaoyanbing/p/13030111.html">利用
Dnsmasq 部署 DNS 服务</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/XDG_Autostart">XDG
Autostart-Wiki</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/29/Linux%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E5%AD%A6%E6%9C%AF%E7%BD%91%E7%AB%99%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/29/Linux%E8%A7%A3%E5%86%B3%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E5%AD%A6%E6%9C%AF%E7%BD%91%E7%AB%99%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">Linux解决无法访问学术网站的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-29 01:06:49" itemprop="dateCreated datePublished" datetime="2024-11-29T01:06:49+08:00">2024-11-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>科研工作中需要经常访问学术网站，然而有时候却无法访问或速度太慢，以致于论文无法下载。为解决这一问题，本文提出修改<code>/etc/hosts</code>文件的方法。</p>
<h2 id="解决追加内容到-hosts-时无权限问题">解决追加内容到 hosts
时无权限问题</h2>
<h3 id="使用子命令">1. 使用子命令</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> bash -c <span class="string">&quot;cat &gt;&gt; /etc/hosts&quot;</span> &lt;&lt; <span class="string">EOF</span></span><br><span class="line"><span class="string">172.67.9.71                  journals.aps.org</span></span><br><span class="line"><span class="string">104.26.5.132                 doi.org</span></span><br><span class="line"><span class="string">66.22.61.221                 iopscience.iop.org</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<h3 id="使用tee命令">2. 使用tee命令</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">tee</span> -a /etc/hosts &gt; /dev/null &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">172.67.9.71                  journals.aps.org</span></span><br><span class="line"><span class="string">104.26.5.132                 doi.org</span></span><br><span class="line"><span class="string">66.22.61.221                 iopscience.iop.org</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>
<h2 id="ip-查询">Ip 查询</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://zh-hans.ipshu.com/">https://zh-hans.ipshu.com</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ip138.com/">https://www.ip138.com</a></li>
<li><a target="_blank" rel="noopener" href="https://uutool.cn/nslookup/">https://uutool.cn</a></li>
<li><a target="_blank" rel="noopener" href="https://ip.cn/">https://ip.cn</a></li>
<li><a target="_blank" rel="noopener" href="https://iplark.com/search">https://iplark.com</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ipuu.net/Home">https://www.ipuu.net</a></li>
<li><a target="_blank" rel="noopener" href="https://ip.weirain.com/">https://ip.weirain.com/</a></li>
</ul>
<div class="note primary"><p>注意：选择上述任意的一个网站，然后输入你要访问的学术网站的域名，查询到对应的<code>IP</code>地址，保存下来。</p>
</div>
<h2 id="写入到-hosts">写入到 hosts</h2>
<figure class="highlight sh"><figcaption><span>updatehost.sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/sh</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Program  : updatehost.sh</span></span><br><span class="line"><span class="comment"># Version  : v1.1</span></span><br><span class="line"><span class="comment"># Date     : 2023-10-08</span></span><br><span class="line"><span class="comment"># Author   : fengzhenhua</span></span><br><span class="line"><span class="comment"># Email    : fengzhenhua@outlook.com</span></span><br><span class="line"><span class="comment"># CopyRight: Copyright (C) 2022-2025 FengZhenhua(冯振华)</span></span><br><span class="line"><span class="comment"># License  : Distributed under terms of the MIT license.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">OutHost=<span class="string">&quot;/etc/hosts&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> curl -o <span class="variable">$OutHost</span> https://gitlab.com/ineo6/hosts/-/raw/master/next-hosts\?inline\=<span class="literal">false</span></span><br><span class="line"><span class="built_in">sudo</span> sh -c <span class="string">&quot;cat &gt;&gt; <span class="variable">$OutHost</span>&quot;</span> &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">172.67.9.71                  journals.aps.org</span></span><br><span class="line"><span class="string">104.26.5.132                 doi.org</span></span><br><span class="line"><span class="string">66.22.61.221                 iopscience.iop.org</span></span><br><span class="line"><span class="string">104.20.229.70                orcid.org</span></span><br><span class="line"><span class="string">172.64.146.247               www.researchgate.net</span></span><br><span class="line"><span class="string">151.101.3.42                 arxiv.org</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart NetworkManager</span><br></pre></td></tr></table></figure>
<h2 id="windows下修改hosts">Windows下修改hosts</h2>
<ul>
<li>打开文本编辑器:
在<code>管理员权限</code>下打开你选择的文本编辑器。</li>
<li>打开hosts文件:
在文本编辑器中，选择<code>文件</code>→<code>打开</code>，找到的<code>hosts</code>文件
<br> <code>C:\Windows\System32\drivers\etc\hosts</code>。</li>
<li>编辑hosts文件:
在<code>hosts</code>文件的最后一行，添加你需要的域名和对应的IP地址。例如，你想将
<br>
<code>www.example.com</code>指向本地的<code>127.0.0.1</code>，那么可以在<code>hosts</code>文件中添加以下内容：
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       www.example.com</span><br></pre></td></tr></table></figure>
每个映射关系应该占据一行，IP地址和域名之间使用制表符或空格进行分隔。</li>
<li>保存文件: 在编辑完成后，保存hosts文件。</li>
<li>刷新DNS缓存
<ul>
<li>打开命令提示符：
在开始菜单中搜索“命令提示符”，并以管理员权限打开。</li>
<li>执行命令： 在命令提示符中输入以下命令，并按下回车键：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig/flushdns</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<h2 id="参考文章">参考文章</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.amjun.com/1628.html">Linux 执行 cat
命令往文件写入内容提示 Permission denied</a></li>
<li><a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/438447914">如何修改hosts文件？几种修改hosts文件的方法</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_55846296/article/details/131451501">一步步教你修改Windows本地hosts文件，轻松修改域名指向！</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/28/Linux%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/28/Linux%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux用户组管理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-28 23:38:56" itemprop="dateCreated datePublished" datetime="2024-11-28T23:38:56+08:00">2024-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在<code>ArchLinux</code>的<a
target="_blank" rel="noopener" href="https://arch.icekylin.online/guide/rookie/desktop-env-and-app.html#_2-%E5%87%86%E5%A4%87%E9%9D%9E-root-%E7%94%A8%E6%88%B7">安装教程</a>和<a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Sudo">Sudo-ArchWiki</a>中都默认建立了<code>wheel</code>组，并且赋予其<code>sudo</code>权限，这个操作就不是太安全了，因此在安装系统时您应当建立自己的组，而不是使用网上所统一使用的<code>wheel</code>，所以本文就来更正这个错误。</p>
<h2 id="查看本机建立的组">查看本机建立的组</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">groups</span></span><br><span class="line">&gt;</span><br><span class="line">wheel yourname</span><br></pre></td></tr></table></figure>
<h2
id="建立自己的组并将当前帐号移到自己的组">建立自己的组并将当前帐号移到自己的组</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> groupadd yourgrp</span><br><span class="line"><span class="built_in">sudo</span> usermod -aG yourgrp yourname</span><br></pre></td></tr></table></figure>
<h2 id="删除-wheel-组">删除 wheel 组</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> groupdel wheel</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>注意：删除<code>wheel</code>后，需要修改<code>/etc/sudoers</code>文件，将其中的<code>wheel</code>全部替换成<code>yourgrp</code>，这样您的<code>yourgrp</code>才能具备<code>sudo</code>的权限。</p>
</div>
<h2 id="参考文章">参考文章</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/MrWangHao/article/details/131334000">21.Linux把用户加入或移除用户组</a></li>
<li><a
target="_blank" rel="noopener" href="https://wenku.csdn.net/answer/mag01q5150">linux创建组并添加用户</a></li>
<li><a target="_blank" rel="noopener" href="https://www.idc.net/help/149347/">Linux用户组及其命令：id
groups (linux id groups)</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/28/Linux%E4%B8%AD4%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%89%BE%E5%87%BA%E8%BF%9B%E7%A8%8BID%EF%BC%88PID%EF%BC%89%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/28/Linux%E4%B8%AD4%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E6%89%BE%E5%87%BA%E8%BF%9B%E7%A8%8BID%EF%BC%88PID%EF%BC%89%E7%9A%84%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">Linux中4个简单的找出进程ID（PID）的方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-28 15:57:42" itemprop="dateCreated datePublished" datetime="2024-11-28T15:57:42+08:00">2024-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>每个人都知道 PID，究竟什么是 PID？为什么你想要 PID？你打算用 PID
做什么？你脑子里有同样的问题吗？如果是这样，你就找对地方了解这些细节了。</p>
<p>我们查询 PID 主要是用来杀死一个没有响应的程序，它类似于 Windows
任务管理器一样。 Linux GUI 也提供相同的功能，但 CLI 是执行
<code>kill</code> 操作的有效方法。</p>
<h3 id="什么是进程-id">什么是进程 ID?</h3>
<p><code>PID</code>
代表进程标识号<code>process identification</code>，它在大多数操作系统内核（如
Linux、Unix、macOS 和
Windows）中使用。它是在操作系统中创建时自动分配给每个进程的唯一标识号。一个进程是一个正在运行的程序实例。</p>
<p>除了 init 进程外其他所有的进程 ID 每次都会改变，因为 init
始终是系统上的第一个进程，并且是所有其他进程的父进程。它的 PID 是
1。</p>
<p>PID 默认的最大值是 <code>32768</code>。可以在你的系统上运行
<code>cat /proc/sys/kernel/pid_max</code> 来验证。在 32
位系统上，<code>32768</code> 是最大值，但是我们可以在 64
位系统上将其设置为最大 2<sup>22（约</sup> 4 百万）内的任何值。</p>
<p>你可能会问，为什么我们需要这么多的 PID？因为我们不能立即重用
PID，这就是为什么。另外为了防止可能的错误。</p>
<p>系统正在运行的进程的 PID 可以通过使用
<code>pidof</code>、<code>pgrep</code>、<code>ps</code> 和
<code>pstree</code> 命令找到。</p>
<h3 id="方法-1使用-pidof-命令">方法 1：使用 pidof 命令</h3>
<p><code>pidof</code> 用于查找正在运行的程序的进程
ID。它在标准输出上打印这些 id。为了演示，我们将在 Debian
9（stretch）系统中找出 Apache2 的进程 ID。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pidof apache2</span><br><span class="line">3754 2594 2365 2364 2363 2362 2361</span><br></pre></td></tr></table></figure>
<p>从上面的输出中，你可能会遇到难以识别进程 ID
的问题，因为它通过进程名称显示了所有的
PID（包括父进程和子进程）。因此，我们需要找出父
PID（PPID），这是我们要查找的。它可能是第一个数字。在本例中，它是
<code>3754</code>，并按降序排列。</p>
<h3 id="方法-2使用-pgrep-命令">方法 2：使用 pgrep 命令</h3>
<p><code>pgrep</code> 遍历当前正在运行的进程，并将符合选择条件的进程 ID
列到标准输出中。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pgrep apache2</span><br><span class="line">2361</span><br><span class="line">2362</span><br><span class="line">2363</span><br><span class="line">2364</span><br><span class="line">2365</span><br><span class="line">2594</span><br><span class="line">3754</span><br></pre></td></tr></table></figure>
<p>这也与上面的输出类似，但是它将结果从小到大排序，这清楚地说明父 PID
是最后一个。在本例中，它是 <code>3754</code>。</p>
<p><strong>注意：</strong> 如果你有多个进程的进程 ID，那么在使用
<code>pidof</code> 和 <code>pgrep</code> 识别父进程 ID
时就可能不会很顺利。</p>
<h3 id="方法-3使用-pstree-命令">方法 3：使用 pstree 命令</h3>
<p><code>pstree</code> 将运行的进程显示为一棵树。树的根是某个
pid，如果省略了 pid 参数，那么就是 init。如果在 <code>pstree</code>
命令中指定了用户名，则显示相应用户拥有的所有进程。</p>
<p><code>pstree</code>
会将相同的分支放在方括号中，并添加重复计数的前缀来可视化地合并到一起。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pstree -p | grep <span class="string">&quot;apache2&quot;</span></span><br><span class="line">|- apache2(3754) -|-apache2(2361)</span><br><span class="line">| |-apache2(2362)</span><br><span class="line">| |-apache2(2363)</span><br><span class="line">| |-apache2(2364)</span><br><span class="line">| |-apache2(2365)</span><br><span class="line">| `-apache2(2594)</span><br></pre></td></tr></table></figure>
<p>要单独获取父进程，请使用以下格式。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pstree -p | grep <span class="string">&quot;apache2&quot;</span> | <span class="built_in">head</span> -1</span><br><span class="line">|- apache2(3754) -|-apache2(2361)</span><br></pre></td></tr></table></figure>
<p><code>pstree</code>
命令非常简单，因为它分别隔离了父进程和子进程，但这在使用
<code>pidof</code> 和 <code>pgrep</code> 时命令不容易做到。</p>
<h3 id="方法-4使用-ps-命令">方法 4：使用 ps 命令</h3>
<p><code>ps</code> 显示活动进程的选择信息。它显示进程
ID（<code>pid</code>=PID）、与进程关联的终端（<code>tname</code>=TTY）、以
<code>[DD-]hh:mm:ss</code> 格式（<code>time</code>=TIME）显示的累计 CPU
时间、以及执行名（<code>ucmd</code> = CMD）。输出默认是未排序的。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep <span class="string">&quot;apache2&quot;</span></span><br><span class="line">www-data 2361 0.0 0.4 302652 9732 ? S 06:25 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">www-data 2362 0.0 0.4 302652 9732 ? S 06:25 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">www-data 2363 0.0 0.4 302652 9732 ? S 06:25 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">www-data 2364 0.0 0.4 302652 9732 ? S 06:25 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">www-data 2365 0.0 0.4 302652 8400 ? S 06:25 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">www-data 2594 0.0 0.4 302652 8400 ? S 06:55 0:00 /usr/sbin/apache2 -k start</span><br><span class="line">root 3754 0.0 1.4 302580 29324 ? Ss Dec11 0:23 /usr/sbin/apache2 -k start</span><br><span class="line">root 5648 0.0 0.0 12784 940 pts/0 S+ 21:32 0:00 grep apache2</span><br></pre></td></tr></table></figure>
<p>从上面的输出中，我们可以根据进程的启动日期轻松地识别父进程
ID（PPID）。在此例中，apache2 启动于
<code>Dec 11</code>，它是父进程，其他的是子进程。apache2 的 PID 是
<code>3754</code>。</p>
<h2 id="引用">引用</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-9344-1.html">Linux 中 4
个简单的找出进程 ID（PID）的方法</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/28/Linux%E7%94%A8%E6%88%B7%E7%A8%8B%E5%BA%8F%E6%8F%90%E5%8D%87%E6%9D%83%E9%99%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/28/Linux%E7%94%A8%E6%88%B7%E7%A8%8B%E5%BA%8F%E6%8F%90%E5%8D%87%E6%9D%83%E9%99%90/" class="post-title-link" itemprop="url">Linux用户程序提升权限</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-28 15:05:52" itemprop="dateCreated datePublished" datetime="2024-11-28T15:05:52+08:00">2024-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>当设计的脚本需要调用某系统命令时，使用<code>sudo</code>后会提示输入密码，在自己明确自己在干什么时，这很不方便，会极大的降低效率。为解决这一问题，本文给出提升普通用户权限的方法。</p>
<h1 id="sudo-的权限控制">sudo 的权限控制</h1>
<p><code>sudo</code>的权限控制位于配置文件<code>/etc/sudoers</code>中，如果想要控制某个用户(或某个组用户)只能执行<code>root</code>权限中的一部分命令,
或者允许某些用户使用<code>sudo</code>时不需要输入密码.</p>
<h1 id="配置文件设置格式">配置文件设置格式</h1>
<h2 id="一般格式-root-allall-all">一般格式 root ALL=(ALL) ALL</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">授权用户/组 主机  =[(切换到哪些用户或组)] [是否需要输入密码验证] 命令1,命令2,...</span><br><span class="line">字段1      字段2  =[(字段3)] [字段4] 字段5</span><br><span class="line"> </span><br><span class="line">注意：凡是[ ]中的内容, 都能省略; 命令和命令之间用,号分隔;</span><br><span class="line"> </span><br><span class="line">字段1：</span><br><span class="line">不以%号开头的表示<span class="string">&quot;将要授权的用户&quot;</span> root</span><br><span class="line">以%号开头的表示<span class="string">&quot;将要授权的组&quot;</span> %wheel</span><br><span class="line"> </span><br><span class="line">字段2:表示允许登录的主机</span><br><span class="line">ALL表示所有; 如果该字段不为ALL,表示授权用户只能在某些机器上登录本服务器来执行<span class="built_in">sudo</span>命令</span><br><span class="line">eg:jack mycomputer=/usr/sbin/reboot,/usr/sbin/shutdown</span><br><span class="line">表示: 普通用户jack在主机(或主机组)mycomputer上, 可以通过<span class="built_in">sudo</span>执行reboot和shutdown两个命令</span><br><span class="line"> </span><br><span class="line">字段3:</span><br><span class="line">如果省略, 相当于(root:root)，表示可以通过<span class="built_in">sudo</span>提权到root; 如果为(ALL)或者(ALL:ALL), 表示能够提权到(任意用户:任意用户组)。</span><br><span class="line">注意：如果没省略,必须使用( )双括号包含起来</span><br><span class="line"> </span><br><span class="line">字段4：</span><br><span class="line">可能取值是NOPASSWD:。请注意NOPASSWD后面带有冒号:。表示执行<span class="built_in">sudo</span>时可以不需要输入密码</span><br><span class="line">eg:lucy ALL=(ALL) NOPASSWD: /bin/useradd</span><br><span class="line">表示: 普通用户lucy可以在任何主机上, 通过<span class="built_in">sudo</span>执行/bin/useradd命令, 并且不需要输入密码</span><br><span class="line"> 比如：hyc ALL=(ALL:ALL) NOPASSWD:ALL</span><br><span class="line">字段5:授权给用户的操作</span><br><span class="line">逗号分开一系列命令或者ALL表示允许所有操作</span><br></pre></td></tr></table></figure>
<h2 id="高阶用法">高阶用法</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">如果写成这样：</span><br><span class="line">papi ALL=(root) NOPASSWD: /bin/chown,/usr/sbin/useradd</span><br><span class="line">表示: 用户papi能在所有可能出现的主机上, 提权到root下执行/bin/chown, 不必输入密码; 但运行/usr/sbin/useradd 命令时需要密码.</span><br><span class="line"> </span><br><span class="line">注意：因为NOPASSWD:只影响了其后的第一个命令: 命令1.</span><br><span class="line">在具有<span class="built_in">sudo</span>操作的用户下, 执行<span class="built_in">sudo</span> -l可以查看到该用户被允许和被禁止运行的命令</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">通配符和取消命令</span><br><span class="line">eg:papi ALL=/usr/sbin/*,/sbin/*,!/usr/sbin/fdisk</span><br><span class="line">命令前面加上!号表示取消该命令</span><br><span class="line">表示意思：用户papi在所有可能出现的主机上, 能够运行目录/usr/sbin和/sbin下所有的程序, 但fdisk除外.</span><br></pre></td></tr></table></figure>
<p>系统文档推荐的做法是，修改<code>/etc/sudoers.d</code>
目录下的文件通过此方法修改<code>sudoers</code>
，需要在<code>/etc/sudoers</code>文件的最后行，加上 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@includedir /etc/sudoers.d</span><br></pre></td></tr></table></figure></p>
<div class="note primary"><p>注意: 这里的指令<code>@includedir</code>是一个整体, 具体参考 <a
target="_blank" rel="noopener" href="https://man.archlinux.org/man/sudoers.5#Including_other_files_from_within_sudoers">sudoers.5</a></p>
<p>任何在<code>/etc/sudoers.d/</code>目录下，不以<code>~</code>号结尾的文件和不包含<code>.</code>号的文件，都会被解析成<code>/etc/sudoers</code>的内容。
比如我新创建的用户 <code>hyc</code>
想要实现<code>root</code>权限，可在<code>/etc/sudoers.d/</code>下新建一个文件<code>01_hyc</code>
文件，输入以下语句<code>hyc ALL=(ALL:ALL) NOPASSWD:ALL</code> 。
此时新建的用户就能获取<code>root</code>权限。</p>
</div>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://cloud.tencent.com.cn/developer/article/2372335">Linux -
非root用户使用systemctl管理服务</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Sudo">Sudo-ArchWiki</a></li>
<li><a
target="_blank" rel="noopener" href="https://man.archlinux.org/man/sudoers.5#Including_other_files_from_within_sudoers">sudoers.5</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/28/Linux%E4%BF%AE%E5%A4%8D%E5%90%AF%E5%8A%A8%E5%99%A8%E4%B8%AD%E7%9A%84%E5%9B%BE%E6%A0%87%E6%98%BE%E7%A4%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/28/Linux%E4%BF%AE%E5%A4%8D%E5%90%AF%E5%8A%A8%E5%99%A8%E4%B8%AD%E7%9A%84%E5%9B%BE%E6%A0%87%E6%98%BE%E7%A4%BA/" class="post-title-link" itemprop="url">Linux修复启动器中的图标显示</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-28 10:18:17" itemprop="dateCreated datePublished" datetime="2024-11-28T10:18:17+08:00">2024-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Linux 是开源系统，所以无法指望它能像 Windows 或 Mac
系统一样面面俱到。在使用过程中，自定义一些配置也是经常遇到的。本文记录:
如何修复 Gnome 菜单中有的启动器对应的图标无法正常显示的问题。</p>
<h1 id="系统中存在相关图标的情况">系统中存在相关图标的情况</h1>
<p>图标的默认安装位置为<code>/usr/share/icons/</code>, 例如 ArchLinux
(2024-11-28)系统中，<code>Open JDK java</code>的图标就无法正常显示，查询启动器文件
<figure class="highlight sh"><figcaption><span>/usr/share/applications/java-java-openjdk.desktop</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=OpenJDK Java 23 Runtime</span><br><span class="line">Name[<span class="keyword">fi</span>]=OpenJDK Java 23 - ajonaikainen ympäristö</span><br><span class="line">Comment=OpenJDK Java 23 Runtime</span><br><span class="line">Comment[<span class="keyword">fi</span>]=OpenJDK Java 23 - ajonaikainen ympäristö</span><br><span class="line">Keywords=java;runtime</span><br><span class="line">Exec=/usr/lib/jvm/java-23-openjdk/bin/java -jar</span><br><span class="line">Terminal=<span class="literal">false</span></span><br><span class="line">Type=Application</span><br><span class="line">Icon=java23-openjdk</span><br><span class="line">MimeType=application/x-java-archive;application/java-archive;application/x-jar;</span><br><span class="line">NoDisplay=<span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p>既然其图标无法正常显示，则表明系统中并没有安装<code>java23-openjdk</code>图标。于是查询系统中安装的相关图标：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -R /usr/share/icons/ |grep java</span><br><span class="line">&gt;</span><br><span class="line">java-openjdk</span><br><span class="line">java-openjdk</span><br><span class="line">java-openjdk</span><br></pre></td></tr></table></figure></p>
<p>这表明系统中安装的图标为<code>java-openjdk</code>,
因此修改<code>java-java-openjdk.desktop</code>文件中的<code>Icon</code>为
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Icon=java-openjdk</span><br></pre></td></tr></table></figure></p>
<h1 id="如何指定图标路径">如何指定图标路径</h1>
<p>默认情况下，应用程序应该按照以下顺序查找：<code>$HOME/.icons</code>（为了向后兼容性），<code>$XDG_DATA_DIRS/icons</code>和<code>/usr/share/pixmaps</code>。应用程序可以进一步将自己的图标目录添加到此列表中，用户可以以应用程序/桌面特定的方式扩展或更改列表。在这些目录中，每个主题都存储为子目录。通过具有相同名称的子目录，可以将主题分布在多个基本目录中。这样，用户可以扩展和覆盖系统主题。
为了给第三方应用程序提供安装其图标的位置，始终应存在一个名为<code>hicolor</code>的主题。<code>hicolor</code>主题的数据可在以下网址下载：<a
target="_blank" rel="noopener" href="http://www.freedesktop.org/software/icon-theme/">http://www.freedesktop.org/software/icon-theme</a>。实现必须在当前主题中找不到图标时查找<code>hicolor</code>主题。
每个主题都存储为基本目录的子目录。主题的内部名称是子目录的名称，尽管由主题指定的用户可见名称可能不同。因此，主题名称区分大小写，并且仅限于<code>ASCII</code>字符。主题名称也不能包含逗号或空格。
在至少一个主题目录中，必须存在一个名为<code>index.theme</code>的文件，描述主题的属性。按顺序搜索基本目录时，使用找到的第一个<code>index.theme</code>文件。该文件描述了主题的一般属性。
在主题目录中还有一组包含图像文件的子目录。每个目录包含为特定名义图标大小设计的图标，如<code>index.theme</code>文件所述。子目录允许多级深入，例如主题<code>hicolor</code>中的子目录<code>48x48/apps</code>将位于<code>$basedir/hicolor/48x48/apps</code>。
图像文件必须是以下类型之一：<code>PNG</code>、<code>XPM</code>或<code>SVG</code>，并且扩展名必须为<code>.png</code>、<code>.xpm</code>或<code>.svg</code>（小写）。对于<code>SVG</code>文件的支持是可选的。不支持<code>SVG</code>的实现应该忽略任何<code>.svg</code>文件。除此之外，对于每个文件可能还有一个包含额外图标数据的附加文件。它的基本名称应与图像文件相同，扩展名为<code>.icon</code>。例如，如果图标文件名为<code>mime_source_c.png</code>，则相应的文件名将为<code>mime_source_c.icon</code>。
完整的规格比这个要详尽得多，但关键是：有一些设定的目录，你只需将图标放入其中，桌面就能找到它们。哪种最适合你取决于你的问题和耐心.</p>
<div class="note primary"><p>注意：有的文章中说“如果你把图标放在<code>/usr/share/icons/</code>（系统范围）或者你的个人目录<code>~/.icons</code>中，那么在<code>.desktop</code>文件中只需要使用图标文件名而不需要扩展名”。而我的系统中有一个应用<code>Singular</code>,
系统默认将其图标放置在了<code>/usr/share/icons/Singular.png</code>,
但是在文件<code>/usr/share/applications/Singular.desktop</code>中直接写为<code>Icon=Singular</code>，而系统并没有识别出来，于是修改为绝对路径<code>Icon=/usr/share/icons/Singular.png</code>后成功识别。修改完图标后，运行
<code>gtk-update-icon-cache -f -t &lt;图标主题路径&gt;</code>，系统会立刻检测到该图标。</p>
</div>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="http://standards.freedesktop.org/icon-theme-spec/icon-theme-spec-latest.html">freedesktop图标规范</a></li>
<li><a
target="_blank" rel="noopener" href="https://dev59.com/askubuntu/iUPXs4cB2Jgan1znl_8m">.desktop文件：如何指定图标路径</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/28/SCI%E6%8A%95%E7%A8%BF7%E4%B8%AA%E9%98%B6%E6%AE%B5%E7%9A%84%E9%82%AE%E4%BB%B6%E6%A8%A1%E6%9D%BF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/28/SCI%E6%8A%95%E7%A8%BF7%E4%B8%AA%E9%98%B6%E6%AE%B5%E7%9A%84%E9%82%AE%E4%BB%B6%E6%A8%A1%E6%9D%BF/" class="post-title-link" itemprop="url">SCI投稿7个阶段的邮件模板</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-28 00:19:59" itemprop="dateCreated datePublished" datetime="2024-11-28T00:19:59+08:00">2024-11-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="最初投稿coverletter">1.最初投稿Coverletter</h2>
<p>DearEditors:<br />
We would like to submit the enclosed manuscript entitled“Paper Title”,
which we wish to be considered forpublication in “Journal Name”. No
conflict of interestexits in the submission of this manuscript, and
manuscript isapproved by all authors for publication. I would like to
declare onbehalf of my co-authors that the work described was original
researchthat has not been published previously, and not under
considerationfor publication elsewhere, in whole or in part. All the
authorslisted have approved the manuscript that is enclosed.</p>
<p>In thiswork, we evaluated …… (简要介绍一下论文的创新性).I hope this
paper is suitable for “Journal Name”.</p>
<p>Thefollowing is a list of possible reviewers for your
consideration:</p>
<p>1)Name A E-mail: ××××@××××</p>
<p>2)Name B E-mail: ××××@××××</p>
<p>Wedeeply appreciate your consideration of our manuscript, and we
lookforward to receiving comments from the reviewers. If you have
anyqueries, please don’t hesitate to contact me at the addressbelow.</p>
<p>Thank you and best regards.</p>
<p>Yourssincerely,<br />
××××××<br />
Correspondingauthor: <br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2 id="催稿信">2.催稿信</h2>
<p>DearProf. ×××:</p>
<p>Sorry for disturbing you. I am notsure if it is the right time to
contact you to inquire about thestatus of my submitted manuscript titled
“Paper Title”.(ID: 文章稿号),although the status of “With Editor” has
been lasting formore than two months, since submitted to journal three
months ago. Iam just wondering that my manuscript has been sent to
reviewers ornot?</p>
<p>I would be greatly appreciated if you could spend some ofyour time
check the status for us. I am very pleased to hear from youon the
reviewer’s comments.</p>
<p>Thank you very much for yourconsideration.</p>
<p>Best regards! <br />
Yourssincerely,<br />
××××××<br />
Correspondingauthor: <br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2 id="修改稿coverletter">3.修改稿Coverletter</h2>
<p>DearDr/
Prof..（写上负责你文章编辑的姓名，显得尊重，因为第一次的投稿不知道具体负责的编辑，只能用通用的Editors）:</p>
<p>Onbehalf of my co-authors, we thank you very much for giving us
anopportunity to revise our manuscript, we appreciate editor
andreviewers very much for their positive and constructive comments
andsuggestions on our manuscript entitled “Paper
Title”.(ID: 文章稿号).</p>
<p>Wehave studied reviewer’s comments carefully and have maderevision
which marked in red in the paper. We have tried our best torevise our
manuscript according to the comments. Attached please findthe revised
version, which we would like to submit for your kindconsideration.</p>
<p>We would like to express our great appreciation toyou and reviewers
for comments on our paper. Looking forward tohearing from you.<br />
Thank you and best regards.</p>
<p>Yourssincerely,<br />
××××××<br />
Correspondingauthor:<br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2
id="修改稿回答审稿人意见最重要的部分">4.修改稿回答审稿人意见（最重要的部分）</h2>
<p>Listof Responses<br />
Dear Editors and Reviewers:<br />
Thank you for yourletter and for the reviewers’ comments concerning
ourmanuscript entitled “Paper Title” (ID: 文章稿号).Those comments are
all valuable and very helpful for revising andimproving our paper, as
well as the important guiding significance toour researches. We have
studied comments carefully and have madecorrection which we hope meet
with approval. Revised portion aremarked in red in the paper. The main
corrections in the paper and theresponds to the reviewer’s comments are
as flowing:</p>
<p>Respondsto the reviewer’s comments:</p>
<p>Reviewer #1: <br />
1. Response tocomment: (……简要列出意见……)<br />
Response:××××××<br />
2. Response to comment:(……简要列出意见……)<br />
Response:××××××<br />
。。。。。。逐条意见回答，切忌一定不能有遗漏</p>
<p>针对不同的问题有下列几个礼貌术语可适当用用：<br />
Weare very sorry for our negligence of ……...<br />
We arevery sorry for our incorrect writing ……...<br />
It isreally true as Reviewer suggested that……<br />
We havemade correction according to the Reviewer’s comments.<br />
Wehave re-written this part according to the Reviewer’ssuggestion<br />
As Reviewer suggested that……<br />
Consideringthe Reviewer’s suggestion, we have ……</p>
<p>最后特意感谢一下这个审稿人的意见：<br />
Specialthanks to you for your good comments. </p>
<p>Reviewer #2:</p>
<p>同上述</p>
<p>Reviewer#3:<br />
××××××<br />
Other changes:<br />
1. Line 60-61, the statements of “……”were corrected as “…………”<br />
2.Line 107, “……” was added <br />
3. Line 129,“……” was deleted<br />
××××××</p>
<p>Wetried our best to improve the manuscript and made some changes in
themanuscript. These changes will not influence the content andframework
of the paper. And here we did not list the changes butmarked in red in
revised paper.</p>
<p>We appreciate forEditors/Reviewers’ warm work earnestly, and hope
that thecorrection will meet with approval.</p>
<p>Once again, thank you verymuch for your comments and suggestions.</p>
<h2
id="文章接收后感谢信根据需要感谢负责文章的编辑或主编">5.文章接收后感谢信（根据需要感谢负责文章的编辑或主编）</h2>
<p>DearProf. ××××××:</p>
<p>Thanks very muchfor your kind work and consideration on publication
of our paper. Onbehalf of my co-authors, we would like to express our
greatappreciation to editor and reviewers.</p>
<p>Thank you and bestregards.</p>
<p>Yours sincerely,<br />
××××××<br />
Correspondingauthor:<br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2 id="询问校稿信件">6.询问校稿信件</h2>
<p>Dear×××:</p>
<p>Sorry for disturbing you. I am not sure ifit is the right time to
contact you to inquire about the status ofour accepted manuscript titled
“Paper Title” (ID: 文章稿号),since the copyright agreement for
publication has been sent to youtwo months ago. I am just wondering that
how long I can receive theproof of our manuscript from you?<br />
I would be greatly appreciatedif you could spend some of your time for a
reply. I am very pleasedto hear from you.</p>
<p>Thank you very much for yourconsideration.</p>
<p>Yours sincerely,<br />
××××××<br />
Correspondingauthor:<br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2 id="文章校稿信件">7.文章校稿信件</h2>
<p>DearMr. ×××:</p>
<p>Thanks very much for your kind letterabout the proof of our paper
titled “Paper Title” (ID:文章稿号)for publication in “Journal Name”. We
have finished theproof reading and checking carefully, and some
corrections about theproof and the answers to the queries are provided
below.</p>
<p>Corrections:<br />
1. In ****** should be **** (Page ***, Rightcolumn, line***)<br />
2. In **** the “*****” should be“****” (Page ****, Right column,
line****)</p>
<p>Answers for“author queries”:<br />
1. *********************.<br />
2.**********************<br />
3. **********************</p>
<p>We greatlyappreciate the efficient, professional and rapid processing
of ourpaper by your team. If there is anything else we should do, please
donot hesitate to let us know.</p>
<p>Thank you and best regards.<br />
Yourssincerely,<br />
××××××<br />
Correspondingauthor:<br />
Name: ×××<br />
E-mail: ××××@××××</p>
<h2 id="引用">引用</h2>
<p>全文引用自：<a
target="_blank" rel="noopener" href="https://blog.csdn.net/Angelina_Jolie/article/details/131838025">SCI投稿7个阶段的邮件模板</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/27/Linux%E5%AE%89%E8%A3%85%E8%8F%9C%E5%8D%95%E5%90%AF%E5%8A%A8%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/27/Linux%E5%AE%89%E8%A3%85%E8%8F%9C%E5%8D%95%E5%90%AF%E5%8A%A8%E5%99%A8/" class="post-title-link" itemprop="url">Linux安装菜单启动器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-27 20:01:31" itemprop="dateCreated datePublished" datetime="2024-11-27T20:01:31+08:00">2024-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在使用 Linux
办公的过程中不可避免的要手动安装一些自定义的软件，或者在仓库中无法找到的软件。此时在菜单中安装一个程序启动器就显得尤为必要，在此之前制作<code>.desktop</code>文件,
请参考文章：<a
href="/2024/11/14/Linux桌面创建启动器">Linux桌面创建启动器</a></p>
<h1 id="安装程序图标">安装程序图标</h1>
<p>如果你已经获得了对应程序的<code>icons</code>,
那么相当于获得了一个含有图标的目录： <figure class="highlight sh"><figcaption><span>ls ./icons/hicolor</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">16x16     48x48       192x192@2</span><br><span class="line">16x16@2   48x48@2     256x256</span><br><span class="line">20x20     64x64       256x256@2</span><br><span class="line">22x22     64x64@2     384x384</span><br><span class="line">22x22@2   72x72       512x512</span><br><span class="line">24x24     72x72@2     512x512@2</span><br><span class="line">24x24@2   96x96       icon-theme.cache</span><br><span class="line">32x32     96x96@2     index.theme</span><br><span class="line">32x32@2   128x128     scalable</span><br><span class="line">36x36     128x128@2   symbolic</span><br><span class="line">36x36@2   192x192</span><br></pre></td></tr></table></figure></p>
<p>此时需要递归的把各目录中的图标复制到系统的相应图标目录中，只需要<code>cp</code>命令添加<code>-r</code>选项,
即 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r ./icons  /usr/share/icons/</span><br><span class="line"><span class="built_in">sudo</span> gtk-update-icon-cache /usr/share/icons/hicolor</span><br><span class="line"><span class="built_in">sudo</span> update-mime-datebase -V /usr/share/mime</span><br></pre></td></tr></table></figure></p>
<div class="note primary"><p>其中<code>hicolor</code>是当前的主题，不同的机器使用不同的主题。</p>
</div>
<h1 id="安装-.desktop-文件">安装 .desktop 文件</h1>
<h2 id="命令安装">命令安装</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdg-desktop-menu install path/to/file.desktop</span><br></pre></td></tr></table></figure>
<h2 id="手动安装">手动安装</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> path/to/file.desktop /usr/share/applications/file.desktop</span><br><span class="line"><span class="built_in">sudo</span> xdg-desktop-menu forceupdate</span><br></pre></td></tr></table></figure>
<h1 id="例子-安装-zlibrary">例子: 安装 Zlibrary</h1>
<ul>
<li>下载<a
target="_blank" rel="noopener" href="https://s3proxy.cdn-zlib.sk/te_public_files/soft/linux/zlibrary-setup-latest.gz">Zlibrary
For any linux</a></li>
<li>解压后安装到<code>/opt/Z-Library</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unar zlibrary-setup-latest.gz </span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r zlibrary-setup-latest  /opt/Z-Library</span><br></pre></td></tr></table></figure></li>
<li>下载<a
target="_blank" rel="noopener" href="https://s3proxy.cdn-zlib.sk/te_public_files/soft/linux/zlibrary-setup-latest.deb">Zlibrary
For debian/ubuntu</a>, 以获取<code>icons</code>和<code>.desktop</code>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">unar zlibrary-setup-latest.deb</span><br><span class="line"><span class="built_in">cd</span> zlibrary-setup-latest</span><br><span class="line">unar data.tar.xz</span><br><span class="line"><span class="built_in">cd</span> data/usr/share/icons</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> ./usr/share/icons/hicolor /usr/share/icons/hicolor</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> ./usr/share/applications/z-library.desktop /usr/share/applications/z-library.desktop</span><br><span class="line"><span class="built_in">sudo</span> gtk-update-icon-cache /usr/share/icons/hicolor</span><br><span class="line"><span class="built_in">sudo</span> xdg-desktop-menu forceupdate</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/quantum7/article/details/101014538">LINUX更改图标后生效</a></li>
<li><a
target="_blank" rel="noopener" href="https://dev59.com/unix/CY5aRYkBhS1WtX2rSZPX">为什么我的application.desktop文件在Linux应用菜单中没有显示出来？</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.deepin.org/zh/03_技术规范/02_XDG规范/XDG桌面菜单项">XDG桌面菜单项</a></li>
<li><a
target="_blank" rel="noopener" href="https://portland.freedesktop.org/doc/xdg-desktop-menu.html">https://portland.freedesktop.org/doc/xdg-desktop-menu.html</a></li>
<li><a
target="_blank" rel="noopener" href="https://commandmasters.com/commands/xdg-desktop-menu-linux/">How
to use the command xdg-desktop-menu (with examples)</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/20/%E9%BB%8E%E6%9B%BC%E6%9B%B2%E7%8E%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/20/%E9%BB%8E%E6%9B%BC%E6%9B%B2%E7%8E%87/" class="post-title-link" itemprop="url">黎曼曲率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-20 10:21:27" itemprop="dateCreated datePublished" datetime="2024-11-20T10:21:27+08:00">2024-11-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>现在我们来关注黎曼曲率。总的来说，黎曼曲率提供了一种方案，让身处空间内部的人也能计算自身所处空间的弯曲程度。俗话说，“不识庐山真面目，只缘身在此山中”，还有“当局者迷，旁观者清”，等等，因此，能够身处空间之中而发现空间中的弯曲与否，是一件很了不起的事情，就好像我们已经超越了我们现有的空间，到了更高维的空间去“居高临下”那样。真可谓“心有多远，路就有多远，世界就有多远”。</p>
<p>如果站在更高维空间的角度看，就容易发现空间的弯曲。比如弯曲空间中有一条测地线，从更高维的空间看，它就是一条曲线，可以计算曲率等，但是在原来的空间看，它就是直的，测地线就是直线概念的一般化，因此不可能通过这种途径发现空间的弯曲性，必须有一些迂回的途径。可能一下子不容易想到，但是各种途径都殊途同归后，就感觉它是显然的了。</p>
<p>怎么更好地导出黎曼曲率来，使得它能够明显地反映出弯曲空间跟平直空间的本质区别呢？为此笔者思考了很长时间，看了不少参考书（《引力与时空》、《场论》、《引力论》等），比较了几种导出黎曼曲率的方式，简要叙述如下.</p>
<h1 id="求导顺序不能乱">求导顺序不能乱</h1>
<p>一般的张量分析或者黎曼几何教材中，导出黎曼曲率的方式是考虑二阶协变导数顺序的差别：
<span class="math display">\[\begin{equation}\label{eq:reimann0}
A^\mu_{;\alpha;\beta}-A^\mu_{;\beta;\alpha}=-R^\mu_{\nu\alpha\beta}A^\nu
\end{equation}\]</span></p>
<p>由此可以分离出黎曼曲率张量<span
class="math inline">\(R^\mu_{\nu\alpha\beta}\)</span>来，这确实是一种爽快的途径，但它的几何意义并不明显，很难看出它是怎么反映空间是曲还是直的。而且我们现在还没有定义二阶协变导数（一次协变导数后有两个指标，即相当于一个矩阵而不是向量了，定义高阶协变导数需要细节上的跟进），而这个定义基本上是纯粹代数演算，目前对我们来说意义不大，因此我们这里不作定义，读者直接参考教材即可，所以我们也不对这种方案多作讨论。</p>
<h1 id="在弯曲空间邂逅">在弯曲空间邂逅</h1>
<p>此外，还有通过测地线偏离（在广义相对论中对应于潮汐力）来导出黎曼曲率的，那也算是一种几何意义和物理意义都很明确的方案，但是涉及到的计算比较繁琐。主要思路是：考虑测地线方程
<span class="math display">\[\begin{equation}\label{eq:cedixian0}
\frac{d^2x^\mu}{ds^2}+\Gamma^\mu_{\alpha\beta}(x)\frac{dx^\alpha}{ds}\frac{dx^\beta}{ds}=0
\end{equation}\]</span> 假设有另一条测地线<span
class="math inline">\(x(s)+\delta{x}(s)\)</span>, 那么定满足方程 <span
class="math display">\[\begin{equation}\label{eq:cedixian1}
\frac{d^2(x^\mu+\delta{x^\mu})}{ds^2}+\Gamma^\mu_{\alpha\beta}(x+\delta{x})\frac{d(x^\alpha+\delta{x^\alpha})}{ds}\frac{d(x^\beta+\delta{x^\beta})}{ds}=0
\end{equation}\]</span> 假设<span
class="math inline">\(\delta{x}\)</span>和<span
class="math inline">\(d\delta{x}/ds\)</span>都是无穷小量，两式作差，得到
<span class="math display">\[\begin{equation}\label{eq:cedixian2}
\frac{d^2\delta{x^\mu}}{ds^2}+\frac{\partial\Gamma^\mu_{\alpha\beta}}{\partial{x^\nu}}\delta{x^\nu}\frac{dx^\alpha}{ds}\frac{x^\beta}{ds}+2\Gamma^\mu_{\alpha\beta}\frac{d\delta{x^\alpha}}{ds}\frac{dx^\beta}{ds}=0
\end{equation}\]</span> 其中<span
class="math inline">\(\delta{x}\)</span>就被称为测地线偏离,在黎曼几何中，称之为“雅可比向量场”。上述形式已经足够简单，然而，我们倾向于写成协变导数的形式，因为协变导数才是在弯曲空间中合理的导数，前面我们已经定义了沿测地线的导数<span
class="math inline">\(\frac{DA^\mu}{Ds}\)</span>,
重复一次，我们就能够得到沿测地线的二阶导数<span
class="math inline">\(\frac{D^2A^\mu}{Ds^2}=\frac{D}{Ds}\left(\frac{DA^\mu}{Ds}\right)\)</span>,
这是容易办到的，但因为我们这里不是特别关心这种方案，因此就不写出<span
class="math inline">\(\frac{D^2A^\mu}{Ds^2}\)</span>的具体形式了，读者可以自己推导。经过计算后，就会发现
<span class="math display">\[\begin{equation}\label{eq:cedixian3}
\frac{D^2\delta{x^\mu}}{Ds^2}=-R^\mu_{\nu\alpha\beta}\delta{x^\alpha}\frac{dx^\nu}{ds}\frac{dx^\beta}{ds}
\end{equation}\]</span> 这就出现了曲率张量<span
class="math inline">\(R^\mu_{\nu\alpha\beta}\)</span>。从数学来看，非零的<span
class="math inline">\(R^\mu_{\nu\alpha\beta}\)</span>实际上表明了测地线分布的不均匀，这就是弯曲空间的体现之一。</p>
<div class="note primary"><p>这种方案让笔者想起了几米的漫画作品《向左走·向右走》，说的是男女主角一个习惯向左走，一个习惯向右走，于是他们两个看起来永远不会相遇。但有一天他们在圆形喷水池相遇了——在圆的一端背向行走，最终在圆的另一端相遇了。而在弯曲空间中，比如在球面上，即便两条平行线也有相交的机会。这其实表明，“弯曲”其实更为深刻和有趣，它给予了我们世界更多的可能性。</p>
</div>
<h1 id="溜达回来的变化">"溜达"回来的变化</h1>
<p>最后还有一种分析向量沿着闭合曲线平移后的变化的方案，我们在这里详细分析它。事实上它跟测地线偏离是等价的，只是它的几何意义更加明显，有助于导出更为深刻的结果。它表明，如果一个向量“溜达”一圈回来之后，它就不一定是原来的向量了。下图的例子就清晰表明了这一点。
<img src="https://spaces.ac.cn/usr/uploads/2016/10/3490364498.gif"
alt="溜达回来的变化" /></p>
<p>假设<span class="math inline">\(x^\mu\)</span>处有任意一个向量<span
class="math inline">\(A_\mu\)</span>，从<span
class="math inline">\(x^\mu\)</span>出发，先平移无穷小量<span
class="math inline">\(dx^\mu\)</span>，再平移无穷小量<span
class="math inline">\(\delta{x^\mu}\)</span>，然后再平移无穷小量<span
class="math inline">\(−dx^\mu\)</span>，最后平移无穷小量<span
class="math inline">\(-\delta{x^\mu}\)</span>，也就是沿着一个无穷小的平行四边形走了一圈，回到原点：
<span class="math display">\[\begin{equation}\label{eq:cedixian4}
x^\mu\to x^\mu+dx^\mu \to x^\mu+dx^\mu+\delta{x^\mu} \to
x^\mu+\delta{x^\mu} \to x^\mu
\end{equation}\]</span></p>
<p>我们逐步计算平移过程中<span
class="math inline">\(A^\mu\)</span>的变化，从<span
class="math inline">\(x^\mu\)</span>到<span
class="math inline">\(x^\mu+dx^\mu\)</span>，<span
class="math inline">\(A_\mu\)</span>变为 <span
class="math display">\[\begin{equation}\label{eq:cedixian5}
A^\mu-\Gamma^\mu_{\alpha\beta}(x)A^\alpha dx^\beta
\end{equation}\]</span> 接着从<span
class="math inline">\(x^\mu+dx^\mu\)</span>到<span
class="math inline">\(x^\mu+dx^\mu+\delta{x^\mu}\)</span>, <span
class="math inline">\(A^\mu\)</span>变为 <span
class="math display">\[\begin{align}\label{eq:cedixian6}
A^\mu&amp;-\Gamma^\mu_{\alpha\beta}(x)A^\alpha
dx^\beta-\Gamma^\mu_{\nu\gamma}(x+dx)\left[A^\nu-\Gamma^\nu_{\alpha\beta}(x)A^\alpha
dx^\beta\right]\delta{x^\gamma} \notag \\
&amp;=A^\mu-\Gamma^\mu_{\alpha\beta}(x)A^\alpha
dx^\beta-\Gamma^\mu_{\nu\gamma}(x)A^\nu\delta{x^\gamma}-\frac{\partial\Gamma^\mu_{\nu\gamma}(x)}{\partial
x^\beta}A^\nu d{x^\beta}\delta{x^\gamma} \notag \\
&amp;\quad +\Gamma^\mu_{\nu\gamma}(x)\Gamma^\nu_{\alpha\beta}(x)A^\alpha
dx^\beta \delta{x^\gamma}
\end{align}\]</span> 这里我们只精确到二阶项。类似地，如果考虑路径<span
class="math inline">\(x^\mu\to x^\mu+\delta{x^\mu}\to
x^\mu+dx^\mu+\delta{x^\mu}\)</span>所带来的变化，则只需要将<span
class="math inline">\(dx\)</span>和<span
class="math inline">\(\delta{x}\)</span>交换 <span
class="math display">\[\begin{equation}\label{eq:cedixian7}
A^\mu-\Gamma^\mu_{\alpha\beta}(x)A^\alpha
\delta{x^\beta}-\Gamma^\mu_{\nu\gamma}(x)A^\nu d{x^\gamma}
-\frac{\partial\Gamma^\mu_{\nu\gamma}(x)}{\partial x^\beta}A^\nu
\delta{x^\beta}d{x^\gamma}+\Gamma^\mu_{\nu\gamma}(x)\Gamma^\nu_{\alpha\beta}(x)A^\alpha
\delta{x^\beta} d{x^\gamma}
\end{equation}\]</span> 那么很自然地，路径<span
class="math inline">\(x^\mu+dx^\mu +\delta{x^\mu}\to x^\mu+\delta{x^\mu}
\to x^\mu\)</span>所造成的变化就是上式的相反数。于是，整条闭合路径<span
class="math inline">\(x^\mu \to x^\mu+dx^\mu \to
x^\mu+dx^\mu+\delta{x^\mu} \to x^\mu+\delta{x^\mu}\to
x^\mu\)</span>所带来的变化就是两式这差。调整一下求和指标，然后作差，不难得到
<span class="math display">\[\begin{align}\label{eq:cedixian8}
\Delta{A^\mu}&amp;=-\left(\frac{\partial\Gamma^\mu_{\alpha\gamma}}{\partial
x^\beta}-\frac{\partial \Gamma^\mu_{\alpha\beta}}{\partial
x^\gamma}+\Gamma^\mu_{\nu\beta}\Gamma^\nu_{\alpha\gamma}-\Gamma^\mu_{\nu\gamma}\Gamma^\nu_{\alpha\beta}\right)A^\alpha
dx^\beta\delta{x^\gamma} \notag \\
&amp;=-R^\mu_{\alpha\beta\gamma}A^\alpha dx^\beta\delta{x^\gamma}
\end{align}\]</span> 这里 <span
class="math display">\[\begin{equation}\label{eq:cedixian9}
R^\mu_{\alpha\beta\gamma}=\frac{\partial\Gamma^\mu_{\alpha\gamma}}{\partial
x^\beta}-\frac{\partial \Gamma^\mu_{\alpha\beta}}{\partial
x^\gamma}+\Gamma^\mu_{\nu\beta}\Gamma^\nu_{\alpha\gamma}-\Gamma^\mu_{\nu\gamma}\Gamma^\nu_{\alpha\beta}
\end{equation}\]</span>
就是黎曼曲率张量的定义式了，它有4个指标，是一个非常“宏伟”的量。</p>
<h1 id="一句话来说">一句话来说</h1>
<p>三种不同的黎曼曲率张量的导出方式，分别从三个角度表明了弯曲空间与平直空间的区别：平直空间中，协变导数的次序是可以交换的，弯曲空间则不是；平直空间中，测地线分布的均匀的、线性的，弯曲空间则不是；平直空间中，一个向量去“溜达”一圈回来之后，并没有变化，而弯曲空间中，向量去“溜达”完之后，可能就不是原来的向量了。</p>
<p><label style="color:red">转载声明:本文除格式上略作调整外，全文转自</label>
<a
target="_blank" rel="noopener" href="https://spaces.ac.cn/archives/4014">https://spaces.ac.cn/archives/4014</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/11/16/Linux%E4%B8%8BLogitech%E8%AE%BE%E5%A4%87%E7%9A%84%E7%BB%88%E6%9E%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Solaar/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2024/11/16/Linux%E4%B8%8BLogitech%E8%AE%BE%E5%A4%87%E7%9A%84%E7%BB%88%E6%9E%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7Solaar/" class="post-title-link" itemprop="url">Linux下Logitech设备的终极管理工具Solaar</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-11-16 20:24:49" itemprop="dateCreated datePublished" datetime="2024-11-16T20:24:49+08:00">2024-11-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由于最近入手了一款Logitech的无线机械键盘k865,
在Archlinux下使用非常好，所幸使用<code>pacman</code>和<code>paru</code>查询了一下关于Logitech在Archlinux下相关的软件，然后就发现了这款Archlinux官方仓库中的软件<code>solaar</code>.</p>
<h1 id="简介">简介</h1>
<p>Solaar 是一款专为 Linux 系统设计的 Logitech 设备管理工具，支持多种
Logitech 键盘、鼠标及其他无线设备。无论是通过 Unifying、Bolt、Lightspeed
或 Nano 接收器连接的设备，还是通过 USB 线缆或蓝牙连接的设备，Solaar
都能轻松管理。Solaar 并非设备驱动程序，而是通过响应 Linux
输入系统忽略的特殊消息来实现其功能。</p>
<h1 id="使用场景">使用场景</h1>
<ol type="1">
<li><strong>多设备管理</strong>：对于拥有多款 Logitech
设备的用户，Solaar
提供了一个集中管理平台，方便用户统一管理所有设备。</li>
<li><strong>设备配置</strong>：用户可以通过 Solaar
轻松配置设备的各项设置，如按键映射、灵敏度调整等。</li>
<li><strong>自动化规则</strong>：Solaar
支持根据设备消息自动运行预设规则，适用于需要自动化操作的场景。</li>
<li><strong>设备维护</strong>：Solaar
可以帮助用户快速诊断和解决设备连接问题，提升设备使用体验。</li>
</ol>
<h1 id="项目特点">项目特点</h1>
<ul>
<li><strong>多设备支持</strong>：Solaar 支持多种 Logitech
设备，无论是无线还是有线设备，都能轻松管理。</li>
<li><strong>灵活配置</strong>：用户可以根据个人需求自定义设备设置，满足不同使用场景的需求。</li>
<li><strong>自动化规则</strong>：通过设置自动化规则，Solaar
能够根据设备状态自动执行特定操作，提升工作效率。</li>
<li><strong>跨平台兼容</strong>：Solaar 完全兼容 Linux 系统，适用于各种
Linux 发行版。</li>
<li><strong>开源免费</strong>：Solaar
是一款开源软件，用户可以免费使用并参与项目开发。</li>
</ul>
<h1 id="archlinux-下安装和使用">Archlinux 下安装和使用</h1>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S solaar</span><br><span class="line"><span class="built_in">sudo</span> solaar</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>虽然<code>solaar</code>建立了启动器图标，但是默认并没有<code>root</code>权限，在使用的时候请在命令行中使用<code>sudo solaar</code>命令打开软件，这样才能看到电脑连接的
Logitech 设备，并设置。</p>
</div>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a
target="_blank" rel="noopener" href="https://github.com/pwr-Solaar/Solaar">https://github.com/pwr-Solaar/Solaar</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/gitblog_00402/article/details/142239279">Solaar：Linux
下 Logitech 设备的终极管理工具</a></li>
<li><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/ar6zn29x/">Solaar —-
不一般的罗技接收器linux应用</a></li>
<li><a target="_blank" rel="noopener" href="https://cn.linux-console.net/?p=12375">如何在 Linux 上管理
Logitech Unifying 接收器和设备</a></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/12/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><span class="page-number current">13</span><a class="page-number" href="/page/14/">14</a><span class="space">&hellip;</span><a class="page-number" href="/page/56/">56</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/14/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; Sat Sep 03 2022 08:00:00 GMT+0800 (中国标准时间) – 
    <span itemprop="copyrightYear">2026</span>
    <span class="with-love">
      <i class="fa-solid fa-star"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">fengzhenhua</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/fungzhenhua" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://s4.zstatic.net/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://s4.zstatic.net/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://s4.zstatic.net/ajax/libs/pdfobject/2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://s4.zstatic.net/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://s4.zstatic.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
