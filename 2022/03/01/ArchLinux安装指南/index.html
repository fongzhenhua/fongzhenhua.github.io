<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#9400D3"><meta name="generator" content="Hexo 5.4.2">
<link rel="preconnect" href="https://s4.zstatic.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#9400D3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#9400D3","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>



<link rel="canonical" href="http://example.com/2022/03/01/ArchLinux%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2022/03/01/ArchLinux%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/","path":"2022/03/01/ArchLinux安装指南/","title":"ArchLinux安装指南"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ArchLinux安装指南 | BNU-FZH</title>
  







<script async src="/lib/fireworks.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">BNU-FZH</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">fengzhenhua@outlook.com</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-导航"><a href="/%E5%AF%BC%E8%88%AA/" rel="section"><i class="fa fa-paper-plane fa-fw"></i>导航</a></li><li class="menu-item menu-item-软件"><a href="/%E8%BD%AF%E4%BB%B6/" rel="section"><i class="fa fa-briefcase fa-fw"></i>软件</a></li><li class="menu-item menu-item-收藏"><a href="/%E6%94%B6%E8%97%8F/" rel="section"><i class="fa fa-folder fa-fw"></i>收藏</a></li><li class="menu-item menu-item-工作"><a href="/%E5%B7%A5%E4%BD%9C/" rel="section"><i class="fa fa-folder fa-fw"></i>工作</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#linux%E7%89%88%E6%9C%AC%E9%80%89%E6%8B%A9"><span class="nav-number">1.</span> <span class="nav-text">Linux版本选择</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%80%E4%BD%8E%E7%A1%AC%E4%BB%B6%E8%A6%81%E6%B1%82"><span class="nav-number">2.</span> <span class="nav-text">最低硬件要求</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%E5%90%AF%E5%8A%A8%E7%9B%98"><span class="nav-number">3.</span> <span class="nav-text">制作启动盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEu%E7%9B%98%E5%90%AF%E5%8A%A8"><span class="nav-number">4.</span> <span class="nav-text">设置U盘启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wifi%E8%81%94%E7%BD%91"><span class="nav-number">5.</span> <span class="nav-text">WiFi联网</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-number">6.</span> <span class="nav-text">硬盘分区</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%8C%BA%E6%96%B9%E6%A1%88"><span class="nav-number">6.1.</span> <span class="nav-text">分区方案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#windows10-%E8%B0%83%E6%95%B4efi%E5%88%86%E5%8C%BA%E5%A4%A7%E5%B0%8F"><span class="nav-number">6.2.</span> <span class="nav-text">windows10 调整efi分区大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%92%8C%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA"><span class="nav-number">6.3.</span> <span class="nav-text">格式化和挂载分区</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%A1%AC%E7%9B%98"><span class="nav-number">7.</span> <span class="nav-text">扩展硬盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8D%A2%E5%9B%BD%E5%86%85%E6%BA%90"><span class="nav-number">8.</span> <span class="nav-text">换国内源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80%E7%B3%BB%E7%BB%9F"><span class="nav-number">9.</span> <span class="nav-text">安装基础系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%B3%BB%E7%BB%9F"><span class="nav-number">10.</span> <span class="nav-text">设置系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E5%88%B0%E5%AE%89%E8%A3%85%E5%9C%A8%E7%A1%AC%E7%9B%98%E4%B8%AD%E7%9A%84%E7%B3%BB%E7%BB%9F"><span class="nav-number">10.1.</span> <span class="nav-text">切换到安装在硬盘中的系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%BF%85%E8%A6%81%E8%BD%AF%E4%BB%B6"><span class="nav-number">10.2.</span> <span class="nav-text">安装必要软件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E7%BD%91%E7%BB%9C"><span class="nav-number">10.3.</span> <span class="nav-text">启用网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEroot%E5%AF%86%E7%A0%81"><span class="nav-number">10.4.</span> <span class="nav-text">设置root密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E7%94%A8%E6%88%B7"><span class="nav-number">10.5.</span> <span class="nav-text">新增用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5sudo"><span class="nav-number">10.6.</span> <span class="nav-text">加入sudo</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85grub%E5%BC%95%E5%AF%BC"><span class="nav-number">10.7.</span> <span class="nav-text">安装grub引导</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%BC%95%E5%AF%BC"><span class="nav-number">10.8.</span> <span class="nav-text">安装引导</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80"><span class="nav-number">10.9.</span> <span class="nav-text">设置语言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA"><span class="nav-number">10.10.</span> <span class="nav-text">设置时区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%A1%AC%E4%BB%B6%E6%97%B6%E9%97%B4"><span class="nav-number">10.11.</span> <span class="nav-text">设置硬件时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83"><span class="nav-number">10.12.</span> <span class="nav-text">安装桌面环境</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85nvidia%E6%98%BE%E5%8D%A1"><span class="nav-number">11.</span> <span class="nav-text">安装Nvidia显卡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E8%BD%AF%E4%BB%B6"><span class="nav-number">12.</span> <span class="nav-text">安装电源管理软件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#endeavour%E7%9A%84%E9%BB%98%E8%AE%A4%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-number">12.1.</span> <span class="nav-text">Endeavour的默认电源管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7tlp"><span class="nav-number">12.2.</span> <span class="nav-text">高级电源管理工具TLP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%93%9D%E7%89%99%E6%9C%8D%E5%8A%A1"><span class="nav-number">13.</span> <span class="nav-text">安装蓝牙服务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85fwupd%E5%8D%87%E7%BA%A7%E7%B3%BB%E7%BB%9F%E5%9B%BA%E4%BB%B6%E5%8D%B1%E9%99%A9%E6%93%8D%E4%BD%9C"><span class="nav-number">14.</span> <span class="nav-text">安装fwupd升级系统固件(危险操作)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E6%8D%A2%E6%A0%B9%E5%B9%B6%E9%87%8D%E5%90%AF"><span class="nav-number">14.1.</span> <span class="nav-text">退出换根并重启</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E8%AE%BE%E7%BD%AE"><span class="nav-number">15.</span> <span class="nav-text">基础设置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E9%AB%98%E9%80%9Fdns"><span class="nav-number">15.1.</span> <span class="nav-text">配置高速DNS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90"><span class="nav-number">15.2.</span> <span class="nav-text">配置国内镜像源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%9B%BD%E5%86%85cn%E6%BA%90"><span class="nav-number">15.3.</span> <span class="nav-text">配置国内CN源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEarch4edu%E6%BA%90"><span class="nav-number">15.4.</span> <span class="nav-text">配置arch4edu源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93"><span class="nav-number">15.5.</span> <span class="nav-text">安装中文字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E7%B3%BB%E7%BB%9F%E4%B8%BA%E4%B8%AD%E6%96%87"><span class="nav-number">15.6.</span> <span class="nav-text">设置系统为中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AEgit%E4%B8%BAgithub.com%E9%95%9C%E5%83%8F"><span class="nav-number">15.7.</span> <span class="nav-text">全局配置git为github.com镜像</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85paru%E6%88%96yay"><span class="nav-number">15.8.</span> <span class="nav-text">安装paru或yay</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85paru%E6%88%96yay-%E6%9C%80%E6%96%B0%E7%9A%84paru%E8%A1%A8%E7%8E%B0%E6%9B%B4%E5%A5%BD%E5%BB%BA%E8%AE%AE%E5%AE%89%E8%A3%85"><span class="nav-number">15.8.1.</span> <span class="nav-text">安装paru或yay,
最新的paru表现更好,建议安装。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEparu%E5%92%8Cyay%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8B%E8%BD%BD"><span class="nav-number">15.8.2.</span> <span class="nav-text">配置paru和yay多线程下载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#paru-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%88%B7%E9%85%8D%E7%BD%AE"><span class="nav-number">15.8.3.</span> <span class="nav-text">Paru 高级用户配置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83"><span class="nav-number">15.9.</span> <span class="nav-text">配置桌面环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6%E7%B4%A2%E5%BC%95"><span class="nav-number">15.10.</span> <span class="nav-text">关闭文件索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E7%9A%84efi%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="nav-number">15.11.</span> <span class="nav-text">删除多余的EFI启动项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E9%80%89%E9%A1%B9grub"><span class="nav-number">15.12.</span> <span class="nav-text">Linux修改启动选项grub</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linux%E4%B8%8Befibootmgr%E7%9A%84%E4%BD%BF%E7%94%A8%E5%88%A0%E9%99%A4uefi%E4%B8%BB%E6%9D%BF%E5%A4%9A%E4%BD%99%E7%9A%84%E5%90%AF%E5%8A%A8%E9%A1%B9"><span class="nav-number">15.13.</span> <span class="nav-text">Linux下EFIBOOTMGR的使用，删除UEFI主板多余的启动项</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3linux%E5%92%8Cwindows%E6%97%B6%E9%97%B4%E4%B8%8D%E4%B8%80%E8%87%B4%E9%97%AE%E9%A2%98"><span class="nav-number">16.</span> <span class="nav-text">解决Linux和Windows时间不一致问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="nav-number">16.1.</span> <span class="nav-text">解决办法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7%E4%BF%9D%E9%9A%9C"><span class="nav-number">17.</span> <span class="nav-text">系统的稳定性保障</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%A7%A3%E5%8E%8B%E7%BC%A9%E8%BD%AF%E4%BB%B6"><span class="nav-number">18.</span> <span class="nav-text">安装解压缩软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95fcitx5"><span class="nav-number">19.</span> <span class="nav-text">配置中文输入法Fcitx5</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85fcitx5%E7%BB%84%E4%BB%B6"><span class="nav-number">19.1.</span> <span class="nav-text">安装Fcitx5组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEfcitx5%E5%8F%98%E9%87%8F"><span class="nav-number">19.2.</span> <span class="nav-text">设置Fcitx5变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEvim%E5%92%8Cneovim"><span class="nav-number">20.</span> <span class="nav-text">配置vim和neovim</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#neovim%E5%81%A5%E5%BA%B7%E6%A3%80%E6%9F%A5"><span class="nav-number">21.</span> <span class="nav-text">Neovim健康检查</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#neovim%E4%BD%BF%E7%94%A8clipboard%E7%B2%98%E8%B4%B4%E6%9D%BF"><span class="nav-number">21.1.</span> <span class="nav-text">neovim使用clipboard粘贴板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-warning-neovimext-cpan-module-is-not-installed"><span class="nav-number">21.2.</span> <span class="nav-text">解决
WARNING &quot;Neovim::Ext&quot; cpan module is not installed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#perl-%E6%97%A0%E6%B3%95%E5%86%99%E5%85%A5%E5%88%B0%E6%96%87%E4%BB%B6%E5%A4%B9%E9%97%AE%E9%A2%98"><span class="nav-number">21.3.</span> <span class="nav-text">perl 无法写入到文件夹问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#javac%E5%91%BD%E4%BB%A4%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">21.4.</span> <span class="nav-text">javac命令找不到的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#python-pynvim-%E7%9A%84%E6%94%AF%E6%8C%81%E9%97%AE%E9%A2%98"><span class="nav-number">21.5.</span> <span class="nav-text">python-pynvim 的支持问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vim%E5%92%8Cneovim%E9%85%8D%E7%BD%AEfcitx5%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2"><span class="nav-number">22.</span> <span class="nav-text">vim和neovim配置fcitx5自动切换</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#fcitx5-archwiki"><span class="nav-number">22.1.</span> <span class="nav-text">Fcitx5-ArchWiki</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%88%91%E4%B9%8B%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%96%B9%E6%A1%88"><span class="nav-number">22.2.</span> <span class="nav-text">我之前使用的方案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%85%E5%A4%87%E5%B7%A5%E5%85%B7%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85"><span class="nav-number">23.</span> <span class="nav-text">必备工具一键安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85deb%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7debtap"><span class="nav-number">24.</span> <span class="nav-text">安装deb转换工具debtap</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEzsh"><span class="nav-number">25.</span> <span class="nav-text">安装配置zsh</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEtexlive"><span class="nav-number">26.</span> <span class="nav-text">安装配置TexLive</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85texmacs"><span class="nav-number">27.</span> <span class="nav-text">安装TeXmacs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85usb%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1%E9%A9%B1%E5%8A%A8"><span class="nav-number">28.</span> <span class="nav-text">安装USB无线网卡驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%BB%98%E5%9B%BE%E8%BD%AF%E4%BB%B6"><span class="nav-number">29.</span> <span class="nav-text">安装绘图软件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%88%AA%E5%9B%BE%E5%B7%A5%E5%85%B7"><span class="nav-number">30.</span> <span class="nav-text">安装截图工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%9B%BE%E5%83%8F%E6%9F%A5%E7%9C%8B%E5%99%A8"><span class="nav-number">31.</span> <span class="nav-text">安装图像查看器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%B5%8F%E8%A7%88%E5%99%A8firefox"><span class="nav-number">32.</span> <span class="nav-text">安装浏览器firefox</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E4%B8%8B%E8%BD%BD%E8%BD%AF%E4%BB%B6xtreme-download-manager"><span class="nav-number">33.</span> <span class="nav-text">安装下载软件Xtreme Download
Manager</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%AF%8D%E5%85%B8%E8%BD%AF%E4%BB%B6goldendict"><span class="nav-number">34.</span> <span class="nav-text">安装词典软件Goldendict</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%85%BE%E8%AE%AF%E4%BC%9A%E8%AE%AE%E5%92%8Cqq"><span class="nav-number">35.</span> <span class="nav-text">安装腾讯会议和QQ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8"><span class="nav-number">36.</span> <span class="nav-text">安装音乐播放器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%B0%8F%E7%99%BD%E7%BE%8A%E4%BA%91%E7%9B%98"><span class="nav-number">37.</span> <span class="nav-text">安装小白羊云盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8Ewindows%E4%B8%8Elinux%E7%9A%84%E5%8F%8C%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE"><span class="nav-number">38.</span> <span class="nav-text">关于Windows与Linux的双系统设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BD%AF%E4%BB%B6%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D"><span class="nav-number">39.</span> <span class="nav-text">软件故障修复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sddm%E5%90%AF%E5%8A%A8%E6%97%B6%E8%8B%B1%E6%96%87%E6%94%B9%E4%B8%AD%E6%96%87"><span class="nav-number">39.1.</span> <span class="nav-text">SDDM启动时英文改中文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#guake%E7%BB%88%E7%AB%AFf12%E5%A4%B1%E6%95%88"><span class="nav-number">39.2.</span> <span class="nav-text">Guake终端F12失效</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E5%99%A8dolphin%E6%8C%82%E8%BD%BD%E5%8F%8C%E7%B3%BB%E7%BB%9F%E7%9A%84windows11-ntfs%E5%88%86%E5%8C%BA%E5%A4%B1%E8%B4%A5"><span class="nav-number">39.3.</span> <span class="nav-text">文件管理器Dolphin挂载双系统的Windows11
NTFS分区失败</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#grub%E4%B8%A2%E5%A4%B1%E5%AF%BC%E8%87%B4%E7%B3%BB%E7%BB%9F%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8"><span class="nav-number">39.4.</span> <span class="nav-text">Grub丢失导致系统无法启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#thinkpad-t490-%E8%AF%86%E5%88%ABm2.-2248%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98"><span class="nav-number">39.5.</span> <span class="nav-text">ThinkPad-T490 识别M2.
2248固态硬盘</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8Dasus%E5%8D%8E%E7%A1%95%E4%B8%BB%E6%9D%BF%E5%9C%A8amd-cpu%E4%B8%8B%E7%9A%84%E5%90%AF%E5%8A%A8bug"><span class="nav-number">39.6.</span> <span class="nav-text">修复ASUS华硕主板在AMD
CPU下的启动BUG</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%B0%E5%BC%8F%E6%9C%BA%E6%8E%A5%E8%80%B3%E6%9C%BA%E6%97%B6%E6%9C%89%E5%97%92%E5%97%92%E5%A3%B0"><span class="nav-number">39.7.</span> <span class="nav-text">台式机接耳机时有嗒嗒声</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nautilus%E5%8D%A1%E6%AD%BB"><span class="nav-number">39.8.</span> <span class="nav-text">Nautilus卡死</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%93%9D%E7%89%99%E6%97%A0%E6%B3%95%E6%89%93%E5%BC%80"><span class="nav-number">39.9.</span> <span class="nav-text">蓝牙无法打开</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%B8%E8%BD%BD%E5%B9%B6%E9%87%8D%E6%96%B0%E5%8A%A0%E8%BD%BDbtusb%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E6%94%AF%E6%8C%81%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E7%9A%84%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97"><span class="nav-number">39.9.1.</span> <span class="nav-text">1.
卸载并重新加载btusb内核模块（支持蓝牙设备的内核模块）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E8%93%9D%E7%89%99%E5%B7%A5%E5%85%B7%E5%92%8C%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="nav-number">39.9.2.</span> <span class="nav-text">2. 安装蓝牙工具和工具包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E8%93%9D%E7%89%99%E6%9C%8D%E5%8A%A1"><span class="nav-number">39.9.3.</span> <span class="nav-text">3. 启动蓝牙服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E8%A7%A3%E9%99%A4%E8%93%9D%E7%89%99%E8%AE%BE%E5%A4%87%E7%9A%84%E9%98%BB%E6%AD%A2"><span class="nav-number">39.9.4.</span> <span class="nav-text">4. 重新解除蓝牙设备的阻止</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E6%95%85%E9%9A%9C%E4%BF%AE%E5%A4%8D"><span class="nav-number">40.</span> <span class="nav-text">硬件故障修复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%B5%E8%84%91%E5%BC%80%E6%9C%BA%E5%99%AA%E9%9F%B3%E5%8F%98%E5%A4%A7"><span class="nav-number">40.1.</span> <span class="nav-text">电脑开机噪音变大</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#g%E6%97%A0%E7%BA%BF%E9%94%AE%E7%9B%98%E5%BB%B6%E8%BF%9F"><span class="nav-number">40.2.</span> <span class="nav-text">2.4G无线键盘延迟</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%99%84%E5%BD%95windows%E7%BA%AF%E5%87%80%E7%89%88%E7%B3%BB%E7%BB%9F%E4%B8%8B%E8%BD%BD"><span class="nav-number">41.</span> <span class="nav-text">附录:Windows纯净版系统下载</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD"><span class="nav-number">41.1.</span> <span class="nav-text">直接下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E7%AB%99"><span class="nav-number">41.2.</span> <span class="nav-text">下载站</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="nav-number">42.</span> <span class="nav-text">参考文章</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#archlinux%E7%9B%B8%E5%85%B3"><span class="nav-number">43.</span> <span class="nav-text">ArchLinux相关</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">550</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://chat.deepseek.com/" title="深度求索 → https:&#x2F;&#x2F;chat.deepseek.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>深度求索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tongyi.com/" title="通义千问 → https:&#x2F;&#x2F;www.tongyi.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>通义千问</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.scnet.cn/ui/chatbot/" title="国家超算 → https:&#x2F;&#x2F;www.scnet.cn&#x2F;ui&#x2F;chatbot&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>国家超算</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yuanbao.tencent.com/chat" title="腾讯元宝 → https:&#x2F;&#x2F;yuanbao.tencent.com&#x2F;chat" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>腾讯元宝</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/" title="必应搜索 → https:&#x2F;&#x2F;cn.bing.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>必应搜索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.hao268.com/" title="网址之家 → https:&#x2F;&#x2F;www.hao268.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>网址之家</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ac.scmor.com/" title="思谋学术 → https:&#x2F;&#x2F;ac.scmor.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>思谋学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://search.essclick.com/" title="爱思学术 → https:&#x2F;&#x2F;search.essclick.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>爱思学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://scholar.lanfanshu.cn/" title="番薯学术 → https:&#x2F;&#x2F;scholar.lanfanshu.cn&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>番薯学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://xmsoushu.com/" title="熊猫搜书 → https:&#x2F;&#x2F;xmsoushu.com&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>熊猫搜书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/translator" title="必应翻译 → https:&#x2F;&#x2F;cn.bing.com&#x2F;translator" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>必应翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.baidu.com/#zh/en" title="百度翻译 → https:&#x2F;&#x2F;fanyi.baidu.com&#x2F;#zh&#x2F;en" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>百度翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.youdao.com/?keyfrom=fanyi.logo" title="有道翻译 → https:&#x2F;&#x2F;fanyi.youdao.com&#x2F;?keyfrom&#x3D;fanyi.logo" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>有道翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.oxfordlearnersdictionaries.com/definition/english/" title="牛津翻译 → https:&#x2F;&#x2F;www.oxfordlearnersdictionaries.com&#x2F;definition&#x2F;english&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>牛津翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://tools.liumingye.cn/music/#/" title="音乐下载 → http:&#x2F;&#x2F;tools.liumingye.cn&#x2F;music&#x2F;#&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-music fa-fw"></i>音乐下载</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://wx.qq.com/" title="网页微信 → https:&#x2F;&#x2F;wx.qq.com" rel="noopener me" target="_blank"><i class="fab fa-weixin fa-fw"></i>网页微信</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://login.partner.microsoftonline.cn/" title="微软办公 → https:&#x2F;&#x2F;login.partner.microsoftonline.cn" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软办公</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mathsolver.microsoft.com/" title="微软数学 → https:&#x2F;&#x2F;mathsolver.microsoft.com" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软数学</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.mail.bnu.edu.cn/" title="师大邮箱 → https:&#x2F;&#x2F;www.mail.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>师大邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mail.sina.com.cn/" title="新浪邮箱 → https:&#x2F;&#x2F;mail.sina.com.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>新浪邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://192.168.1.14/" title="实验信息 → http:&#x2F;&#x2F;192.168.1.14&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>实验信息</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.aliyundrive.com/sign/in" title="阿里云盘 → https:&#x2F;&#x2F;www.aliyundrive.com&#x2F;sign&#x2F;in" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>阿里云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yun.139.com/w/#/" title="移动云盘 → https:&#x2F;&#x2F;yun.139.com&#x2F;w&#x2F;#&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>移动云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianguoyun.com/d/login" title="坚果网盘 → https:&#x2F;&#x2F;www.jianguoyun.com&#x2F;d&#x2F;login" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>坚果网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://efss.qloud.my/index.php/login?clear=1" title="Next云盘 → https:&#x2F;&#x2F;efss.qloud.my&#x2F;index.php&#x2F;login?clear&#x3D;1" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>Next云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.123pan.com/" title="123 网盘 → https:&#x2F;&#x2F;www.123pan.com&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>123 网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://annas-archive.org/" title="安娜档案 → https:&#x2F;&#x2F;annas-archive.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>安娜档案</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://book.sciencereading.cn/" title="科学文库 → https:&#x2F;&#x2F;book.sciencereading.cn" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>科学文库</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ylibrary.org/" title="Ylibrary → https:&#x2F;&#x2F;ylibrary.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Ylibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tboxn.com/sites/320.html" title="Zlibrary → https:&#x2F;&#x2F;www.tboxn.com&#x2F;sites&#x2F;320.html" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Zlibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.koushare.com/" title="蔻享官网 → https:&#x2F;&#x2F;www.koushare.com" rel="noopener me" target="_blank"><i class="fas fa-globe-asia fa-fw"></i>蔻享官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.duolingo.cn/" title="多邻国官 → https:&#x2F;&#x2F;www.duolingo.cn" rel="noopener me" target="_blank"><i class="fas fa-school fa-fw"></i>多邻国官</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.bnu.edu.cn/" title="师大官网 → https:&#x2F;&#x2F;www.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>师大官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://one.bnu.edu.cn/" title="数字京师 → https:&#x2F;&#x2F;one.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>数字京师</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.runoob.com/font-awesome/fontawesome-icons-brand.html" title="图站图标 → https:&#x2F;&#x2F;www.runoob.com&#x2F;font-awesome&#x2F;fontawesome-icons-brand.html" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>图站图标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://shields.io/badges" title="项目微标 → https:&#x2F;&#x2F;shields.io&#x2F;badges" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>项目微标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jd.com/" title="京东购物 → https:&#x2F;&#x2F;www.jd.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>京东购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.taobao.com/" title="淘宝购物 → https:&#x2F;&#x2F;www.taobao.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>淘宝购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/" title="LaTeXLiv → https:&#x2F;&#x2F;www.latexlive.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXLiv</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/help" title="LaTeXHel → https:&#x2F;&#x2F;www.latexlive.com&#x2F;help" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXHel</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://p2t.breezedeus.com/" title="Pix2Text → https:&#x2F;&#x2F;p2t.breezedeus.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Pix2Text</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://simpletex.cn/" title="Simplete → https:&#x2F;&#x2F;simpletex.cn" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Simplete</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/01/ArchLinux%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="ArchLinux安装指南 | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ArchLinux安装指南
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-03-01 22:42:38" itemprop="dateCreated datePublished" datetime="2022-03-01T22:42:38+08:00">2022-03-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-30 08:46:12" itemprop="dateModified" datetime="2025-09-30T08:46:12+08:00">2025-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><div class="link-grid"><div class="link-grid-container">
<object class="link-grid-image" data="/Picture/endeavouroslogo.jpg"></object>
<p>Endeavour</p><p>Take control of your hardware.</p>
<a target="_blank" rel="noopener" href="https://endeavouros.com"></a>
</div><div class="link-grid-container">
<object class="link-grid-image" data="/Picture/archlogo.png"></object>
<p>ArchLinux</p><p>A simple, lightweight distribution.</p>
<a target="_blank" rel="noopener" href="https://archlinux.org/"></a>
</div></div>
<div class="note primary"><p><a
target="_blank" rel="noopener" href="https://archlinux.org/">ArchLinux</a>是一款灵活、强大、可定制的Linux发行版，提供丰富的软件包和工具，支持滚动更新和多种桌面环境，拥有庞大的社区支持和方便的包管理器，适合各种用户需求和使用场景。<a
target="_blank" rel="noopener" href="https://endeavouros.com">Endeavour</a>
是一个基于ArchLinux的轻量级和用户友好的发行版，预装了桌面环境和预配置的软件包，旨在提供一个无忧的ArchLinux体验。<img align="right" src="https://img.shields.io/badge/Version-V4.5.7-purple" /></p>
</div>
<span id="more"></span>
<h2 id="linux版本选择">Linux版本选择</h2>
<p><code>ArchLinux</code>的安装镜像是没有安装桌面环境的，只安装了一些必备的软件，它的安装需要在命令行中进行，如果您已经有一定的<code>Linux</code>基础，那建议您直接按照本教程安装<code>ArchLinux</code>。如果您是一名初学者，不熟悉<code>Linux</code>命令，只要您尝试过<code>Ubuntu</code>、<code>Debian</code>、<code>LinuxMint</code>、<code>LinuxDeepin</code>等发行版，那您完全可以选择<code>ArchLinux</code>的衍生版<a
target="_blank" rel="noopener" href="https://endeavouros.com">Endeavour</a>, Endeavour 让你有机会学习
Arch，而无需同时学习 EFI、驱动搜索和安装（看着你的
nVidia）、桌面环境/窗口管理器、显示管理器等。它可以一次性设置好所有东西，让你有时间按照自己的节奏学习
Arch Linux
的内部工作。由于图形化安装的简便性，本文不打算详述，直接参考<code>Endeavour</code>的官方文档(相当详细)：<a
target="_blank" rel="noopener" href="https://discovery.endeavouros.com/category/installation/">BTRFS
Installation</a> 和 <a
target="_blank" rel="noopener" href="https://discovery.endeavouros.com">Endeavour Wiki</a>。</p>
<details>
<summary>
<label style="color:blue">如何选择适合您的Linux ?</label>
</summary>
<p>刚刚入门的小白往往选择宣传的比较多的<code>Ubuntu</code>,但是我想告诉您，尝试一下其他发行版，您会找到更好的。下面的文章可以帮您做出选择：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-7532-1.html">你应该丢弃
Windows，选择 Linux 的五大理由</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Arch_compared_to_other_distributions">Arch
compared to other distributions</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.howtogeek.com/872962/arch-linux-vs-ubuntu/">Arch Linux
vs. Ubuntu: Which Should You Use?</a></li>
<li><a target="_blank" rel="noopener" href="https://itsfoss.com/ubuntu-vs-arch/">Ubuntu vs Arch: Which
Linux Distro is better?</a></li>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-14485-1.html">Ubuntu vs
Arch：孰优孰劣？</a></li>
<li><a
target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1526762">为什么我抛弃了
Ubuntu？</a></li>
<li><a
target="_blank" rel="noopener" href="https://juejin.cn/post/6844903970473771015">我为什么不喜欢Ubuntu？</a></li>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-13104-1.html">9 个易用的基于 Arch
的用户友好型 Linux 发行版</a></li>
<li><a target="_blank" rel="noopener" href="https://linux.cn/article-15600-1.html">5 个最好的 Arch
Linux 衍生发行版，适合所有人</a></li>
</ul>
<div class="note primary"><p>从运行速度的角度讲，执行<code>systemctl list-unit-files --state=enabled --no-pager</code>得到默认情况下运行的服务和守护进程的数量，Ubuntu
为90个，Manjaro 为24个， Endeavour 为 17个，而按我的教程配置好的
ArchLinux 仅11个，所以原生的<code>ArchLinux</code>才是最佳选择。</p>
</div>
</details>
<h2 id="最低硬件要求">最低硬件要求</h2>
<div class="tabs" id="硬件要求"><ul class="nav-tabs"><li class="tab active"><a href="#硬件要求-1">ArchLinux</a></li><li class="tab"><a href="#硬件要求-2">Endeavour</a></li></ul><div class="tab-content"><div class="tab-pane active" id="硬件要求-1"><p><code>ArchLinux</code>
对硬件需求并没有特别严格的要求，它可以在较老的硬件上运行，也可以在最新的硬件上运行。一般来说，以下是<code>ArchLinux</code>的最低系统要求：</p>
<ul>
<li><code>64位</code>处理器</li>
<li><code>512MB RAM</code>（建议<code>1GB</code>或更多）</li>
<li><code>800MB</code>可用磁盘空间</li>
<li>支持网络连接的网络适配器</li>
<li><code>Gnome</code>桌面环境：
<ul>
<li>双核<code>2 GHz</code>处理器或更高</li>
<li><code>4 GB</code>系统内存</li>
<li><code>25 GB</code>磁盘存储空间</li>
</ul></li>
</ul></div><div class="tab-pane" id="硬件要求-2"><ul>
<li><code>2.5GB</code> 系统内存</li>
<li>双核处理器(<code>64位</code>，<code>x86-64</code>,
<code>amd64</code>)</li>
<li><code>15G</code>磁盘存储空间</li>
<li>安装程序仍支持仅使用旧版 <code>BIOS</code> 的系统，但建议运行新式
<code>EFI(UEFI)</code> 系统，而不是在旧版 <code>(CSM)</code>
模式下。</li>
<li><code>Endeavour</code>默认安装<code>KDE</code>桌面环境</li>
</ul></div></div></div>
<hr />
<center>
<i class="fa fa-angle-double-down" style="font-size:48px;color:red"></i><font color="DarkViolet" size="8" >ArchLinux安装流程</font>
</center>
<hr />
<h2 id="制作启动盘">制作启动盘</h2>
<ul>
<li><p>下载ISO镜像:</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/archlinux/iso/latest/">ArchLinux(清华大学开源镜像站)</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/archlinux/iso/latest/">ArchLinux(中国科学技术大学开源镜像站)</a></td>
</tr>
<tr>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.bfsu.edu.cn/archlinux/iso/latest/">ArchLinux(北京外国语大学开源镜像站)</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="http://mirrors.cqu.edu.cn/archlinux/iso/latest/">ArchLinux(重庆大学开源镜像站)</a></td>
</tr>
<tr>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="http://mirrors.hit.edu.cn/archlinux/iso/latest/">ArchLinux(哈尔滨工业大学开源镜像站)</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.jlu.edu.cn/archlinux/iso/latest/">ArchLinux(吉林大学开源镜像站)</a></td>
</tr>
<tr>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.jlu.edu.cn/archlinux/iso/latest/">ArchLinux(兰州大学开源镜像站)</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://mirrors.aliyun.com/archlinux/iso/latest/">ArchLinux(阿里云开源镜像站)</a></td>
</tr>
<tr>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="http://mirrors.nju.edu.cn/archlinux/iso/latest/">ArchLinux(南京大学镜像站)</a></td>
<td style="text-align: left;"><a
target="_blank" rel="noopener" href="https://archlinux.org/download/">ArchLinux(官方下载列表)</a></td>
</tr>
</tbody>
</table></li>
<li><p>刻录启动U盘: <div class="tabs" id="刻录启动盘"><ul class="nav-tabs"><li class="tab active"><a href="#刻录启动盘-1">图形界面工具</a></li><li class="tab"><a href="#刻录启动盘-2">命令行工具</a></li></ul><div class="tab-content"><div class="tab-pane active" id="刻录启动盘-1"><ul>
<li><code>Linux</code>: <a
href="/2021/07/10/Ventoy制作多系统启动盘">Ventoy制作多系统启动盘</a></li>
<li><code>Windows</code>: <a target="_blank" rel="noopener" href="https://rufus.ie/zh/">Rufus-轻松创建
USB 启动盘</a></li>
</ul></div><div class="tab-pane" id="刻录启动盘-2"><ul>
<li>插入<code>U</code>盘到计算机</li>
<li><code>sudo fdisk -l</code>
确认<code>U</code>盘信息<code>/dev/sdc</code></li>
<li>写入镜像 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">dd</span> <span class="keyword">if</span>=archlinux-2023.12.01-x86_64.iso of=/dev/sdc</span><br></pre></td></tr></table></figure></li>
</ul></div></div></div></p></li>
</ul>
<h2 id="设置u盘启动">设置U盘启动</h2>
<ul>
<li>一般笔记本电脑的BIOS快捷键为<code>F12</code>、<code>F2</code>、<code>F8</code>、<code>F9</code>或<code>ESC</code>，
这个顺序按使用的频率给出，可以逐个尝试。具体对应关系可以对照下表，如若没有请考虑常用启动热键或自行百度。</li>
</ul>
<details>
<summary>
<label style="color:DarkViolet">不同品牌电脑对应的BIOS快捷键</label>
</summary>
<table>
<thead>
<tr>
<th style="text-align: left;">主板品牌</th>
<th style="text-align: left;">启动按键</th>
<th style="text-align: left;">笔记本品牌</th>
<th style="text-align: left;">启动按键</th>
<th style="text-align: left;">台式机品牌</th>
<th style="text-align: left;">启动按键</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">华硕主板</td>
<td style="text-align: left;">F8</td>
<td style="text-align: left;">联想笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">联想台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">技嘉主板</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">宏基笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">惠普台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">微星主板</td>
<td style="text-align: left;">F11</td>
<td style="text-align: left;">华硕笔记本</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;">宏基台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">映泰主板</td>
<td style="text-align: left;">F9</td>
<td style="text-align: left;">惠普笔记本</td>
<td style="text-align: left;">F9</td>
<td style="text-align: left;">戴尔台式机</td>
<td style="text-align: left;">ESC</td>
</tr>
<tr>
<td style="text-align: left;">梅捷主板</td>
<td style="text-align: left;">ESC或F12</td>
<td style="text-align: left;">Thinkpad</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">神州台式机</td>
<td style="text-align: left;">ESC</td>
</tr>
<tr>
<td style="text-align: left;">七彩虹主板</td>
<td style="text-align: left;">ESC或F11</td>
<td style="text-align: left;">戴尔笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">华硕台式机</td>
<td style="text-align: left;">F8</td>
</tr>
<tr>
<td style="text-align: left;">华擎主板</td>
<td style="text-align: left;">F11</td>
<td style="text-align: left;">神州笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">方正台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">斯巴达克主板</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;">东芝笔记本</td>
<td style="text-align: left;">F2</td>
<td style="text-align: left;">清华同方台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">昂达主板</td>
<td style="text-align: left;">F11</td>
<td style="text-align: left;">三星笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">海尔台式机</td>
<td style="text-align: left;">F12</td>
</tr>
<tr>
<td style="text-align: left;">双敏主板</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;">IBM笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">明基台式</td>
<td style="text-align: left;">F8</td>
</tr>
<tr>
<td style="text-align: left;">翔升主板</td>
<td style="text-align: left;">F10</td>
<td style="text-align: left;">富士通笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">精英主板</td>
<td style="text-align: left;">ESC或F11</td>
<td style="text-align: left;">海尔笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">冠盟主板</td>
<td style="text-align: left;">F11或F12</td>
<td style="text-align: left;">方正笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">富士康主板</td>
<td style="text-align: left;">ESC或F12</td>
<td style="text-align: left;">清华同方笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">顶星主板</td>
<td style="text-align: left;">F11或F12</td>
<td style="text-align: left;">微星笔记本</td>
<td style="text-align: left;">F11</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">盈通主板</td>
<td style="text-align: left;">F8</td>
<td style="text-align: left;">技嘉笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">捷波主板</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;">Gatway笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">Intel主板</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">eMachines笔记本</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">捷微主板</td>
<td style="text-align: left;">ESC或F8</td>
<td style="text-align: left;">索尼笔记本</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">致铭主板</td>
<td style="text-align: left;">F12</td>
<td style="text-align: left;">苹果笔记本</td>
<td style="text-align: left;">长按"option"键</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">盤英主板</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;">微星笔记本</td>
<td style="text-align: left;">F11</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">盤正主板</td>
<td style="text-align: left;">ESC</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">冠铭方板</td>
<td style="text-align: left;">F9</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</details>
<ul>
<li>将U盘插入电脑，开机或重启，当开机画面出现时按下快捷键，进入启动项选择界面，这时候我们就将带有“USB”字样的选项设置为U盘启动</li>
</ul>
<h2 id="wifi联网">WiFi联网</h2>
<ul>
<li>如果是有线网，且网络已经连通，<label style="color:red">不需要验证</label>时，则已经联网成功，可以跳过。</li>
<li>在校园里使用校园网是需要验证的，最佳的做法是用手机联网,
使用数据线连接电脑USB接口, 打开手机:
<code>设置</code>→<code>连接</code>→<code>移动热点和网线共享</code>→<code>USB网络共享</code>
。</li>
<li>检测联网成功：<code>ping www.baidu.com</code>
看到较快的返回值，证明已经联网成功。</li>
</ul>
<details>
<summary>
<label style="color:blue">不借助手机时笔记本无线WIFI联网</label>
</summary>
<figure class="highlight sh"><figcaption><span>查看网卡</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iwctl</span><br><span class="line">device list</span><br></pre></td></tr></table></figure>
<p>执行完以上命令后，获得无线网卡信息：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                                   Devices                                   *</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">  Name                Address             Powered   Adapter   Mode      </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">  wlan0               d0:ab:d5:c0:08:00   on        phy0      station   </span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><figcaption><span>转接无线网线</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">station &lt;无线网卡名&gt; scan</span><br><span class="line">station &lt;无线网卡名&gt; get-networks</span><br><span class="line">station &lt;无线网卡名&gt; connect &lt;网络名&gt;</span><br></pre></td></tr></table></figure>
接下来他会让你输入wifi密码，输入完毕，再执行命令<code>exit</code>退出，网络就连接好了。
</details>
<h2 id="硬盘分区">硬盘分区</h2>
<p>下面给出的是<code>Windwos11</code>和<code>Archlinux</code>双系统的安装方案，分区后应当先安装好<code>Windows11</code>再安装<code>Archlinux</code>，这样在构建<code>Grub</code>时<code>Linux</code>可以自动探测到<code>windows</code>的启动引导菜单，反之<code>Windwos11</code>安装程序会覆盖<code>Linux</code>的<code>Grub</code>，因此
<label style="color:red">顺序不能颠倒</label>。</p>
<h3 id="分区方案">分区方案</h3>
<figure class="highlight sh"><figcaption><span>执行lsblk 得到分区结果</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">nvme0n1     259:0    0 953.9G  0 disk </span><br><span class="line">├─nvme0n1p1 259:1    0   501M  0 part /boot/efi</span><br><span class="line">├─nvme0n1p2 259:2    0   100G  0 part /</span><br><span class="line">├─nvme0n1p3 259:3    0     8G  0 part [SWAP]</span><br><span class="line">├─nvme0n1p4 259:4    0   790G  0 part /home</span><br><span class="line">├─nvme0n1p5 259:5    0    16M  0 part </span><br><span class="line">└─nvme0n1p6 259:6    0  55.4G  0 part </span><br></pre></td></tr></table></figure>
<p>上图是我当前的分区方案，各部分作用为</p>
<ol type="1">
<li><code>nvme0n1p1</code>
是<code>/boot/efi</code>分区，安装grub、存放Linux kernel 以及 initrd
映像。这些都是启动时必需的东西，单独存在 boot
区便于管理。<label style="color:red">注意：此分区格式为<code>fat32</code>,
同时分区大小不得小于<code>300M</code>,在2024-02-22为同学安装Endeavour系统时由于此分区过小导致安装后系统无法启动。</label></li>
<li><code>nvme0n1p2</code> 是<code>/</code>分区,
安装Linux系统及其默认软件。</li>
<li><code>nvme0n1p3</code>
是<code>swap</code>分区，当内存不够时充当虚拟内存,
Linux的swap分区格式为内存交换做过专门优化。</li>
<li><code>nvme0n1p4</code>
是<code>/home</code>分区，是用户的文档、视频等文件存放的目录，对于单用户而言这部分要尽可能设置大一些。</li>
<li><code>nvme0n1p5</code> 和<code>nvme0n1p6</code>
是安装<code>windows11</code>留出的空间，其中<code>p5</code>是<code>windows11</code>安装过程中自动生成的，由于安装<code>windows11</code>的空间不允许小于54G,所以给了它55.4G,
由于我的电脑安装了单独的<code>2242 m2</code>硬盘，<code>windows11</code>可以自动识别，所以只给<code>windows11</code>留一个可以安装启动的空间就可以了。</li>
</ol>
<h3 id="windows10-调整efi分区大小">windows10 调整efi分区大小</h3>
<p>由于Windows11随着更新导致功能越来越复杂，失去了刚发布时的简洁，于是决定换回windows10
LTSC. 但是使用原版的window10
安装系统时，其默认建立<code>100M</code>的<code>efi</code>分区，当安装多系统时显然这个空间应当保持在<code>300M</code>以上，如果是从windows11的基础上重新安装windows10,
那系统会直接使用原来<code>300M</code>的<code>efi</code>分区。如果是全新安装一台电脑，则需要在安装windows10的分区前预留出足够的空间，后期用来调整<code>efi</code>分区。</p>
<ol type="1">
<li>先安装windows10 LTSC, 进入到windows, 安装<a
target="_blank" rel="noopener" href="https://www2.aomeisoftware.com/download/pacn/PAClean.zip">傲梅分区</a></li>
<li>调整<code>efi</code>分区大小，参考：<a
target="_blank" rel="noopener" href="https://www.disktool.cn/content-center/resize-uefi-system-partition-1016.html">如何在不丢失数据的情况下调整EFI分区大小?</a></li>
</ol>
<h3 id="格式化和挂载分区">格式化和挂载分区</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkfs.fat -F32 /dev/nvme0n1p1</span><br><span class="line">mkfs.ext4 /dev/nvme0n1p2</span><br><span class="line">mkswap /dev/nvme0n1p3</span><br><span class="line">mkfs.ext4 /dev/nvme0n1p4</span><br><span class="line">mount /dev/nvme0n1p2  /mnt/</span><br><span class="line"><span class="built_in">mkdir</span> /mnt/boot</span><br><span class="line"><span class="built_in">mkdir</span> /mnt/boot/efi</span><br><span class="line">mount /dev/nvme0n1p1 /mnt/boot/efi</span><br><span class="line"><span class="built_in">mkdir</span> /mnt/home</span><br><span class="line">mount /dev/nvme0n1p4 /mnt/home</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>如果您不熟悉命令行分区操作，可以启动一个<code>Live</code>发行版，使用其内置的磁盘分区工具在图形界面下分区，然后再转回到文本安装<code>Archlinux</code>。推荐基于<code>Archlinux</code>的<code>Manjaro</code>,启动镜像后使用<code>Gparted</code>来分区即可。</p>
<p>如果是重装系统，那<label style="color:red">不要格式化原来的<code>efi</code>分区</label>，因为里面保存有<code>Windows</code>的启动引导程序，直接挂载就可以了。</p>
</div>
<h2 id="扩展硬盘">扩展硬盘</h2>
<p>在电脑的使用过程中，有时候硬盘的容量会不够用，这种情况可以在添加新硬盘以扩容。同时，由于我们的方案中安装的是双系统，且<code>windows</code>作为辅助系统而出现，所以给<code>windows</code>系统分配的固态系统盘刚好满足要求即可。但是，如果在<code>windows</code>中保存文件则其容量显然不够。综上，我们给出一个方案：在电脑中加装一块新硬盘，将其格式化为<code>NTFS</code>格式，这样<code>Linux</code>和<code>Windows</code>都可以读取和写入文件.
在<code>Windows</code>中，系统会自动分配盘符而挂载，在<code>Linux</code>中需要手动设置新的挂载点，设置系统开机自动挂载，方法为：</p>
<ol type="1">
<li>使用命令<code>sudo blkid</code>查询新添加硬盘的<code>UUID</code>:</li>
</ol>
<figure class="highlight sh"><figcaption><span>sudo blkid</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/dev/nvme0n1p7: UUID=<span class="string">&quot;99c16664-0d77-4911-bfe1-d08a14d5db9e&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;ba86420f-3b39-4604-aa56-7be64a51ff24&quot;</span></span><br><span class="line">/dev/nvme0n1p5: UUID=<span class="string">&quot;b4f5ab83-c06d-4f09-86b9-af00fa6acfeb&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;69e0d3e9-ebca-4a91-94ca-1c011f8ca136&quot;</span></span><br><span class="line">/dev/nvme0n1p3: UUID=<span class="string">&quot;5A1B-4E5F&quot;</span> BLOCK_SIZE=<span class="string">&quot;512&quot;</span> TYPE=<span class="string">&quot;vfat&quot;</span> PARTLABEL=<span class="string">&quot;EFI system partition&quot;</span> PARTUUID=<span class="string">&quot;aec2b0dc-2d92-4d54-b710-d9f1a40b4ee1&quot;</span></span><br><span class="line">/dev/nvme0n1p1: BLOCK_SIZE=<span class="string">&quot;512&quot;</span> UUID=<span class="string">&quot;04A17097256A219A&quot;</span> TYPE=<span class="string">&quot;ntfs&quot;</span> PARTUUID=<span class="string">&quot;53c32223-c32b-4cfd-9874-66d2b78bf8c9&quot;</span></span><br><span class="line">/dev/nvme0n1p6: UUID=<span class="string">&quot;f6cd758c-87f2-45e8-a641-c49456f059f1&quot;</span> TYPE=<span class="string">&quot;swap&quot;</span> PARTUUID=<span class="string">&quot;7af559d1-110f-45c0-bf3e-2dc0d985e39c&quot;</span></span><br><span class="line">/dev/nvme0n1p2: BLOCK_SIZE=<span class="string">&quot;512&quot;</span> UUID=<span class="string">&quot;5AE068C2E068A64B&quot;</span> TYPE=<span class="string">&quot;ntfs&quot;</span> PARTUUID=<span class="string">&quot;732d0157-3c76-423d-925c-72191352ba57&quot;</span></span><br><span class="line">/dev/nvme1n1p1: BLOCK_SIZE=<span class="string">&quot;512&quot;</span> UUID=<span class="string">&quot;63C1B9F11137E5C9&quot;</span> TYPE=<span class="string">&quot;ntfs&quot;</span> PARTLABEL=<span class="string">&quot;DATA&quot;</span> PARTUUID=<span class="string">&quot;c87d1cf3-4e82-41e3-873b-dbae52e0fdbb&quot;</span></span><br><span class="line">/dev/nvme0n1p4: PARTLABEL=<span class="string">&quot;Microsoft reserved partition&quot;</span> PARTUUID=<span class="string">&quot;21015bba-93cf-47e7-b20c-422eeb882ed1&quot;</span></span><br></pre></td></tr></table></figure>
<p>在上述结果中，我们新增加的硬盘为<code>DATA</code>,
其<code>UUID</code>号为<code>63C1B9F11137E5C9</code>。</p>
<ol start="2" type="1">
<li>在<code>/etc/fstab</code>最后一行添加挂载信息：</li>
</ol>
<figure class="highlight sh"><figcaption><span>/etc/fstab</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /dev/nvme1n1</span></span><br><span class="line">UUID=63C1B9F11137E5C9       /home/feng/DATA    ntfs   rw,relatime    0 2</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>经过上述设置后，重启系统后<code>/home/feng/DATA</code>将会自动挂载新的硬盘，同时在启动到<code>Windows</code>时，新的硬盘将被识别为<code>D盘</code>，从而实现了扩容和共享存储空间的目的。也有的人把新的硬盘整体当作<code>/home</code>挂载点，这因人而异，请自己合理规划。参考文章：<a
href="/2022/10/30/Linux加装硬盘">Linux加装硬盘</a></p>
</div>
<h2 id="换国内源">换国内源</h2>
<div class="tabs" id="换国内源"><ul class="nav-tabs"><li class="tab active"><a href="#换国内源-1">自动配置</a></li><li class="tab"><a href="#换国内源-2">手动配置</a></li></ul><div class="tab-content"><div class="tab-pane active" id="换国内源-1"><ol type="1">
<li><p>国内常用的：选择在<label style="color:red">最近同步的</label>，并且是位于中国的12个镜像，然后根据下载速度进行排序，最后将结果覆写到
<code>/etc/pacman.d/mirrorlist</code> 文件 <figure class="highlight sh"><figcaption><span>切换为国内最快的12个ArchLinux源</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reflector --verbose -c China --latest 12 --<span class="built_in">sort</span> rate --threads 100 --save /etc/pacman.d/mirrorlist</span><br><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure></p></li>
<li><p>需要全球最新：下载速度进行排序，并筛选出前5个最近同步的镜像，最后将结果覆写到
<code>/etc/pacman.d/mirrorlist</code> 文件 <figure class="highlight sh"><figcaption><span>全球最新</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reflector --verbose --latest 5 --<span class="built_in">sort</span> rate --save /etc/pacman.d/mirrorlist</span><br><span class="line">pacman -Syu</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>全球最新可以让您将获得最新的系统，但是并不意味在国内速度最快，因为国内镜像源肯定比国外快，但是却不一定是最新的，如果选择国内常用的，那您将获得国内最新的系统。二选一，请您自己决定。
2024年01月19日,
在更新系统时发现<code>reflector</code>返回错误<code>error: no mirrors found</code>,
在问题没有被官方解决前可以使用手动方法切换镜像，对于低频率操作影响不大。</p></div><div class="tab-pane" id="换国内源-2"><ol type="1">
<li><p>点击官方镜像源列表网址: <a
target="_blank" rel="noopener" href="https://archlinux.org/mirrorlist/">https://archlinux.org/mirrorlist/</a></p></li>
<li><p>在<code>Country</code>选择框中选择：<code>China</code></p></li>
<li><p>在最下面点击<code>Generate List</code>按扭</p></li>
<li><p>复制生成的镜像源，粘贴到<code>/etc/pacman.d/mirrorlist</code>
，为了方便读者使用直接上生成的源码：</p></li>
</ol>
<figure class="highlight sh"><figcaption><span>/etc/pacman.d/mirrorlist</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Arch Linux repository mirrorlist</span></span><br><span class="line"><span class="comment">## Generated on 2024-02-22</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## China</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.163.com/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.aliyun.com/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.aliyun.com/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.cqu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.hit.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.hit.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.jlu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.jlu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.jxust.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.jxust.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirror.lzu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.neusoft.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.neusoft.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.nju.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.nju.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.njupt.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirror.nyist.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirror.nyist.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.qlu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirror.redrock.team/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirror.redrock.team/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.shanghaitech.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.shanghaitech.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.sjtug.sjtu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.ustc.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.wsyu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.wsyu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = https://mirrors.xjtu.edu.cn/archlinux/$repo/os/$arch</span></span><br><span class="line"><span class="comment">#Server = http://mirrors.zju.edu.cn/archlinux/$repo/os/$arch</span></span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="安装基础系统">安装基础系统</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pacstrap /mnt base base-devel linux linux-firmware</span><br><span class="line">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</span><br></pre></td></tr></table></figure>
<h2 id="设置系统">设置系统</h2>
<h3 id="切换到安装在硬盘中的系统">切换到安装在硬盘中的系统</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch-chroot /mnt</span><br></pre></td></tr></table></figure>
<h3 id="安装必要软件">安装必要软件</h3>
<ul>
<li>最小系统必备工具 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S grub efibootmgr vim neovim wpa_supplicant dhcpcd <span class="built_in">sudo</span> networkmanager os-prober openssh inetutils</span><br></pre></td></tr></table></figure> <div class="note primary"><ul>
<li>2024年09月01日,
将无线网管理器由<code>iwd</code>切换为<code>wpa_supplicant</code>.
因为后者是<code>networkmanager</code>默认的后端管理程序，最初安装好系统后一直可以正常使用。但是从8月份升级系统后发现蓝牙无法使用，通过一些网络上的方法修复。但是近期又现<code>wifi</code>总是不停的自动断开，相当不稳定，百度后从<a
target="_blank" rel="noopener" href="https://tieba.baidu.com/p/7204470911">archlinux
吐槽一下自己刚刚踩到的坑</a>得知是<code>iwd</code>与<code>wpa_supplicant</code>冲突了，由于后者默认的原因，同时不再愿意花时间去配置所谓性能更好的<code>iwd</code>,
所以做出了此处调整。如果您一定要使用<code>iwd</code>请参考<a
target="_blank" rel="noopener" href="https://blog.alkali.top/2021/08/20/%E4%BD%BF%E7%94%A8iwd%E4%BD%9C%E4%B8%BANetworkManager%E7%9A%84WiFi-backend/">使用
iwd 作为 NetworkManager 的 WiFi backend</a>进行设置。</li>
<li>2024年10月26日,
追加软件<code>inetutils</code>,提供命令<code>hostname</code>，
此命令在运行<code>gitlab-runner</code>时会要求，但是之前<code>Archlinux</code>上没有，虽然能运行，但是不完美，因此今天追加此命令。参考：<a
target="_blank" rel="noopener" href="https://bbs.archlinux.org/viewtopic.php?id=125308">[solved]
hostname command not found</a></li>
</ul>
</div></li>
</ul>
<details>
<summary>
可选网络管理器
</summary>
<p>管理一个无线网络连接需要一个基本的工具。此处据<a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE">ArchWiki
网络配置/无线网络配置</a> 列出可用选项：</p>
<table>
<thead>
<tr>
<th style="text-align: center;">软件</th>
<th style="text-align: center;">软件包</th>
<th style="text-align: center;">WEXT</th>
<th style="text-align: center;">nl80211</th>
<th style="text-align: center;">WEP</th>
<th style="text-align: center;">WPA/WPA2/WPA3</th>
<th style="text-align: center;">Archiso</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>wireless_tools</code></td>
<td style="text-align: center;"><code>wireless_tools</code></td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr>
<td style="text-align: center;"><code>iw</code></td>
<td style="text-align: center;"><code>iw</code></td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
</tr>
<tr>
<td style="text-align: center;"><code>wpa_supplicant</code></td>
<td style="text-align: center;"><code>wpa_supplicant</code></td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
<tr>
<td style="text-align: center;"><code>iwd</code></td>
<td style="text-align: center;"><code>iwd</code></td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">no</td>
<td style="text-align: center;">yes</td>
<td style="text-align: center;">yes</td>
</tr>
</tbody>
</table>
</details>
<ul>
<li>压缩软件、下载软件等必备软件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S p7zip-natspec unarchiver lzop lrzip arj zip unzip reflector git curl vifm ntfs-3g fastfetch</span><br></pre></td></tr></table></figure></li>
</ul>
<div class="note primary"><ul>
<li>fastfetch 在终端上输出本机信息，另外还有 screenfetch 和 neofetch,
因为 fastfetch 是用 C 语言写的，所以速度极快。</li>
<li>2024年04月14日,
添加压缩软件及次必备软件，以确保后面安装软件解压缩的需要。</li>
</ul>
</div>
<h3 id="启用网络">启用网络</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> dhcpcd NetworkManager wpa_supplicant</span><br></pre></td></tr></table></figure>
<h3 id="设置root密码">设置<code>root</code>密码</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd</span><br></pre></td></tr></table></figure>
<h3 id="新增用户">新增用户</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -G YourGroup &lt;用户名&gt;</span><br><span class="line">passwd &lt;用户名&gt;</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>注意：在网络上传播的教程中都默认使用了<a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Sudo">Sudo-ArchWiki</a>中的<code>wheel</code>组名，但这只是个例子，如果大家都使用了这个组名，那可能会被人利用，从而降低系统的安全性。所以本教程修改为<code>YourGroup</code>,
您可以根据自己的需要修改。 ---2024年11月28日</p>
</div>
<h3 id="加入sudo">加入<code>sudo</code></h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EDITOR=vim visudo</span><br></pre></td></tr></table></figure>
<p>找到 <code>%YourGroup All=(ALL:ALL) ALL</code>把前面的注释去掉</p>
<h3 id="安装grub引导">安装grub引导</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/default/grub</span><br></pre></td></tr></table></figure>
<p>找到 <code>GRUB_DISABLE_OS_PROBER=false</code>
去掉前面的注释(应该是文件的最后一行)</p>
<h3 id="安装引导">安装引导</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grub-install  --target=x86_64-efi  --efi-directory=/boot/efi  --bootloader-id=ArchLinux</span><br><span class="line">grub-mkconfig -o  /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<h3 id="设置语言">设置语言</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/locale.gen</span><br></pre></td></tr></table></figure>
<p>去掉 <code>en_US.UTF-8</code> 和
<code>zh_CN.UTF-8</code>前的注释，再执行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locale-gen</span><br></pre></td></tr></table></figure>
<h3 id="设置时区">设置时区</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -sf  /usr/share/zoneinfo/Asia/Shanghai  /etc/localtime</span><br></pre></td></tr></table></figure>
<h3 id="设置硬件时间">设置硬件时间</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hwclock --systohc --utc</span><br></pre></td></tr></table></figure>
<h3 id="安装桌面环境">安装桌面环境</h3>
<details>
<summary>
桌面环境踩坑日记
</summary>
<p><label style="color:red">注意：</label> 2024年03月07日
<code>Archlinux</code>执行更新命令<code>sudo pacman -Syu</code>后桌面环境由Plasma5升级为<a
target="_blank" rel="noopener" href="https://community.kde.org/Plasma/Plasma_6">Plasma6</a>,
其最大的变化是显示服务器由xorg默认改为wayland,
而wayland是下一代显示服务器，比xorg更加现代。如果您的软件失效，多半与wayland有关，不过我个人测试效果尚可。</p>
<p>最初我从<code>Plasma4</code>转到<code>Gnome3</code>是因为<code>Plasma4</code>经常崩溃，但是到了<code>Plasma5</code>就稳定了。在使用<code>Gnome3</code>的过程中，发现它也很优秀，它很干净整洁，没有过多的配置选项，美观独特，但是想要提高工作效率还必须安装一些<code>Gnome3</code>的插件才行，比如<code>hide-top-bar</code>、<code>dash-to-dock</code>，这两个是必备插件，但是这也成为了它的致命缺点，每次<code>Gnome3</code>大版本升级时，一大批插件就会挂掉，而且不能做到同步更新，插件失效的空白期是相当影响工作效率的。</p>
<p>2024年04月14日
在升级<code>Archlinux</code>时，发现<code>Plasma6</code>彻底漰溃，导致无法工作。唉，好在Gnome45的插件<code>hide-top-bar</code>目前可用了，综合考虑后，由于显示效果上讲<code>Gnome3</code>
比<code>Plasma</code> 更早支持<code>wayland</code>,
而<code>Plasma6</code>刚刚支持<code>wayland</code>,虽然效果很好，但是刚开始，太不稳定，所以再次回到<code>Gnome3</code>,
工作第一，升级前需要确认好系统的稳定性。</p>
</details>
<div class="tabs" id="安装桌面环境"><ul class="nav-tabs"><li class="tab active"><a href="#安装桌面环境-1">Gnome3</a></li><li class="tab"><a href="#安装桌面环境-2">KDE-Plasma</a></li></ul><div class="tab-content"><div class="tab-pane active" id="安装桌面环境-1"><figure class="highlight sh"><figcaption><span>安装Gnome3</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S gnome gdm wqy-microhei gnome-tweaks gnome-console gnome-backgrounds gnome-calculator gnome-calendar gnome-text-editor loupe papers showtime fd ripgrep composer julia gst-plugins-ugly gst-plugins-bad gst-plugins-good gst-plugins-base gst-libav</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">echo</span> LANG=zh_CN.UTF-8 &gt; /etc/locale.conf</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> gdm</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
执行上述命令后会出现一个选择菜单，由您自己决定安装组件，对于不太确定的组件请选择安装，这样可以避免不必要的麻烦。
</p>
</div>
<details>
<summary>
Gnome3包括的默认组件(2024年06月10日)
</summary>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;">gnome-2048</td>
<td style="text-align: left;">gnome-info-collect</td>
<td style="text-align: left;">gnome-shell-extension-arc-menu</td>
</tr>
<tr>
<td style="text-align: left;">gnome-appfolders-manager</td>
<td style="text-align: left;">gnome-initial-setup</td>
<td style="text-align: left;">gnome-shell-extension-caffeine</td>
</tr>
<tr>
<td style="text-align: left;">gnome-applets</td>
<td style="text-align: left;">gnome-keybindings</td>
<td style="text-align: left;">gnome-shell-extension-dash-to-dock</td>
</tr>
<tr>
<td style="text-align: left;">gnome-autoar</td>
<td style="text-align: left;">gnome-keyring</td>
<td style="text-align: left;">gnome-shell-extension-dash-to-panel</td>
</tr>
<tr>
<td style="text-align: left;">gnome-backgrounds</td>
<td style="text-align: left;">gnome-klotski</td>
<td
style="text-align: left;">gnome-shell-extension-desktop-icons-ng</td>
</tr>
<tr>
<td style="text-align: left;">gnome-bluetooth</td>
<td style="text-align: left;">gnome-latex</td>
<td style="text-align: left;">gnome-shell-extension-fixed-ime-list</td>
</tr>
<tr>
<td style="text-align: left;">gnome-bluetooth-3.0</td>
<td style="text-align: left;">gnome-logs</td>
<td style="text-align: left;">gnome-shell-extension-gsconnect</td>
</tr>
<tr>
<td style="text-align: left;">gnome-boxes</td>
<td style="text-align: left;">gnome-mahjongg</td>
<td style="text-align: left;">gnome-shell-extension-gsconnect-git</td>
</tr>
<tr>
<td style="text-align: left;">gnome-break-timer</td>
<td style="text-align: left;">gnome-maps</td>
<td style="text-align: left;">gnome-shell-extension-kimpanel-git</td>
</tr>
<tr>
<td style="text-align: left;">gnome-browser-connector</td>
<td style="text-align: left;">gnome-menus</td>
<td style="text-align: left;">gnome-shell-extension-net-speed</td>
</tr>
<tr>
<td style="text-align: left;">gnome-builder</td>
<td style="text-align: left;">gnome-mines</td>
<td style="text-align: left;">gnome-shell-extensions</td>
</tr>
<tr>
<td style="text-align: left;">gnome-calculator</td>
<td style="text-align: left;">gnome-mplayer</td>
<td style="text-align: left;">gnome-shell-extension-vitals</td>
</tr>
<tr>
<td style="text-align: left;">gnome-calendar</td>
<td style="text-align: left;">gnome-multi-writer</td>
<td style="text-align: left;">gnome-shell-extension-weather-oclock</td>
</tr>
<tr>
<td style="text-align: left;">gnome-characters</td>
<td style="text-align: left;">gnome-music</td>
<td style="text-align: left;">gnome-shell-pomodoro</td>
</tr>
<tr>
<td style="text-align: left;">gnome-chess</td>
<td style="text-align: left;">gnome-nettool</td>
<td style="text-align: left;">gnome-shell-pomodoro-debug</td>
</tr>
<tr>
<td style="text-align: left;">gnome-clocks</td>
<td style="text-align: left;">gnome-nibbles</td>
<td style="text-align: left;">gnome-software</td>
</tr>
<tr>
<td style="text-align: left;">gnome-color-manager</td>
<td style="text-align: left;">gnome-notes</td>
<td style="text-align: left;">gnome-sound-recorder</td>
</tr>
<tr>
<td style="text-align: left;">gnome-common</td>
<td style="text-align: left;">gnome-online-accounts</td>
<td style="text-align: left;">gnome-subtitles</td>
</tr>
<tr>
<td style="text-align: left;">gnome-connections</td>
<td style="text-align: left;">gnome-packagekit</td>
<td style="text-align: left;">gnome-sudoku</td>
</tr>
<tr>
<td style="text-align: left;">gnome-console</td>
<td style="text-align: left;">gnome-panel</td>
<td style="text-align: left;">gnome-system-monitor</td>
</tr>
<tr>
<td style="text-align: left;">gnome-contacts</td>
<td style="text-align: left;">gnome-photos</td>
<td style="text-align: left;">gnome-taquin</td>
</tr>
<tr>
<td style="text-align: left;">gnome-control-center</td>
<td style="text-align: left;">gnome-pie</td>
<td style="text-align: left;">gnome-terminal</td>
</tr>
<tr>
<td style="text-align: left;">gnome-desktop</td>
<td style="text-align: left;">gnome-podcasts</td>
<td style="text-align: left;">gnome-tetravex</td>
</tr>
<tr>
<td style="text-align: left;">gnome-desktop-4</td>
<td style="text-align: left;">gnome-power-manager</td>
<td style="text-align: left;">gnome-text-editor</td>
</tr>
<tr>
<td style="text-align: left;">gnome-desktop-common</td>
<td style="text-align: left;">gnome-recipes</td>
<td style="text-align: left;">gnome-themes-extra</td>
</tr>
<tr>
<td style="text-align: left;">gnome-devel-docs</td>
<td style="text-align: left;">gnome-remote-desktop</td>
<td style="text-align: left;">gnome-tour</td>
</tr>
<tr>
<td style="text-align: left;">gnome-dictionary</td>
<td style="text-align: left;">gnome-robots</td>
<td style="text-align: left;">gnome-tweaks</td>
</tr>
<tr>
<td style="text-align: left;">gnome-disk-utility</td>
<td style="text-align: left;">gnome-screenshot</td>
<td style="text-align: left;">gnome-usage</td>
</tr>
<tr>
<td style="text-align: left;">gnome-epub-thumbnailer</td>
<td style="text-align: left;">gnome-session</td>
<td style="text-align: left;">gnome-user-docs</td>
</tr>
<tr>
<td style="text-align: left;">gnome-firmware</td>
<td style="text-align: left;">gnome-settings-daemon</td>
<td style="text-align: left;">gnome-user-share</td>
</tr>
<tr>
<td style="text-align: left;">gnome-flashback</td>
<td style="text-align: left;">gnome-shell</td>
<td style="text-align: left;">gnome-video-effects</td>
</tr>
<tr>
<td style="text-align: left;">gnome-font-viewer</td>
<td style="text-align: left;">gnome-shell-docs</td>
<td style="text-align: left;">gnome-weather</td>
</tr>
<tr>
<td style="text-align: left;">gnome-games</td>
<td style="text-align: left;">gnome-shell-extension-appindicator</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</details></div><div class="tab-pane" id="安装桌面环境-2"><figure class="highlight sh"><figcaption><span>安装KDE-Plasma</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S xorg plasma-desktop kwallet-pam plasma-nm plasma-pa powerdevil firefox spectacle gwenview dolphin konsole</span><br><span class="line"><span class="built_in">sudo</span> pcaman -S sddm  sddm-kcm</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> sddm.service</span><br></pre></td></tr></table></figure>
<div class="note primary">
<ul>
<li>
<a target="_blank" rel="noopener" href="https://github.com/sddm/sddm/">Simple Desktop Display
Manager</a> (<code>SDDM</code>)是一个显示管理器。它是<code>KDE
Plasma</code>和<code>LXQt</code>桌面环境推荐的显示管理器。
</li>
<li>
<a
target="_blank" rel="noopener" href="https://archlinux.org/packages/?name=sddm-kcm">sddm-kcm</a><sup>包</sup>
软件包(包含在<code>plasma</code>包组
用户组)提供了一个图形用户界面以在<code>Plasma</code>系统设置中配置<code>SDDM</code>。
</li>
<li>
<a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/SDDM">SDDM-ArchWiki</a>
</li>
</ul>
</div>
<details>
<summary>
Plasma6 默认包括组件(2024年06月10日)
</summary>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr>
<td style="text-align: left;">plasma-activities</td>
<td style="text-align: left;">plasma-integration</td>
<td style="text-align: left;">plasma-settings</td>
</tr>
<tr>
<td style="text-align: left;">plasma-activities-stats</td>
<td style="text-align: left;">plasma-meta</td>
<td style="text-align: left;">plasma-settings-debug</td>
</tr>
<tr>
<td style="text-align: left;">plasma-applet-window-buttons</td>
<td style="text-align: left;">plasma-mobile</td>
<td style="text-align: left;">plasma-systemmonitor</td>
</tr>
<tr>
<td style="text-align: left;">plasma-bigscreen-git</td>
<td style="text-align: left;">plasma-mobile-debug</td>
<td style="text-align: left;">plasma-systemmonitor-git</td>
</tr>
<tr>
<td style="text-align: left;">plasma-bigscreen-git-debug</td>
<td style="text-align: left;">plasma-nano-git</td>
<td style="text-align: left;">plasma-thunderbolt</td>
</tr>
<tr>
<td style="text-align: left;">plasma-browser-integration</td>
<td style="text-align: left;">plasma-nano-git-debug</td>
<td style="text-align: left;">plasma-vault</td>
</tr>
<tr>
<td style="text-align: left;">plasma-desktop</td>
<td style="text-align: left;">plasma-nm</td>
<td style="text-align: left;">plasma-wayland-protocols</td>
</tr>
<tr>
<td style="text-align: left;">plasma-disks</td>
<td style="text-align: left;">plasma-pa</td>
<td style="text-align: left;">plasma-welcome</td>
</tr>
<tr>
<td style="text-align: left;">plasma-firewall</td>
<td style="text-align: left;">plasma-pass</td>
<td style="text-align: left;">plasma-workspace</td>
</tr>
<tr>
<td style="text-align: left;">plasma-framework5</td>
<td style="text-align: left;">plasma-sdk</td>
<td style="text-align: left;">plasma-workspace-wallpapers</td>
</tr>
</tbody>
</table>
</details></div></div></div>
<h2 id="安装nvidia显卡">安装Nvidia显卡</h2>
<div class="tabs" id="nvidia显卡"><ul class="nav-tabs"><li class="tab active"><a href="#nvidia显卡-1">安装私有Nvidia</a></li><li class="tab"><a href="#nvidia显卡-2">安装DKMS版Nvidia</a></li></ul><div class="tab-content"><div class="tab-pane active" id="nvidia显卡-1"><ol type="1">
<li><p>安装<code>Nvidia</code>软件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S nvidia nvidia-settings</span><br></pre></td></tr></table></figure></p>
<div class="note primary">
<p>
如果是笔记本电脑则需要按装上<code>nvidia-prime</code>,
它的作用是切换显卡，安装成功之后，如果要使用<code>Nvidia</code>独显，则在相应的命令前加上<code>prime-run</code>即可。比如使用<code>mesa-demo</code>包提供的<code>glxinfo</code>来测试显卡是否安装成功，则使用命令<code>prime-run
glxinfo |grep OpenGL</code>,
如查输出<code>Nvidia</code>显卡的信息，则独显安装成功。另外还可以使用<code>nvidia-smi</code>来查看<code>Nvidia</code>独显的使用信息，类似于任务管理器的效果。
</p>
</div></li>
<li><p>设置环境变量 <figure class="highlight sh"><figcaption><span>/etc/environment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GBM_BACKEND=nvidia-drm</span><br><span class="line">__GLX_VENDOR_LIBRARY_NAME=nvidia</span><br></pre></td></tr></table></figure></p></li>
<li><p>系统启动时载入<code>Nvidia</code>模块 <figure class="highlight sh"><figcaption><span>/etc/mkinitcpio.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)</span><br></pre></td></tr></table></figure>
加入这四个模块后，每次更新<code>nvidia</code>驱动之后需要运行一次<code>mkinitcpio</code>,
这可以使用<code>pacman</code>钩子实现自动化: <figure class="highlight sh"><figcaption><span>/etc/pacman.d/hooks/nvidia.hook</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Trigger]</span><br><span class="line">Operation=Install</span><br><span class="line">Operation=Upgrade</span><br><span class="line">Operation=Remove</span><br><span class="line">Type=Package</span><br><span class="line"><span class="comment"># Uncomment the installed NVIDIA package</span></span><br><span class="line">Target=nvidia</span><br><span class="line"><span class="comment">#Target=nvidia-open</span></span><br><span class="line"><span class="comment">#Target=nvidia-lts</span></span><br><span class="line"><span class="comment"># If running a different kernel, modify below to match</span></span><br><span class="line">Target=linux</span><br><span class="line"></span><br><span class="line">[Action]</span><br><span class="line">Description=Updating NVIDIA module <span class="keyword">in</span> initcpio</span><br><span class="line">Depends=mkinitcpio</span><br><span class="line">When=PostTransaction</span><br><span class="line">NeedsTargets</span><br><span class="line">Exec=/bin/sh -c <span class="string">&#x27;while read -r trg; do case $trg in linux*) exit 0; esac; done; /usr/bin/mkinitcpio -P&#x27;</span></span><br></pre></td></tr></table></figure>
上述操作可参考：</p></li>
</ol>
<ul>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA#See_also">NVIDIA-ArchWiki</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.zido.site/blog/2021-09-04-archlinux-nvdia/">archlinux
nvidia 独显配置</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Mkinitcpio#MODULES">mkinitcpio-HOOKS</a></li>
</ul>
<ol start="4" type="1">
<li><p>文件<code>mkinitcpio.conf</code>继续往下翻，找到<code>HOOKS</code>,
其上面一行为 <figure class="highlight sh"><figcaption><span>/etc/mkinitcpio.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># user and fsck hooks</span></span><br><span class="line">HOOKS=(base udev autodetect microcode modconf kms keyboard keymap consolefont block)</span><br></pre></td></tr></table></figure> 去掉括号中的<code>kms</code>.</p></li>
<li><p>重新生成<code>initramfs</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mkinitcpio -P</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>执行命令时，会出现“WARNING: Possibly missing firmware for
module…”警告信息，这些信息可以忽略，因为它没有什么影响。</p>
<ol start="6" type="1">
<li><p>开启<code>DRM</code>,
在配置文件<code>/etc/default/grub</code>中找到<code>GRUB_CMDLINE_LINUX_DEFAULT</code>,修改如下
<figure class="highlight sh"><figcaption><span>/etc/default/grub</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GRUB boot loader configuration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#GRUB_DEFAULT=0</span></span><br><span class="line">GRUB_DEFAULT=<span class="string">&quot;1&gt;2&quot;</span></span><br><span class="line">GRUB_TIMEOUT=5</span><br><span class="line">GRUB_DISTRIBUTOR=<span class="string">&quot;Arch&quot;</span></span><br><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">&quot;loglevel=3 quiet nvidia-drm.modeset=1&quot;</span></span><br><span class="line">GRUB_CMDLINE_LINUX=<span class="string">&quot;&quot;</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>重新生成<code>grub</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cat</span> /sys/module/nvidia_drm/parameters/modeset</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>注意：重启后执行第二条命令，如果得到<code>Y</code>，则表示<code>NVIDIA DRM</code>开启成功，否则不成功。</p>
<ol start="8" type="1">
<li><p>配置电源管理 <figure class="highlight sh"><figcaption><span>/etc/modprobe.d/nvidia-power-management.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">options nvidia NVreg_PreserveVideoMemoryAllocations=1 NVreg_TemporaryFilePath=/var/tmp</span><br></pre></td></tr></table></figure></p></li>
<li><p>配置<code>Wayland</code>,
如果不启用<code>wayland</code>则自动进入到<code>xorg</code>.
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nvidia-suspend.service nvidia-hibernate.service nvidia-resume.service</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /dev/null /etc/udev/rules.d/61-gdm.rules</span><br></pre></td></tr></table></figure></p></li>
</ol>
<div class="note primary">
<ul>
<li>
2024年07月02日, 我配置好了我的台式机，其<code>CPU</code>为<code>AMD
ryzen 7 3700X</code>,
其不带集成显卡，所以只能使用独立的<code>nvidia</code>显卡，而按笔记本的<code>dkms</code>配置，也能正常工作，但不是足够流畅(会出现画面撕裂)，按教程配置好独立显卡后，运行良好。
</li>
<li>
2024年07月08日, 按此教程配置好<code>ThinkpadT490</code>,
工作良好，不再使用<code>dkms</code>方式配置笔记本电脑。
</li>
<li>
2024年10月19日,
增加<code>HOOKS</code>的配置，参考<code>NVIDIA-ArchWiki</code>.
</li>
</ul>
</div></div><div class="tab-pane" id="nvidia显卡-2"><p>一般笔记本携带的<code>Nvidia</code>显卡，默认并不启动。有些较强显示需求的软件可以单独打开<code>Nvidia</code>，不需要时就默认使用集成显卡，这有利于笔记本电脑节省电量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S  dkms  nvidia-dkms nvidia-utils glxgears</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
注意：在我安装完ArchLinux后，原本按nvidia官方的方法配置了显卡，但是发现系统启动后不能正常加载模块，在2024-01-01升级完系统后，更是无法启动系统，这让我误以为滚挂系统但问题绝对不会是nvidia官方显卡的使用方式，但是排查下来发现问题确实还真是它。在没有足够时间研究这个问题的时候，我决定安装<code>Endeavour</code>，结果发现表现良好！于是直接借用了<code>Endeavour</code>的配置方式，使用<code>dkms</code>的方式使用<code>nvidia</code>,
详细技术请参考：<a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/DKMS">DKMS</a>
。<code>glxgears</code>命令会出现一个转动的齿轮，用来测试独立显卡是否工作。经测试均正常工作。此命令没有实质性作用，测试完成后可以删除。2024年07月08日,
<code>dkms</code>一般针对自己定制的内核来安装，如果使用通用的<code>linux</code>或<code>linux-lts</code>则不宜使用<code>dkms</code>。
</p>
</div></div></div></div>
<h2 id="安装电源管理软件">安装电源管理软件</h2>
<p><label style="color:red">power-profiles-daemon与tlp是冲突的，目前在我的ThinkPad-T490上测试TLP表现更佳，请根据自己的情况择优选取，但更倾向于推荐TLP。</label></p>
<h3 id="endeavour的默认电源管理">Endeavour的默认电源管理</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S power-profiles-daemon</span><br></pre></td></tr></table></figure>
<h3 id="高级电源管理工具tlp">高级电源管理工具TLP</h3>
<p>对于笔记本电脑而而言，需要安装<code>TLP</code>，否则会出现电源消耗过大，风扇逛转，睡眠或休眠后无法唤醒等问题，特别是睡眠无法唤醒问题会严重影响使用体验！下面根据<a
target="_blank" rel="noopener" href="https://linrunner.de/tlp/index.html">TLP官网</a>记录具体操作步骤：</p>
<ol type="1">
<li><p>安装软件 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S tlp tlp-rdw smartmontools</span><br><span class="line">paru --skipreview --noconfirm -S tp_smapi-dkms</span><br></pre></td></tr></table></figure></p></li>
<li><p>启动服务 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable tlp.service</span><br><span class="line">sudo systemctl enable NetworkManager-dispatcher.service</span><br></pre></td></tr></table></figure></p></li>
<li><p>屏蔽与<code>TLP</code>冲突的服务 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl mask systemd-rfkill.service systemd-rfkill.socket</span><br></pre></td></tr></table></figure></p></li>
</ol>
<div class="note primary"><p>ThinkPads only: External Kernel Modules<code>tp_smapi</code>,
显示<code>tlp-stat</code>中的<code>S.M.A.R.T</code>数据<code>smartmontools</code>.
在2024年01月04日发现系统又一次提示登录模块错误，于是判断为这个外加的<code>tp_smapi</code>,
本想直接删除这个模块，但是使用<code>paru</code>找到了其<code>dkms</code>版本，于是通过<code>paru</code>安装了<code>tp_smapi-dkms</code>,
重启后发现不再有模块登录失败的提示。</p>
</div>
<h2 id="安装蓝牙服务">安装蓝牙服务</h2>
<div class="tabs" id="安装蓝牙"><ul class="nav-tabs"><li class="tab active"><a href="#安装蓝牙-1">Gnome3配置蓝牙</a></li><li class="tab"><a href="#安装蓝牙-2">KDE-Plasma配置蓝牙</a></li></ul><div class="tab-content"><div class="tab-pane active" id="安装蓝牙-1"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm bluez bluez-utils pipewire-pulse bluedevil blueman</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> bluetooth.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl start  bluetooth.service</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
上述命令是启动蓝牙服务，<code>archlinux</code>
默认不启用蓝牙服务。然后修改蓝牙配置文件<code>/etc/bluetooth/main.conf</code>，找到<code>AutoEnable=true</code>
取消注释，使其默认启动蓝牙服务。
</p>
</div></div><div class="tab-pane" id="安装蓝牙-2"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm bluez bluez-utils pipewire-pulse bluedevil blueman</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> bluetooth.service</span><br><span class="line"><span class="built_in">sudo</span> systemctl start  bluetooth.service</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
以前的教程中安装的<code>pulseaudio-bluetooth</code>与现在<code>pipewire-pulse</code>冲突，但是当前的<code>pipewire-pulse</code>是自动安装上的，所以从依赖角度讲它是最新的，因此不准备删除，经测试确实效果很好。
</p>
</div></div></div></div>
<h2
id="安装fwupd升级系统固件危险操作">安装<code>fwupd</code>升级系统固件(<i class="fa fa-exclamation-triangle" style="font-size:24px;color:red"></i><label style="color:red">危险操作</label>)</h2>
<p><label style="color:red">非专业人士禁止操作BIOS升级！！</label>
ThinkPad
可以用<code>fwupd</code>来更新固件，如果您的电脑可以正常工作，请勿执行此操作。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S fwupd</span><br><span class="line"><span class="built_in">sudo</span> fwupdmgr get-updates</span><br><span class="line"><span class="built_in">sudo</span> fwupdmgr update</span><br></pre></td></tr></table></figure>
<p>上述第一行是安装软件<code>fwupd</code>,
第二行查看是否存在更新，如果存在更新，则通过第三行的命令来更新固件，注意更新固件时请保持电脑连接电源。</p>
<details>
<summary>
<label style="color:red">固件升级踩坑日记</label>
</summary>
<ul>
<li><p>2023年12月29日,
我执行了固件升级命令<code>sudo fwupdmgr update</code>, 然后我的Thinkpad
T490
就更新了固件，然后直接导致了电脑再次无法唤醒睡眠！同时半解决状态的2242固态硬盘变成睡眠也无法识别出来的无法解决状态。重启电脑后直接进入到了Windows11,
在Windows11下安装Lenovo官方<a
target="_blank" rel="noopener" href="https://think.lenovo.com.cn/support/driver/driverdetail.aspx?DEditid=100457">ThinkVantage</a>,
然后自动检测后升级相应的BIOS组件后终于恢复了睡眠唤醒。经过这件事情，想告诫同学，如果BIOS工作正常，非必要不升级，如果要升级也请切换到Windows下使用官的固件升级软件处理。</p></li>
<li><p>2024年01月30日,
由于升级固件后<code>ArchLinux</code>无法识别<code>2242</code>硬盘，即便是没有升级BIOS前，也是需要休眠后才有识别，使用体验不佳。基于日常办公，<code>Archlinux</code>已经成为我的主力，而<code>Windows11</code>是作为双系统安装的，几乎不使用，所以决定将些<code>2242</code>硬盘做成固态硬盘使用。同时，又测试出，如果在BIOS中开启了<code>CSM</code>兼容模块，则再次出现两个系统都无法休眠唤醒问题，所以需要<label style="color:red">关闭CSM</label>。</p></li>
</ul>
</details>
<h3 id="退出换根并重启">退出换根并重启</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>重新启动后拔掉<code>U盘</code>完成安装。</p>
<hr />
<center>
<i class="fa fa-angle-double-down" style="font-size:48px;color:red"></i><font color="DarkViolet" size="8" >ArchLinux配置流程</font>
</center>
<hr />
<h2 id="基础设置">基础设置</h2>
<h3 id="配置高速dns">配置高速DNS</h3>
<p>要实现快速上网，选择一个高速稳定的DNS是必须的，经过测试在我当前的环境下的最快配置(IPV4不到1ms)为</p>
<table>
<thead>
<tr>
<th>厂家</th>
<th>IPV4</th>
<th>IPV6</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cloudflare</td>
<td>1.1.1.1</td>
<td>2606:4700:4700::1111</td>
</tr>
</tbody>
</table>
<p>请读者根据自己的具体网络环境选择对应的DNS服务器： <a
target="_blank" rel="noopener" href="https://dns.icoa.cn/">免费公共 DNS 服务器大全</a></p>
<h3 id="配置国内镜像源">配置国内镜像源</h3>
<p>在安装阶段我们已经配置了镜像源，但那是在<code>Live</code>系统上做的配置，为了方便安装系统和软件。
安装好的<code>ArchLinux</code>默认镜像源也是由安装阶段所设置的，刚刚安装的镜像与<code>Live</code>系统不
一样，它不包括自动选择镜像的程序<code>reflector</code>,
它是一个<code>Python</code>编写的脚本，会自动从
https://archlinux.org/mirrors/status/
上获取镜像地址，可以通过参数筛选出自己需要的镜像地址。为了方便自己设置，需要先安装一下，然后切换到自己想要的源就可以了。</p>
<figure class="highlight sh"><figcaption><span>切换为国内最快的12个ArchLinux源</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reflector --verbose -c China --latest 12 --<span class="built_in">sort</span> rate --threads 100 --save /etc/pacman.d/mirrorlist</span><br><span class="line"><span class="built_in">sudo</span> pacman -Syu</span><br></pre></td></tr></table></figure>
<h3 id="配置国内cn源">配置国内CN源</h3>
<div class="note primary"><p>Arch Linux 中文社区仓库是由 Arch Linux
中文社区驱动的非官方用户仓库。包含中文用户常用软件、工具、字体/美化包等。</p>
</div>
<ol type="1">
<li><p>在 <code>/etc/pacman.conf</code> 文件末尾添加以下两行
<figure class="highlight sh"><figcaption><span>/etc/pacman.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line">Server = https://repo.archlinuxcn.org/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>安装 <code>archlinuxcn-keyring</code> 包以导入
<code>GPG key</code> <figure class="highlight sh"><figcaption><span>安装archlinuxcn-keyring</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -Syu</span><br><span class="line"><span class="built_in">sudo</span> pacman-key --lsign-key <span class="string">&quot;farseerfc@archlinux.org&quot;</span></span><br><span class="line"><span class="built_in">sudo</span> pacman -S archlinuxcn-keyring</span><br></pre></td></tr></table></figure></p></li>
</ol>
<details>
<summary>
<label style="color:blue">解决archlinuxcn-keyring 无法安装的问题</label>
</summary>
<figure class="highlight sh"><figcaption><span>pacman -Sy archlinuxcn-keyring 出错</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> pacman -Sy archlinuxcn-keyring</span><br><span class="line">:: Synchronizing package databases...</span><br><span class="line"> core is up to <span class="built_in">date</span></span><br><span class="line"> extra is up to <span class="built_in">date</span></span><br><span class="line"> multilib is up to <span class="built_in">date</span></span><br><span class="line"> archlinuxcn                       3.4 MiB   964 KiB/s 00:04 [#################################] 100%</span><br><span class="line">resolving dependencies...</span><br><span class="line">looking <span class="keyword">for</span> conflicting packages...</span><br><span class="line"></span><br><span class="line">Package (1)                      New Version  Net Change  Download Size</span><br><span class="line"></span><br><span class="line">archlinuxcn/archlinuxcn-keyring  20230923-1     0.36 MiB       0.26 MiB</span><br><span class="line"></span><br><span class="line">Total Download Size:   0.26 MiB</span><br><span class="line">Total Installed Size:  0.36 MiB</span><br><span class="line"></span><br><span class="line">:: Proceed with installation? [Y/n] </span><br><span class="line">:: Retrieving packages...</span><br><span class="line"> archlinuxcn-keyring-202309...   262.7 KiB   949 KiB/s 00:00 [#################################] 100%</span><br><span class="line">(1/1) checking keys <span class="keyword">in</span> keyring                               [#################################] 100%</span><br><span class="line">(1/1) checking package integrity                             [#################################] 100%</span><br><span class="line">error: archlinuxcn-keyring: signature from <span class="string">&quot;Jiachen YANG (Arch Linux Packager Signing Key) &lt;farseerfc@archlinux.org&gt;&quot;</span> is marginal trust</span><br><span class="line">:: File /var/cache/pacman/pkg/archlinuxcn-keyring-20230923-1-any.pkg.tar.zst is corrupted (invalid or corrupted package (PGP signature)).</span><br><span class="line">Do you want to delete it? [Y/n] </span><br><span class="line">error: failed to commit transaction (invalid or corrupted package (PGP signature))</span><br><span class="line">Errors occurred, no packages were upgraded.</span><br></pre></td></tr></table></figure>
<p>解决方法为： <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman-key --lsign-key <span class="string">&quot;farseerfc@archlinux.org&quot;</span></span><br></pre></td></tr></table></figure></p>
</details>
<ol start="3" type="1">
<li><p>安装 <code>archlinuxcn-mirrorlist-git</code>
包可以获得一份镜像列表 <figure class="highlight sh"><figcaption><span>安装archlinuxcn-mirrorlist-git</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S archlinuxcn-mirrorlist-git</span><br></pre></td></tr></table></figure>
安装完成后，会生成文件<code>/etc/pacman.d/archlinuxcn-mirrorlist</code>,
其包含最新的国内镜像。</p></li>
<li><p>在 pacman.conf 中直接引入<code>archlinuxcn-mirrorlist</code>
<figure class="highlight sh"><figcaption><span>/etc/pacman.conf末尾追加,同时注释掉Server</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[archlinuxcn]</span><br><span class="line"><span class="comment">#Server = https://repo.archlinuxcn.org/$arch</span></span><br><span class="line">Include = /etc/pacman.d/archlinuxcn-mirrorlist</span><br></pre></td></tr></table></figure></p></li>
<li><p>编辑<code>/etc/pacman.d/archlinuxcn-mirrorlist</code>文件，去掉要引用的源前面的注释符即可。</p></li>
</ol>
<h3 id="配置arch4edu源">配置arch4edu源</h3>
<div class="note primary"><p><code>Arch4edu</code>是面向高校用户推出的非官方软件仓库，支持<code>Arch Linux</code>
和 <code>Arch Linux ARM</code>，
主要包含高校用户常用的科研、教学及开发软件。</p>
</div>
<ol type="1">
<li><p>导入 GPG key <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman-key --recv-keys 7931B6D628C8D3BA</span><br><span class="line"><span class="built_in">sudo</span> pacman-key --finger 7931B6D628C8D3BA</span><br><span class="line"><span class="built_in">sudo</span> pacman-key --lsign-key 7931B6D628C8D3BA</span><br></pre></td></tr></table></figure></p></li>
<li><p>在<code>/etc/pacman.conf</code>文件末尾添加以下内容
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[arch4edu]</span><br><span class="line"><span class="comment"># Server = https://mirrors.cernet.edu.cn/arch4edu/$arch</span></span><br><span class="line">Include = /etc/pacman.d/edumirror</span><br></pre></td></tr></table></figure></p></li>
</ol>
<p>其中<code>edumirror</code>的内容为：</p>
<figure class="highlight sh"><figcaption><span>/etc/pacman.d/edumirror</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/arch4edu/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.bfsu.edu.cn/arch4edu/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirror.nju.edu.cn/arch4edu/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirror.nyist.edu.cn/arch4edu/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirror.iscas.ac.cn/arch4edu/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.cernet.edu.cn/arch4edu/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>
<div class="note primary"><ul>
<li>镜像源<a
target="_blank" rel="noopener" href="https://help.mirrors.cernet.edu.cn/arch4edu/"><code>CERNET</code>-校园网联合镜像站（mirrorz-302智能选择）</a>,
由于他的自动选择属性以及使用<code>sudo</code>的安全属性，所以我最初设置了<code>Server = https://mirrors.cernet.edu.cn/arch4edu/$arch</code>。</li>
<li>2025年09月30日,
修改为<code>Include</code>方式引入多个<code>arch4edu</code>镜像源,文件源自于<code>CERNET</code>。</li>
</ul>
</div>
<ol start="3" type="1">
<li><p>安装<code>pkgstats</code>帮助了解我们维护包的均势。
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S pkgstats</span><br></pre></td></tr></table></figure></p></li>
<li><p>其他<code>arch4edu</code>镜像：<a
target="_blank" rel="noopener" href="https://github.com/arch4edu/mirrorlist/blob/master/mirrorlist.arch4edu">arch4edu-mirrorlist</a></p></li>
</ol>
<details>
<summary>
<label style="color:blue">arch4edu详情,对于搞科研的您相当重要！</label>
</summary>
<p>Arch4edu 一个面向全球高校用户的社区源,
初衷是实验室的服务器都有装同一批软件的需求，后来干脆就做成软件源了. 支持
Arch Linux 和 Arch Linux ARM，
主要包含高校用户常用的科研、教学及开发软件。现在arch4edu主要涵盖以下方向的包:</p>
<ul>
<li>机器学习工具：tensorflow, caffe, torch等等</li>
<li>IDE及编辑器：android-studio, pycharm, vs code, sublime等等</li>
<li>Android开发：android-studio, android-sdk, android-ndk等等</li>
<li>语音信号处理：kaldi, cmusphinx, opensmile等等</li>
<li>图像处理：opencv-git</li>
<li>通用：anaconda, zotero, atlas-lapack, openblas等等</li>
</ul>
共104个包。理论上说至少大学生常用的，不限于上述方向的包都可以加，欢迎大家发<code>Package Request</code>.
现在的更新频率是日更。由于结构是仿照archlinuxcn搭建的，所以git版本的包会及时更新。
</details>
<h3 id="安装中文字体">安装中文字体</h3>
<p>安装windows10下拷贝来的fonts字体、founder及adobe
等到系统的指定目录<code>/usr/share/fonts/</code>:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r ./Fonts/Adobe/ /usr/share/fonts/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r ./Fonts/windows10/ /usr/share/fonts/</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> -r ./Fonts/founder_GBK/ /usr/share/fonts/</span><br><span class="line"><span class="built_in">sudo</span> fc-cache -vf</span><br></pre></td></tr></table></figure>
<h3 id="设置系统为中文">设置系统为中文</h3>
<p>要设置整个系统使用的区域设置，需要在 <code>/etc/locale.conf</code>
中写入 <code>LANG</code> 变量，以下的 <code>zh_CN.UTF-8</code> 应为
<code>/etc/locale.gen</code> 中某个未注释条目的第一列：</p>
<figure class="highlight sh"><figcaption><span>/etc/locale.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#LANG=&quot;C.UTF-8&quot;</span></span><br><span class="line">LANG=zh_CN.UTF-8</span><br></pre></td></tr></table></figure>
<p>由于前面已经配置好了语言，据<a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/Locale#Gnome-terminal_/_rxvt-unicode_不支持_UTF-8">Local-ArchLinux</a>,
当做完以上配置，同时重起系统后<code>设置</code>→<code>区域和语言</code>→<code>语言</code>设置成<code>简体中文</code>,
后系统仍然不能完全汉化，对于<code>KDE Plasma</code>
则<label style="color:red">删除~/.config/plasma-localerc</label>,
这一点本人测试成功。</p>
<h3
id="全局配置git为github.com镜像">全局配置<code>git</code>为<code>github.com</code>镜像</h3>
<ol type="1">
<li><p>安装<code>git</code> <figure class="highlight sh"><figcaption><span>前面已经安装，若否请执行命令：</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pacman -S git curl</span><br></pre></td></tr></table></figure></p></li>
<li><p>修改全局配置文件<code>~/.gitconfig</code> <figure class="highlight sh"><figcaption><span>~/.gitconfig</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[user]</span><br><span class="line">	email = fengzhenhua@outlook.com</span><br><span class="line">	name = fengzhenhua</span><br><span class="line">: [url <span class="string">&quot;https://521github.com/&quot;</span>]</span><br><span class="line">[url <span class="string">&quot;https://githubfast.com/&quot;</span>]</span><br><span class="line">; [url <span class="string">&quot;https://kkgithub.com/&quot;</span>]</span><br><span class="line">; [url <span class="string">&quot;https://github.hscsec.cn/&quot;</span>]</span><br><span class="line">; [url <span class="string">&quot;https://gitclone.com/github.com/&quot;</span>]</span><br><span class="line">	insteadOf = https://github.com/</span><br></pre></td></tr></table></figure></p></li>
</ol>
<div class="note primary"><p>注意：此配置全局<code>git</code>为<code>github.com</code>镜像是最简单的一劳永逸的方法，稍微麻烦但更加有效的方法参考：<a
href="/2023/10/11/使用Git下载Github资源的有效方法">使用Git下载Github资源的有效方法</a>
.
使用时请将我的配置中的<code>email</code>和<code>name</code>替换成您自己的<code>github</code>帐号，方便使用<code>git clone git@github.com:</code>等命令。</p>
</div>
<h3 id="安装paru或yay">安装<code>paru</code>或<code>yay</code></h3>
<h4
id="安装paru或yay-最新的paru表现更好建议安装">安装<code>paru</code>或<code>yay</code>,
最新的<code>paru</code>表现更好,建议安装。</h4>
<div class="tabs" id="安装`aur`助手"><ul class="nav-tabs"><li class="tab active"><a href="#安装`aur`助手-1">paru</a></li><li class="tab"><a href="#安装`aur`助手-2">yay</a></li></ul><div class="tab-content"><div class="tab-pane active" id="安装`aur`助手-1"><ol type="1">
<li>安装<code>paru</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman --needed --noconfirm -S paru</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>使用<code>paru</code>时跳过审阅并自动确认安装</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --needed --noconfirm -S foobar</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>关闭默认审阅流程的方法: 在配置文件<code>/etc/paru.conf</code>
内增加<code>SkipReview</code>。参考 <a
href="/2023/12/11/Paru默认关闭审阅流程">Paru默认关闭审阅流程</a></li>
</ol></div><div class="tab-pane" id="安装`aur`助手-2"><ul>
<li>在<code>archlinuxcn</code>源安装</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S yay</span><br></pre></td></tr></table></figure>
<ul>
<li>编译安装</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pacman --needed --noconfirm -S git base-devel</span><br><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/yay-bin.git</span><br><span class="line"><span class="built_in">cd</span> yay-bin</span><br><span class="line">makepkg -si</span><br></pre></td></tr></table></figure>
<ul>
<li>源码安装</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://aur.archlinux.org/yay.git</span><br><span class="line"><span class="built_in">cd</span> yay</span><br><span class="line">makepkg -si</span><br></pre></td></tr></table></figure>
<p>在2022年7月20日安装ArchLinux时发现如此安装不成功，解决方案参考：<a
target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/439805266">yay安装失败的解决方案</a>。使用go语言换源解决，临时换源解决方案代码如下</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ go <span class="built_in">env</span> -w GO111MODULE=on</span><br><span class="line">$ go <span class="built_in">env</span> -w GOPROXY=https://goproxy.cn,direct</span><br><span class="line">$ <span class="built_in">export</span> GO111MODULE=on</span><br><span class="line">$ <span class="built_in">export</span> GOPROXY=https://goproxy.cn</span><br><span class="line">$ makepkg -si</span><br><span class="line"></span><br></pre></td></tr></table></figure></div></div></div>
<h4
id="配置paru和yay多线程下载">配置<code>paru</code>和<code>yay</code>多线程下载</h4>
<p>使用本人定制的<code>axel</code>多线程下载工具可以提高下载速度，获得更佳的使用体验:</p>
<figure class="highlight sh"><figcaption><span>配置Paru和yay多线程下载</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> curl -o ParuAxel.7z https://gitlab.com/fengzhenhua/zipconf/-/raw/main/ParuAxel.7z\?inline\=<span class="literal">false</span></span><br><span class="line">unar ParuAxel.7z</span><br><span class="line"><span class="built_in">cd</span> ./ParuAxel</span><br><span class="line"><span class="built_in">chmod</span> +x install.sh</span><br><span class="line">./install.sh</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">rm</span> -rf ParuAxel.7z ParuAxel</span><br></pre></td></tr></table></figure>
<h4 id="paru-高级用户配置">Paru 高级用户配置</h4>
<p><strong>基本命令</strong></p>
<ul>
<li>paru <用户输入>：搜索并安装“用户输入”</li>
<li>paru -：paru -Syu 的别名</li>
<li>paru -Sua：仅升级 AUR 包。</li>
<li>paru -Qua：打印可用的 AUR 更新</li>
<li>paru -Gc <用户输入>：显示“用户输入”的 AUR 评论</li>
</ul>
<p><strong>编辑 PKGBUILD （对于高级用户）</strong></p>
<p>如果你是一个有经验的 Linux 用户，你可以通过 paru 编辑 AUR
包。要做到这一点，你需要在 paru
配置文件中启用该功能，并设置你所选择的文件管理器。在此例中，我将使用配置文件中的默认值，即
vifm 文件管理器。如果你还没有使用过它，你可能需要安装它。</p>
<ul>
<li><p>安装<code>vifm</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S vifm</span><br></pre></td></tr></table></figure></p></li>
<li><p>修改配置文件<code>/etc/paru.conf</code>,取消注释
<figure class="highlight sh"><figcaption><span>/etc/paru.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[bin]</span><br><span class="line">FileManager = vifm</span><br><span class="line"><span class="comment">#MFlags = --skippgpcheck</span></span><br><span class="line"><span class="comment">#Sudo = doas</span></span><br></pre></td></tr></table></figure></p></li>
</ul>
<div class="note primary"><p>系统会提示你审查该软件包→输入 Y 并按下回车→从文件管理器中选择
PKGBUILD
→按下回车查看软件包→做出修改。你所做的任何改变都将是永久性的，下次升级软件包时，你的改变将与上游软件包合并。<label style="color:red">对于不懂的用户，请慎用此功能</label>。</p>
</div>
<h3 id="配置桌面环境">配置桌面环境</h3>
<p>桌面环境选择请参考：<a
target="_blank" rel="noopener" href="https://www.sysgeek.cn/best-linux-desktop-environments/">8 款最佳
Linux 桌面环境推荐（2024）</a></p>
<div class="tabs" id="配置桌面环境"><ul class="nav-tabs"><li class="tab active"><a href="#配置桌面环境-1">Gnome3</a></li><li class="tab"><a href="#配置桌面环境-2">KDE-Plasma6</a></li><li class="tab"><a href="#配置桌面环境-3">KDE-Plasma5</a></li></ul><div class="tab-content"><div class="tab-pane active" id="配置桌面环境-1"><ul>
<li>安装<code>gnome3</code>必备插件</li>
</ul>
<p>在安装<code>gnome</code>插件前，需要先安装浏览器插件才能通过<a
target="_blank" rel="noopener" href="https://extensions.gnome.org/">https://extensions.gnome.org</a>
安装插件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --needed --noconfirm -S gnome-browser-connector gnome-shell-extension-hidetopbar-git gnome-shell-extension-dash-to-dock gnome-shell-extension-kimpanel-git gnome-shell-extension-blur-my-shell-git</span><br></pre></td></tr></table></figure>
<div class="note primary">
<ul>
<li>
2022年11月01日插件<code>chrome-gnome-shell</code>更名为<code>gnome-browser-connector</code>
</li>
<li>
<code>gnome-browser-connector</code>
用于配合<code>firefox</code>安装<code>gnome</code>拓展
</li>
<li>
<code>hide-top-bar</code> 自动隐藏顶部的顶栏
</li>
<li>
<code>dash-to-dock</code> 类似于苹果系统的程序坞
</li>
<li>
<code>kimpanel</code> 输入法面板，提供与苹果系统相当的界面
</li>
<li>
<code>blue-my-shell</code>
令顶栏和程序坞随系统变色，同时按下<code>win</code>徽标键后界面与苹果系统相当
</li>
</ul>
</div>
<ul>
<li>安装<code>Gnome</code> 主题</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --needed --noconfirm -S whitesur-cursor-theme-git phinger-cursors</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/vinceliuice/WhiteSur-gtk-theme.git --depth=1</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/vinceliuice/WhiteSur-icon-theme.git --depth=1</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/vinceliuice/WhiteSur-wallpapers.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/vinceliuice/grub2-themes.git</span><br><span class="line">./WhiteSur-gtk-theme/tweaks.sh -f alt</span><br><span class="line"><span class="built_in">sudo</span> ./WhiteSur-gtk-theme/tweaks.sh -g</span><br><span class="line">./WhiteSur-gtk-theme/install.sh --shell -i apple      <span class="comment"># 默认主题, 但菜单是apple</span></span><br><span class="line"><span class="built_in">sudo</span> ./WhiteSur-icon-theme/install.sh</span><br></pre></td></tr></table></figure>
<div id="gnome-theme" class="tabs">
<ul class="nav-tabs">
<li class="tab active">
<a href="#gnome-theme-1">3840x2160 分辨率</a>
</li>
<li class="tab">
<a href="#gnome-theme-2">1920x1080 分辨率</a>
</li>
</ul>
<div class="tab-content">
<div id="gnome-theme-1" class="tab-pane active">
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./WhiteSur-gtk-theme/install.sh --shell -i apple -HD -c light</span><br><span class="line">./WhiteSur-wallpapers/install-wallpapers.sh -s 4k</span><br><span class="line"><span class="built_in">sudo</span> ./WhiteSur-wallpapers/install-gnome-backgrounds.sh -s 4k</span><br><span class="line"><span class="built_in">sudo</span> ./grub2-themes/install.sh -t whitesur -i whitesur -s 4k</span><br></pre></td></tr></table></figure>
<p>
<code>GRUB</code>的<code>4k</code>字体调大配置参考：<a
href="/2024/10/16/Linux中Whitesur主题切换4k显示器设置/">Linux中Whitesur主题切换4k显示器设置</a>
</p>
</div>
<div id="gnome-theme-2" class="tab-pane">
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./WhiteSur-gtk-theme/install.sh --shell -i apple</span><br><span class="line">./WhiteSur-wallpapers/install-wallpapers.sh</span><br><span class="line"><span class="built_in">sudo</span> ./WhiteSur-wallpapers/install-gnome-backgrounds.sh</span><br><span class="line"><span class="built_in">sudo</span> ./grub2-themes/install.sh -t whitesur</span><br></pre></td></tr></table></figure>
</div>
</div>
</div>
<div class="note primary">
<ul>
<li>
2024年09月03日,
升级<code>WhiteSur-gtk-theme</code>之后发现修改部分较多，其中<code>install.sh
-i apple</code>调整为<code>install.sh --shell -i apple</code>
</li>
<li>
2024年10月17日,
升级了<code>4k</code>屏幕，光标主题使<code>phinger-cursors</code>更佳，使用<code>whitesur-cursor-theme-git</code>有时候会莫名其妙的变大，于是做出了替换。
</li>
<li>
2024年11月28日,
删除<code>paru</code>安装的<code>whitesur-icon-theme-git</code>,因为其包含的图标不全，改为直接使用<code>github</code>源中的版本.
</li>
<li>
2025年03月12日,
发现在<code>设置</code>→<code>外观</code>→<code>样式</code>中的颜色选项是空白的，于是在<code>gtk</code>主题下执行<code>./install
-l</code>修复<code>libadwaita</code>后问题解决。
</li>
<li>
2025年04月05日,
<code>whitesur-cursor-theme-git</code>修复了<code>4k</code>支持，为了使主题一致，可以从<code>phinger-cursors</code>切换回来了。
</li>
<li>
2025年09月29日,
发现安装<code>papers</code>后，阅读<code>pdf</code>文件时不显示分隔页，经多次测试原因在于安装<code>WhiteSur-gtk-theme</code>时采用了选项<code>-l</code>,
当去掉这一选项后恢复正常。
</li>
</ul>
</div>
<details>
<summary>
<code>./install.sh [OPTIONS...]</code> <strong>(点击打开)</strong>
</summary>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-d, --dest DIR</span><br><span class="line"> Set destination directory. Default is <span class="string">&#x27;/home/USER/.themes&#x27;</span></span><br><span class="line"></span><br><span class="line">-n, --name NAME</span><br><span class="line"> Set theme name. Default is <span class="string">&#x27;WhiteSur&#x27;</span></span><br><span class="line"></span><br><span class="line">-o, --opacity [normal|solid]</span><br><span class="line"> Set theme opacity variants. Repeatable. Default is all variants</span><br><span class="line"></span><br><span class="line">-c, --color [Light|Dark]</span><br><span class="line"> Set theme color variants. Repeatable. Default is all variants</span><br><span class="line"></span><br><span class="line">-a, --alt [normal|alt|all]</span><br><span class="line"> Set window control buttons variant. Repeatable. Default is <span class="string">&#x27;normal&#x27;</span></span><br><span class="line"></span><br><span class="line">-t, --theme [default|blue|purple|pink|red|orange|yellow|green|grey|all]</span><br><span class="line"> Set theme accent color. Repeatable. Default is BigSur-like theme</span><br><span class="line"></span><br><span class="line">-m, --monterey </span><br><span class="line"> Set to MacOS Monterey style. </span><br><span class="line"></span><br><span class="line">-N, --nautilus [stable|normal|mojave|glassy]</span><br><span class="line"> Set Nautilus style. Default is BigSur-like style (stabled sidebar)</span><br><span class="line"></span><br><span class="line">-l, --libadwaita </span><br><span class="line"> Install theme into gtk4.0 config <span class="keyword">for</span> libadwaita. Default is dark version</span><br><span class="line"></span><br><span class="line">-HD, --highdefinition </span><br><span class="line"> Set to High Definition size. Default is laptop size</span><br><span class="line"></span><br><span class="line">--shell, --gnome-shell </span><br><span class="line"> Tweaks <span class="keyword">for</span> gnome-shell. Options:</span><br><span class="line"></span><br><span class="line">   1. -i, -icon [apple|simple|gnome|ubuntu|tux|<span class="built_in">arch</span>|manjaro|fedora|debian|void|opensuse|popos|mxlinux|zorin|budgie|gentoo]</span><br><span class="line">   Set gnome-shell panel <span class="string">&#x27;Activities&#x27;</span> icon. Default is <span class="string">&#x27;standard&#x27;</span></span><br><span class="line"></span><br><span class="line">   2. -b, -background [default|blank|IMAGE_PATH]</span><br><span class="line">   Set gnome-shell background image. Default is BigSur-like wallpaper</span><br><span class="line"></span><br><span class="line">   3. -p, -panelopacity [default|30|45|60|75]</span><br><span class="line">   Set gnome-shell panel transparency. Default is 15%</span><br><span class="line"></span><br><span class="line">   4. -h, -height [default|smaller|bigger]</span><br><span class="line">   Set gnome-shell panel height size. Default is 32px</span><br><span class="line"></span><br><span class="line">   5. -g, -general, -normal </span><br><span class="line">   Set gnome-shell show apps button style to general/normal. Default is BigSur</span><br><span class="line"></span><br><span class="line">   6. -s, -smaller </span><br><span class="line">   Set gnome-shell font size to smaller (10pt). Default is 11pt</span><br><span class="line"></span><br><span class="line">--round, --roundedmaxwindow </span><br><span class="line"> Set maximized window to rounded. Default is square</span><br><span class="line"></span><br><span class="line">--right, --rightplacement </span><br><span class="line"> Set Nautilus title button placement to right. Default is left</span><br><span class="line"></span><br><span class="line">--black, --blackfont </span><br><span class="line"> Set panel font color to black. Default is white</span><br><span class="line"></span><br><span class="line">--darker, --darkercolor </span><br><span class="line"> Install darker <span class="string">&#x27;WhiteSur&#x27;</span> dark themes. </span><br><span class="line"></span><br><span class="line">--nord, --nordcolor </span><br><span class="line"> Install <span class="string">&#x27;WhiteSur&#x27;</span> Nord ColorScheme themes. </span><br><span class="line"></span><br><span class="line">--dialog, --interactive </span><br><span class="line"> Run this installer interactively, with dialogs. </span><br><span class="line"></span><br><span class="line">--silent-mode </span><br><span class="line"> Meant <span class="keyword">for</span> developers: ignore any confirm prompt and params become more strict. </span><br><span class="line"></span><br><span class="line">-r, --remove, -u, --uninstall </span><br><span class="line"> Remove all installed WhiteSur themes. </span><br><span class="line"></span><br><span class="line">-h, --<span class="built_in">help</span> </span><br><span class="line"> Show this <span class="built_in">help</span>. </span><br><span class="line"></span><br></pre></td></tr></table></figure>
</details>
<div class="note primary">
<p>
2024年08月02日,
<code>paru</code>更新时提示<code>whitesur-icon-theme-git</code>无人维护，于是更新为<code>whitesur-icon-theme</code>.
2024年08月05日,
<code>firefox</code>的<code>alt</code>主题，最上面为地址栏，下面是并排的标签列，更中合理，所以本文默认采用了<code>firefox
alt</code>主题。 2024年08月25日,
修复<code>Nautilus</code>主题关闭、最大化、最小化等按钮无法切换为苹果主题的<code>bug</code>,
方法即是<code>./WhiteSur-gtk-theme/install.sh -l</code>,
默认安装暗色主题，要安装明亮主题执行<code>./WhiteSur-gtk-theme/install.sh
-l -c Light</code>
</p>
</div></div><div class="tab-pane" id="配置桌面环境-2"><figure class="highlight sh"><figcaption><span>Paru 安装Sonoma皮肤</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --needed --noconfirm -S whitesur-icon-theme-git</span><br><span class="line">paru --skipreview --needed --noconfirm -S whitesur-cursor-theme-git</span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/vinceliuice/MacSonoma-kde.git</span><br><span class="line"><span class="built_in">cd</span> ./MacSonoma-kde</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure>
<p>
存在的问题：
</p>
<ol type="1">
<li>
<p>
sddm主题不能正常工作，和之前遇到的问题类似，但是使用默认的<code>Breeze
微风</code>主题，更改其背景图片为<code>MacSonoma-kde/sddm/images/Background-Light.jpg</code>后效果相差不大，区别在登录框<code>Breeze
微风</code>是直角，而<code>MacSonoma-kde</code>的为圆解，这点等待<code>MacSonoma-kde</code>主题官方修复。
</p>
</li>
<li>
<p>
grub尚没有推出<code>MacSonoma-kde</code>对应的主题,
所以导致相似度不能100%还原，于是也可以采用类似的方法安装<code>whitesur</code>的<code>grub</code>主题，然后将背景换成<code>Sonoma</code>的背景即可。
</p>
</li>
<li>
<p>
替换<code>grub-WhiteSur</code>主题的背景图片为<code>MacSonoma-kde/sddm/images/Background-Light.jpg</code>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cp</span> ~/MacSonoma-kde/sddm/images/Background-Light.jpg /boot/grub/themes/whitesur/background.jpg</span><br></pre></td></tr></table></figure>
</p>
</li>
<li>
<p>
<code>系统设置</code>→<code>颜色和主题</code>→<code>图标</code>→<code>WhiteSur-light</code>,
这样子系统显示为通常的Mac图标。
</p>
</li>
</ol>
<details>
<summary>
<label style="color:red">踩坑日记</label>
</summary>
<ul>
<li>
<p>
2024年03月16日发现在Plasma6的<code>系统配置</code>→<code>全局主题</code>→<code>获取新全局主题</code>中出现了<code>Apple
Sonoma Light</code>和<code>Apple Sonoma
Dark</code>两款高仿苹果主题，于是对两款主题进行了测试，发现基本上可用，但是细节上需要调整。
</p>
</li>
<li>
<p>
2024年03月08日, archlinux 系统升级后KDE-Plasma5自动升级为KDE-Plasma6, <a
target="_blank" rel="noopener" href="https://github.com/vinceliuice/WhiteSur-kde">WhitSur-kde</a>主题有些不适配Plasma6，于是决定删除WhitSur主题，使用Plasma6的默认主题。
</p>
</li>
</ul>
</details></div><div class="tab-pane" id="配置桌面环境-3"><p>
对于桌面环境的配置，主要是配置<code>MacOS</code>的<code>WhitSur</code>主题，由于已经配置了<code>ArchLinux</code>的<code>CN</code>源和安装了<code>Paru</code>也可以使用<code>Aur</code>所以使用<code>Pacman</code>或<code>Paru</code>来安装皮肤比自行下载手动安装要好。本教程使用<code>Aur</code>源安装：
</p>
<figure class="highlight sh"><figcaption><span>paru安装WhitSur皮肤</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --needed --noconfirm -S plasma5-themes-whitesur-git</span><br><span class="line">paru --skipreview --needed --noconfirm -S whitesur-icon-theme-git</span><br><span class="line">paru --skipreview --needed --noconfirm -S whitesur-cursor-theme-git</span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/vinceliuice/grub2-themes.git</span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/vinceliuice/WhiteSur-gtk-theme.git</span><br><span class="line"><span class="built_in">chmod</span> +x ./grub2-themes/*.sh</span><br><span class="line"><span class="built_in">chmod</span> +x ./WhiteSur-gtk-theme/*.sh</span><br><span class="line"><span class="built_in">cd</span> ./grub2-themes/</span><br><span class="line">./install.sh -b -t whitesur -i whitesur -s 1080p</span><br><span class="line"><span class="built_in">cd</span> ../WhiteSur-gtk-theme</span><br><span class="line">./tweaks.sh -f </span><br></pre></td></tr></table></figure>
<p>
有时候在系统更新后<code>sddm</code>主题不再生效，此时需要重新安装一下<code>sddm</code>主题，而<code>sddm</code>主题位于
<a
target="_blank" rel="noopener" href="https://github.com/vinceliuice/WhiteSur-kde">WhiteSur-kde</a>中的文件夹<code>sddm</code>中，于是先克隆下这个文件目录，即
</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://kkgithub.com/vinceliuice/WhiteSur-kde.git</span><br><span class="line"><span class="built_in">cd</span> ./WhiteSur-kde/sddm</span><br><span class="line"><span class="built_in">sudo</span> ./install</span><br></pre></td></tr></table></figure>
<p>
之后<code>sddm</code>主题就再次启用了。
</p>
<div class="note primary">
<p>
一般安装好后系统自动配置好了，同时如果有更新也可以及时更新。需要做的工作:
</p>
<ul>
<li>
启用全局主题: <code>系统设置</code>→ <code>外观</code>
→<code>全局主题</code>→<code>WhitSur</code>(选中桌面和窗口布局)。
之后系统的桌面就配置成<code>WhitSur</code>主题了，但是桌面背景还是黑色的，说明这几个包设计的不是很完善，这时只要右键设置背景图片就可以了。
</li>
<li>
启用登录屏:
<code>设置</code>→<code>开机与关机</code>→<code>登录屏幕(SDDM)</code>,
选择<code>WhitSur</code>
</li>
<li>
配置启动<code>Latte</code>停靠栏:
在<code>Latte</code>上右键→配置<code>Latte</code>，选中开机启动。然后对应<code>布局编辑器</code>选择<code>WhitSur</code>。
</li>
<li>
配置状态状态栏，安装好主题后状态栏并没有配置好，配置步骤：<code>状态栏上右键</code>
→<code>编辑模式</code>→<code>更多选项</code> →<code>最大化面板</code>
,否则状态栏上的内容会显示不出来。
</li>
<li>
配置<code>Fcitx5</code>使用自带<a
target="_blank" rel="noopener" href="https://github.com/search?q=fcitx5+theme&amp;type=Repositories">皮肤</a>，完成第一步时其实就可以了。如果第一步没有<code>输入法面板</code>,
那需要添加<code>系统托盘</code>,此时显示就正常了。参考<a
href="/2023/12/12/KDE下设置Fcitx5">KDE下设置Fcitx5</a>
</li>
<li>
手动安装<code>WhitSur</code>主题请参考: <a
href="/2023/10/12/ArchLinux安装Plasma5">ArchLinux安装Plasma5</a>
</li>
<li>
由于<code>Grub</code>主题使用<code>paru</code>安装时不能自动配置，所以改成了手动安装。而<code>WhiteSur-gtk-theme</code>仅用来设置<code>firefox</code>主题，需要<label style="color:red">提前关闭Firefox</label>再安装主题。
</li>
</ul>
</div></div></div></div>
<h3 id="关闭文件索引">关闭文件索引</h3>
<div class="note primary"><p>由于文件索引会消耗大量的资源，这就导致了电脑温度过高，风扇逛转不停，而现实的使用过程中对于搜索的要求并不高，一般人都能够合理的安排自己的文件位置。于是关闭这项服务可以更好的发挥计算机性能，总体来讲利大于弊。</p>
</div>
<div class="tabs" id="关闭文件索引"><ul class="nav-tabs"><li class="tab active"><a href="#关闭文件索引-1">关闭Gnome3的文件索引</a></li><li class="tab"><a href="#关闭文件索引-2">关闭KDE的文件索引</a></li></ul><div class="tab-content"><div class="tab-pane active" id="关闭文件索引-1"><ol type="1">
<li>使用<code>gsettings</code>禁用<code>tracker-miner</code>应用
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gsettings set org.freedesktop.Tracker3.Miner.Files crawling-interval -2</span><br><span class="line">gsettings set org.freedesktop.Tracker3.Miner.Files enable-monitors false</span><br></pre></td></tr></table></figure></li>
</ol>
<div class="note primary">
<p>
在Gnome45之前是命令<code>Tracker</code>, 之后是<code>Tracker3</code>,
于是2024年04月15日之后的新系统则用最新的命令。
</p>
</div>
<ol start="2" type="1">
<li>或者禁止<code>tracker-*</code>软件启动 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i &quot;s/X-GNOME-Autostart-enabled=true/X-GNOME-Autostart-enabled=false/g&quot; /etc/xdg/autostart/tracker-*.desktop</span><br><span class="line">tracker reset -sr</span><br></pre></td></tr></table></figure></li>
</ol>
<div class="note primary">
<p>
在Gnome45之前清除索引命令为<code>tracker reset --hard</code>,
之后的命令为<code>tracker3 reset -sr</code>,
于是2024年04月15日之后的新系统必用最新的命令。
</p>
</div></div><div class="tab-pane" id="关闭文件索引-2"><ol type="1">
<li><p>使用命令关闭 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">balooctl <span class="built_in">disable</span></span><br><span class="line">balooctl <span class="built_in">suspend</span></span><br><span class="line">balooctl status</span><br></pre></td></tr></table></figure></p></li>
<li><p>通过图形界面关闭：点击<code>系统设置</code>→<code>搜索</code>→<code>文件搜索</code>→<code>去掉启用文件索引</code>前的对号→右下角<code>应用</code></p></li>
</ol></div></div></div>
<h3 id="删除多余的efi启动项">删除多余的<code>EFI</code>启动项</h3>
<p>有时候重装系统的时候为了保留原来的启动项而不对<code>EFI</code>分区重新格式化，这导致了每安装一次系统都会在<code>EFI</code>分区留下一下之前的启动项。这时为了纯净可以删除之前的启动项，不过一定要仔细判别，不要删错了文件。文件目录在</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/boot/efi/EFI</span><br></pre></td></tr></table></figure>
<h3 id="linux修改启动选项grub">Linux修改启动选项<code>grub</code></h3>
<figure class="highlight bash"><figcaption><span>/boot/grub/grub.cfg</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># DO NOT EDIT THIS FILE</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># It is automatically generated by grub-mkconfig using templates</span></span><br><span class="line"><span class="comment"># from /etc/grub.d and settings from /etc/default/grub</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### WindowsManager删除多余的启动项 ###</span></span><br><span class="line"></span><br><span class="line">1. 打开电脑并进入电脑桌面。</span><br><span class="line">2. Win+R调出运行窗口，输入msconfig。</span><br><span class="line">3. 点击打开，进入系统配置，然后打开引导选项卡。</span><br><span class="line">4. 在这里，您可以看到所有的启动项。选中不需要的启动项，点击下面的删除按钮即可。</span><br><span class="line">5. 删除完成后，点击确定并重启计算机，多余的启动项就不会再出现。</span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/00_header ###</span></span><br><span class="line">insmod part_gpt</span><br><span class="line">insmod part_msdos</span><br><span class="line"><span class="keyword">if</span> [ -s <span class="variable">$prefix</span>/grubenv ]; <span class="keyword">then</span></span><br><span class="line">  load_env</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span> ] ; <span class="keyword">then</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;<span class="variable">$&#123;next_entry&#125;</span>&quot;</span></span><br><span class="line">   <span class="built_in">set</span> next_entry=</span><br><span class="line">   save_env next_entry</span><br><span class="line">   <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">   <span class="built_in">set</span> default=<span class="string">&quot;0&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="string">&quot;<span class="variable">$&#123;feature_menuentry_id&#125;</span>&quot;</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;--id&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  menuentry_id_option=<span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> menuentry_id_option</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> saved_entry=<span class="string">&quot;<span class="variable">$&#123;prev_saved_entry&#125;</span>&quot;</span></span><br><span class="line">  save_env saved_entry</span><br><span class="line">  <span class="built_in">set</span> prev_saved_entry=</span><br><span class="line">  save_env prev_saved_entry</span><br><span class="line">  <span class="built_in">set</span> boot_once=<span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> savedefault &#123;</span><br><span class="line">  <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$&#123;boot_once&#125;</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    saved_entry=<span class="string">&quot;<span class="variable">$&#123;chosen&#125;</span>&quot;</span></span><br><span class="line">    save_env saved_entry</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> load_video &#123;</span><br><span class="line">  <span class="keyword">if</span> [ x<span class="variable">$feature_all_video_module</span> = xy ]; <span class="keyword">then</span></span><br><span class="line">    insmod all_video</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    insmod efi_gop</span><br><span class="line">    insmod efi_uga</span><br><span class="line">    insmod ieee1275_fb</span><br><span class="line">    insmod vbe</span><br><span class="line">    insmod vga</span><br><span class="line">    insmod video_bochs</span><br><span class="line">    insmod video_cirrus</span><br><span class="line">  <span class="keyword">fi</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_default_font_path</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">   font=unicode</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">insmod part_gpt</span><br><span class="line">insmod ext2</span><br><span class="line">search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 143fbcc6-9ae2-4a88-ad96-12c7f3de3d95</span><br><span class="line">    font=<span class="string">&quot;/usr/share/grub/unicode.pf2&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> loadfont <span class="variable">$font</span> ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> gfxmode=auto</span><br><span class="line">  load_video</span><br><span class="line">  insmod gfxterm</span><br><span class="line">  <span class="built_in">set</span> locale_dir=<span class="variable">$prefix</span>/locale</span><br><span class="line">  <span class="built_in">set</span> lang=zh_CN</span><br><span class="line">  insmod gettext</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">terminal_input console</span><br><span class="line">terminal_output gfxterm</span><br><span class="line">insmod part_gpt</span><br><span class="line">insmod ext2</span><br><span class="line">search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 143fbcc6-9ae2-4a88-ad96-12c7f3de3d95</span><br><span class="line">insmod gfxmenu</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/Poppins-14.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/Poppins-16.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/Poppins-18.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/Poppins-20.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/Poppins-48.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/terminus-12.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/terminus-14.pf2</span><br><span class="line">loadfont (<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/terminus-16.pf2</span><br><span class="line">insmod png</span><br><span class="line"><span class="built_in">set</span> theme=(<span class="variable">$root</span>)/usr/share/grub/themes/monterey-grub-theme/theme.txt</span><br><span class="line"><span class="built_in">export</span> theme</span><br><span class="line"><span class="keyword">if</span> [ x<span class="variable">$feature_timeout_style</span> = xy ] ; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">set</span> timeout_style=menu</span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="comment"># Fallback normal timeout code in case the timeout_style feature is</span></span><br><span class="line"><span class="comment"># unavailable.</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">set</span> <span class="built_in">timeout</span>=5</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/00_header ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/10_linux ###</span></span><br><span class="line">menuentry <span class="string">&#x27;Arch Linux&#x27;</span> --class <span class="built_in">arch</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-simple-143fbcc6-9ae2-4a88-ad96-12c7f3de3d95&#x27;</span> &#123;</span><br><span class="line">	load_video</span><br><span class="line">	<span class="built_in">set</span> gfxpayload=keep</span><br><span class="line">	insmod gzio</span><br><span class="line">	insmod part_gpt</span><br><span class="line">	insmod ext2</span><br><span class="line">	search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 143fbcc6-9ae2-4a88-ad96-12c7f3de3d95</span><br><span class="line">	<span class="built_in">echo</span>	<span class="string">&#x27;载入 Linux linux ...&#x27;</span></span><br><span class="line">	linux	/boot/vmlinuz-linux root=UUID=143fbcc6-9ae2-4a88-ad96-12c7f3de3d95 rw  loglevel=3 quiet</span><br><span class="line">	<span class="built_in">echo</span>	<span class="string">&#x27;载入初始化内存盘...&#x27;</span></span><br><span class="line">	initrd	/boot/initramfs-linux.img</span><br><span class="line">&#125;</span><br><span class="line">submenu <span class="string">&#x27;Arch Linux 的高级选项&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-advanced-143fbcc6-9ae2-4a88-ad96-12c7f3de3d95&#x27;</span> &#123;</span><br><span class="line">	menuentry <span class="string">&#x27;Arch Linux，Linux linux&#x27;</span> --class <span class="built_in">arch</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-linux-advanced-143fbcc6-9ae2-4a88-ad96-12c7f3de3d95&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		<span class="built_in">set</span> gfxpayload=keep</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod part_gpt</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 143fbcc6-9ae2-4a88-ad96-12c7f3de3d95</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;载入 Linux linux ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-linux root=UUID=143fbcc6-9ae2-4a88-ad96-12c7f3de3d95 rw  loglevel=3 quiet</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;载入初始化内存盘...&#x27;</span></span><br><span class="line">		initrd	/boot/initramfs-linux.img</span><br><span class="line">	&#125;</span><br><span class="line">	menuentry <span class="string">&#x27;Arch Linux, with Linux linux (fallback initramfs)&#x27;</span> --class <span class="built_in">arch</span> --class gnu-linux --class gnu --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;gnulinux-linux-fallback-143fbcc6-9ae2-4a88-ad96-12c7f3de3d95&#x27;</span> &#123;</span><br><span class="line">		load_video</span><br><span class="line">		<span class="built_in">set</span> gfxpayload=keep</span><br><span class="line">		insmod gzio</span><br><span class="line">		insmod part_gpt</span><br><span class="line">		insmod ext2</span><br><span class="line">		search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 143fbcc6-9ae2-4a88-ad96-12c7f3de3d95</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;载入 Linux linux ...&#x27;</span></span><br><span class="line">		linux	/boot/vmlinuz-linux root=UUID=143fbcc6-9ae2-4a88-ad96-12c7f3de3d95 rw  loglevel=3 quiet</span><br><span class="line">		<span class="built_in">echo</span>	<span class="string">&#x27;载入初始化内存盘...&#x27;</span></span><br><span class="line">		initrd	/boot/initramfs-linux-fallback.img</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">### END /etc/grub.d/10_linux ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/20_linux_xen ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_os-prober ###</span></span><br><span class="line">menuentry <span class="string">&#x27;Windows Boot Manager (在 /dev/nvme0n1p1)&#x27;</span> --class windows --class os <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;osprober-efi-2B71-22FB&#x27;</span> &#123;</span><br><span class="line">	insmod part_gpt</span><br><span class="line">	insmod fat</span><br><span class="line">	search --no-floppy --fs-uuid --<span class="built_in">set</span>=root 2B71-22FB</span><br><span class="line">	chainloader /EFI/Microsoft/Boot/bootmgfw.efi</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">### END /etc/grub.d/30_os-prober ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line">menuentry <span class="string">&#x27;UEFI Firmware Settings&#x27;</span> <span class="variable">$menuentry_id_option</span> <span class="string">&#x27;uefi-firmware&#x27;</span> &#123;</span><br><span class="line">	fwsetup</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">### END /etc/grub.d/30_uefi-firmware ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/40_custom ###</span></span><br><span class="line"><span class="comment"># This file provides an easy way to add custom menu entries.  Simply type the</span></span><br><span class="line"><span class="comment"># menu entries you want to add after this comment.  Be careful not to change</span></span><br><span class="line"><span class="comment"># the &#x27;exec tail&#x27; line above.</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/40_custom ###</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### BEGIN /etc/grub.d/41_custom ###</span></span><br><span class="line"><span class="keyword">if</span> [ -f  <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$&#123;config_directory&#125;</span>/custom.cfg</span><br><span class="line"><span class="keyword">elif</span> [ -z <span class="string">&quot;<span class="variable">$&#123;config_directory&#125;</span>&quot;</span> -a -f  <span class="variable">$prefix</span>/custom.cfg ]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="variable">$prefix</span>/custom.cfg</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">### END /etc/grub.d/41_custom ###</span></span><br></pre></td></tr></table></figure>
<h3
id="linux下efibootmgr的使用删除uefi主板多余的启动项">Linux下EFIBOOTMGR的使用，删除UEFI主板多余的启动项</h3>
<p>用uefi装过几次系统后，uefi启动项就会多出好多启动项。这东西格硬盘也不好用，我们借助efibootmgr可以编辑启动项，事实上我的电脑正是这样操作的：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># efibootmgr</span></span><br><span class="line">BootCurrent: 0008</span><br><span class="line">Timeout: 5 seconds</span><br><span class="line">BootOrder: 0008,0007,0006,0004,0005,0000,0001,0002</span><br><span class="line">Boot0000* UEFI KBG40ZNS128G NVMe KIOXIA 128GB 80SPG7BZQ2B1 1</span><br><span class="line">Boot0001* ONBOARD NIC (IPV4)</span><br><span class="line">Boot0002* ONBOARD NIC (IPV6)</span><br><span class="line">Boot0004* Manjaro</span><br><span class="line">Boot0005* Windows Boot Manager</span><br><span class="line">Boot0006* endeavouros</span><br><span class="line">Boot0007* -<span class="built_in">id</span></span><br><span class="line">Boot0008* ArchLinux</span><br></pre></td></tr></table></figure>
<p>删除一个引导项 <code>Manjaro</code></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">efibootmgr -b 0004 -B</span><br></pre></td></tr></table></figure>
<p>添加一个引导项</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#efibootmgr -c -w -L “BootOptionName” -d /dev/sda -p 1 -l \\EFI\\asianux\\elilo.efi</span></span><br></pre></td></tr></table></figure>
<p>其中-d
参数后面是系统所在的硬盘设备名称，例如<code>/dev/hda</code>、<code>/dev/hdb</code>
<code>-p</code> 参数是vfat 分区的分区编号<code>/dev/hda1</code>
用<code>-p 1</code> <code>/dev/sda2</code> 用<code>-p 2</code>
<code>-l</code> 参数后面是该引导项指向的efi
启动文件在该分区上的位置。请注意使用“\”来表示目录的分级。
例如：<code>/EFI/asianux/elilo.efi</code>
应写成：<code>\\EFI\\asianux\\elilo.efi</code></p>
<h2
id="解决linux和windows时间不一致问题">解决<code>Linux</code>和<code>Windows</code>时间不一致问题</h2>
<p>日常工作中多数人使用的是<code>Windows</code>,
当使用<code>Linux</code>作为工作的主力时，安装双系统是一个最佳的选择,但是双系统会导致<code>Linux</code>和<code>Windows</code>时间不一致问题。</p>
<details>
<summary>
<label style="color:blue">具体原因分析</label>
</summary>
<p>GMT：Greenwich Mean Time，即格林尼治标准时间，也就是世界时。GMT
以地球自转为基础的时间计量系统，但由于地球自转不均匀，导致 GMT
不精确，现在已经不再作为世界标准时间使用。</p>
<p>UTC：Universal Time Coordinated，即协调世界时。UTC
是以原子时秒长为基础，在时刻上尽量接近于 GMT 的一种时间计量系统。为确保
UTC 与 GMT 相差不会超过 0.9 秒，在有需要的情况下会在 UTC
内加上正或负闰秒。UTC 现在作为世界标准时间使用。</p>
<p>RTC：Real-Time
Clock，即实时时钟，在计算机领域作为硬件时钟的简称。</p>
<p>世界上不同地区所在的时区是不同的，这些时区决定了当地的本地时间。比如北京处于东八区，即北京时间为
UTC + 8，如果 UTC 时间现在是上午 6 点整，那么北京时间为 14 点整。</p>
<p>Windows 与 Linux 看待硬件时间的方式不同。Windows
把电脑的硬件时钟（RTC）看成是本地时间，即 RTC = Local Time，Windows
会直接显示硬件时间；而 Linux 则是把电脑的硬件时钟看成 UTC 时间，即 RTC =
UTC，那么 Linux 显示的时间就是硬件时间加上时区。</p>
</details>
<h3 id="解决办法">解决办法</h3>
<p>既然知道了问题原因，我们就知道如何去解决，大概思路分为两种，一是让
Windows 认为硬件时钟是 UTC 时间，二是让 Linux
认为硬件时钟是本地时间。</p>
<div class="tabs" id="解决时间不一致问题"><ul class="nav-tabs"><li class="tab active"><a href="#解决时间不一致问题-1">Windows</a></li><li class="tab"><a href="#解决时间不一致问题-2">Linux</a></li></ul><div class="tab-content"><div class="tab-pane active" id="解决时间不一致问题-1"><ol type="1">
<li>以管理员身份打开 「PowerShell」，输入以下命令：</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>或者打开「注册表编辑器」，定位到计算机目录:</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>新建一个 DWORD 类型，名称为 RealTimeIsUniversal 的键，并修改键值为 1
即可。</li>
</ol></div><div class="tab-pane" id="解决时间不一致问题-2"><p>这里大家可以根据自己 Linux
发行版的方法来修改。我这里给出现在大多数发行版由 timedatectl
来管理时间的修改方法。</p>
<p>在终端中，输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ timedatectl set-local-rtc 1 --adjust-system-clock</span><br></pre></td></tr></table></figure></div></div></div>
<div class="note primary"><p>这两种方法中，本人推荐第一种方法，修改 Windows 的时间管理。因为在
Linux 系统中修改后，输入 timedatectl 命令后，会出现警告，提示你使用 RTC
时钟会导致一些程序错误；并且 Windows 也在更改时间管理方式为 UTC
时间。</p>
</div>
<h2 id="系统的稳定性保障">系统的稳定性保障</h2>
<div class="tabs" id="systemstable"><ul class="nav-tabs"><li class="tab active"><a href="#systemstable-1">安装长期支持版内核</a></li><li class="tab"><a href="#systemstable-2">锁定桌面环境</a></li><li class="tab"><a href="#systemstable-3">锁定升级日期</a></li></ul><div class="tab-content"><div class="tab-pane active" id="systemstable-1"><p>考虑到<code>ArchLInux</code>
滚动升级的特性，在工作环境中我们需要一个更加稳定的系统，在前面的安装过程中虽然有锁定桌面环境的技巧支持，但是并没有锁定内核，因为内核滚挂的可能性不太大，但也不是没有。为了确保系统滚挂，需要再追加一个稳固系统的方法：安装长期支持版内核<code>linux-lts</code>,
在系统滚挂的时候增加一个可选择的保障方案。</p>
<figure class="highlight sh"><figcaption><span>安装linux-lts</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S linux-lts  linux-lts-header</span><br><span class="line"><span class="built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<p>第1条命令安装<code>lts</code>内核，第2条命令重新生成<code>grub</code>,
这样在启动的时候就可以选择<code>高级</code>→<code>lts</code>内核启动。</p></div><div class="tab-pane" id="systemstable-2"><p>打开<code>/etc/pacman.conf</code>文件，找到<code>IgnorPkg</code>和<code>IgnoreGroup</code>，
在等号后添加上桌面环境软件，确保工作环境的稳定可靠。</p>
<figure class="highlight sh"><figcaption><span>/etc/pacman.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pacman won&#x27;t upgrade packages listed in IgnorePkg and members of IgnoreGroup</span></span><br><span class="line"><span class="comment">#IgnorePkg   =</span></span><br><span class="line">IgnoreGroup = gnome gnome-extra plasma kde-applications</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="systemstable-3"><p>虽然长期支持版比较稳定，但是有时候滚动升级导致严重的问题后需要回滚系统。在问题解决前不应当升级，同时在工作过程中也会安装一些必要的软件，此时保持软件和当前版本的系统相对应是一个相当稳定的解决方案。综合考虑后，使用锁定升级日期的方法，既可以回滚到稳定版本的最新状态，又可以确保任意安装相应版本的软件。</p>
<p><strong>1.
在<code>pacman</code>配置文件中追加上指定日期的镜像</strong></p>
<figure class="highlight sh"><figcaption><span>/etc/pacman.d/mirrorlist</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"><span class="comment">################# Arch Linux mirrorlist generated by Reflector #################</span></span><br><span class="line"><span class="comment">################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># With:       reflector --verbose -c China --latest 12 --sort rate --threads 100 --save /etc/pacman.d/mirrorlist</span></span><br><span class="line"><span class="comment"># When:       2024-03-08 12:06:34 UTC</span></span><br><span class="line"><span class="comment"># From:       https://archlinux.org/mirrors/status/json/</span></span><br><span class="line"><span class="comment"># Retrieved:  2024-03-08 12:06:30 UTC</span></span><br><span class="line"><span class="comment"># Last Check: 2024-03-08 11:46:39 UTC</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Server = http://archive.archlinux.org/repos/2024/09/18/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = http://archive.archlinux.org/repos/2024/09/18/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://america.archive.pkgbuild.com/repos/2024/09/19/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://asia.archive.pkgbuild.com/repos/2024/09/19/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://europe.archive.pkgbuild.com/repos/2024/09/19/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://arch-archive.tuna.tsinghua.edu.cn/2024/09-16/$repo/os/$arch</span></span><br><span class="line"><span class="comment"># Server = https://mirrors.bfsu.edu.cn/archlinux-archive/2024/09-16/$repo/os/$arch</span></span><br><span class="line">Server = http://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.neusoft.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.jlu.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = http://mirrors.jlu.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = http://mirrors.ustc.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = http://mirrors.shanghaitech.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = https://mirrors.xjtu.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = rsync://mirrors.neusoft.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = rsync://rsync.mirrors.ustc.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = rsync://mirrors.tuna.tsinghua.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br><span class="line">Server = rsync://mirrors.jlu.edu.cn/archlinux/<span class="variable">$repo</span>/os/<span class="variable">$arch</span></span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
前四个源是官方源及全球的存档镜像，它保存了每一天的镜像，而后面两个分别是清华大学和北京外国语大学的存档镜像，它们每周存档一次。如果您指定的日期在两个国内存档源中时则使用这两个，因为速度快。如果您的指定日期不在它们之中，则使用前四个源中的某一个都可以，2024年09月21日使用第一个官方存档库回滚系统到2024年09月18日,
这是我的电脑正常工作的最新日期，测试的速度比较快。
</p>
</div>
<p><strong>2. 锁定日期和解封升级</strong></p>
<p>在上述配置中，注释部分锁定了仓库镜像日期为<code>2024年9月19日</code>等，此时系统可以连续升级。需要锁定日期时，请将日期改为指定的日期，然后取消注释并将非日期仓库注释掉。</p>
<p><strong>3. 强制更新到目标版本</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -Syyuu</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
更新完成后，重新启动系统,
您现在已将所有包恢复到之前的特定日期（在我们的示例中为 2024年 9 月 19
日）。但是请注意，我们不建议使用过时的软件包，待您需要<code>Gnome</code>插件或其他特定版本的软件及时跟进更新后请及时将系统升级到最新，若出现问题则再锁定到最新的稳定系统日期，等待下一次全部软件稳定后再次更新。如果操作后可以保证一直稳定使用<code>ArchLinux</code>.
</p>
</div></div></div></div>
<h2 id="安装解压缩软件">安装解压缩软件</h2>
<figure class="highlight sh"><figcaption><span>自动选择压缩软件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm p7zip-natspec unarchiver lzop lrzip arj zip unzip</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$XDG_CURRENT_DESKTOP</span>&quot;</span> = <span class="string">&quot;GNOME&quot;</span> ]; <span class="keyword">then</span> pacman --needed --noconfirm -S file-roller ; <span class="keyword">else</span> pacman --needed --noconfirm -S ark ; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<div class="note primary"><ul>
<li><code>KDE</code>桌面，安装 <code>ark</code></li>
<li><code>GNOME</code>桌面，安装 <code>file-roller</code></li>
</ul>
</div>
<details>
<summary>
<label style="color:blue">解决解压缩zip文件乱码问题</label>
</summary>
<p>在Linux解压缩Windows下考备过来的zip压缩文件时，不仅<code>ark</code>浏览时乱码，实际解压也是乱码。根本原因是编码问题，windows下默认<code>gb2312</code>与linux中默认<code>utf-8</code>不兼容，
直接原因是Ark中用于zip打开和解压的插件不支持<code>gb2312</code>.
解决方案为</p>
<ol type="1">
<li><p>安装。<code>p7zip-natspec</code> (<code>cn</code>源中就有)
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S p7zip-natspec</span><br></pre></td></tr></table></figure></p></li>
<li><p>在<code>Ark</code>中禁用<code>libzip</code>插件(该插件优先级高于<code>p7zip</code>):
<code>Ark</code>菜单→设置→配置<code>Ark</code>→插件→取消<code>Libzip</code>插件对应的复选框→应用。同时应当确保<code>p7zip</code>插件使用中。</p></li>
<li><p>由于已经安装了<code>unarchiver</code>,
所以直接使用命令<code>unar</code>解压<code>zip</code>文件也是可以解决文件名乱码问题的，但是前述方法更加方便。</p></li>
<li><p>其他选择，使用<code>unzip-natspec</code>或<code>unzip-iconv</code>.</p></li>
</ol>
</details>
<h2 id="配置中文输入法fcitx5">配置中文输入法Fcitx5</h2>
<h3 id="安装fcitx5组件">安装Fcitx5组件</h3>
<figure class="highlight sh"><figcaption><span>from archlinuxcn</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S fcitx5 fcitx5-gtk fcitx5-qt fcitx5-configtool fcitx5-chinese-addons fcitx5-material-color fcitx5-nord</span><br></pre></td></tr></table></figure>
<h3 id="设置fcitx5变量">设置Fcitx5变量</h3>
<p>根据<a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Environment_variables">Environment
variables (2.1.1 Using shell initialization files)</a>,
环境变量的设置文件为<code>/etc/environment</code>或<code>/etc/profile</code>.</p>
<div class="tabs" id="fcitx5变量"><ul class="nav-tabs"><li class="tab active"><a href="#fcitx5变量-1">wayland</a></li><li class="tab"><a href="#fcitx5变量-2">x11</a></li></ul><div class="tab-content"><div class="tab-pane active" id="fcitx5变量-1"><figure class="highlight sh"><figcaption><span>/etc/environment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">XMODIFIERS=@im=fcitx</span><br><span class="line">GTK_IM_MODULE=fcitx</span><br><span class="line">QT_IM_MODULE=fcitx</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="fcitx5变量-2"><figure class="highlight sh"><figcaption><span>/etc/environment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GTK_IM_MODULE=fcitx</span><br><span class="line">QT_IM_MODULE=fcitx</span><br><span class="line">XMODIFIERS=@im=fcitx</span><br><span class="line">SDL_IM_MODULE=fcitx</span><br><span class="line">GLFW_IM_MODULE=ibus</span><br></pre></td></tr></table></figure></div></div></div>
<div class="note primary"><p>注意：<code>pam-env</code>已经不再读取文件<code>~/.pam_environment</code>,
所以不可以设置此文件。同时部分登录器（如LightDM)支持部分读取<code>~/.xprofile</code>,也可以将其设置为和<code>/etc/environment</code>相同的上述内容。</p>
</div>
<h2 id="配置vim和neovim">配置vim和neovim</h2>
<div class="note primary"><p>如果您是<code>Linux</code>初学者，或者不习惯使用<code>vim</code>或<code>neovim</code>，那下面这部分可以不去配置。下面的配置主要是配置<code>neovim</code>和<code>vim</code>安装一些工作中可以提高效率的插件，如果没有需要请省略此处配置。</p>
</div>
<div class="tabs" id="配置vim和neovim"><ul class="nav-tabs"><li class="tab active"><a href="#配置vim和neovim-1">Auto</a></li><li class="tab"><a href="#配置vim和neovim-2">vim</a></li><li class="tab"><a href="#配置vim和neovim-3">neovim</a></li></ul><div class="tab-content"><div class="tab-pane active" id="配置vim和neovim-1"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">curl -o vim-all.7z https://gitlab.com/fengzhenhua/zipconf/-/raw/main/vim-all.7z\?inline\=<span class="literal">false</span></span><br><span class="line">unar vim-all.7z</span><br><span class="line"><span class="built_in">cd</span> vim</span><br><span class="line"><span class="built_in">chmod</span> +x ./install.sh</span><br><span class="line">./install.sh</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">curl -o nvim-all.7z https://gitlab.com/fengzhenhua/zipconf/-/raw/main/nvim-all.7z\?inline\=<span class="literal">false</span></span><br><span class="line"><span class="built_in">cd</span> nvim</span><br><span class="line"><span class="built_in">chmod</span> +x ./install.sh</span><br><span class="line">./install.sh</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="built_in">rm</span> -rf vim-all.7z vim nvim-all.7z nvim</span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
在安装<code>neovim</code>时，由于<code>packer.nvim</code>不再维护，故更新为<code>lazy.nvim</code>插件管理器，安装完插件时要手动在<code>nvim</code>中执行<code>:qa</code>
退出<code>nvim</code>。
安装结束后最后一行命令删除<code>vim-all.7z</code>,
<code>nvim-all.7z</code>, <code>vim</code>, <code>nvim</code>。
</p>
</div></div><div class="tab-pane" id="配置vim和neovim-2"><ol type="1">
<li><p>安装必备依赖 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm ctags &amp;&gt; /dev/null</span><br></pre></td></tr></table></figure></p></li>
<li><p>导入初始配置 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o <span class="variable">$HOME</span>/.vimrc https://gitlab.com/fengzhenhua/fzhconfig/-/raw/main/vimrc_init\?inline\=<span class="literal">false</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>安装插件管理器<code>vim-plug</code></p></li>
</ol>
<ul>
<li><p>官方安装法 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&#x27;curl -fLo &quot;$&#123;XDG_DATA_HOME:-$HOME/.local/share&#125;&quot;/nvim/site/autoload/plug.vim --create-dirs \</span></span><br><span class="line"><span class="string">       https://raw.kkgithub.com/junegunn/vim-plug/master/plug.vim&#x27;</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>自动升级安装法 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/junegunn/vim-plug <span class="variable">$HOME</span>/.vim/vim-plug</span><br><span class="line"><span class="built_in">ln</span>  -s <span class="variable">$HOME</span>/.vim/plugged/vim-plug/plug.vim  <span class="variable">$HOME</span>/.vim/autoload/plug.vim</span><br></pre></td></tr></table></figure></p></li>
</ul>
<div class="note primary">
<p>
注意：已经配置vim-plug 通过命令:PlugUpdate自动更新，请勿执行:PlugUpgrade
!!
</p>
</div>
<ol start="4" type="1">
<li><p>安装<code>vim-plug</code>插件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim +PlugInstall +qall</span><br></pre></td></tr></table></figure></p></li>
<li><p>导入完整配置 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm $HOME/.vimrc</span><br><span class="line">curl -o $HOME/.vimrc https://gitlab.com/fengzhenhua/fzhconfig/-/raw/main/vimrc\?inline\=false</span><br></pre></td></tr></table></figure></p></li>
</ol></div><div class="tab-pane" id="配置vim和neovim-3"><div class="note primary">
<p>
<code>packer</code>插件管理器已经于<label style="color:red">2023年8月份</label>停止维护，故本教程已经切换为<code>lazy</code>作为默认管理器，请放心<code>lazy</code>配置更加方便、稳定、快速。但是作为学习，此处仍然保留<code>packer</code>的配置方法,工作使用请参考<code>Auto</code>
。
</p>
</div>
<ol type="1">
<li><p>安装依赖软件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm neovim python3 yarn ranger</span><br><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm python-pip tree-sitter-cli python-pynvim</span><br><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm nerd-fonts-complete nerd-fonts-complete ttf-nerd-fonts-symbols</span><br><span class="line"><span class="built_in">sudo</span> fc-cache -vf</span><br></pre></td></tr></table></figure></p></li>
<li><p>下载<code>neovim</code>配置文件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitlab.com/fengzhenhua/fzhconfig  fzhconfig</span><br><span class="line"><span class="built_in">cd</span> fzhconfig</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装插件管理器<code>packer</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NeoPacker=<span class="string">&quot;/home/<span class="variable">$USER</span>/.local/share/nvim/site/pack/packer/start/packer.nvim&quot;</span></span><br><span class="line">git <span class="built_in">clone</span> --depth 1 https://github.com/wbthomason/packer.nvim   <span class="variable">$NeoPacker</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>安装配置文件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> -rf ./nvim /home/<span class="variable">$USER</span>/.config/nvim</span><br><span class="line"><span class="built_in">cp</span> ./init.vim /home/<span class="variable">$USER</span>/.config/nvim/init.vim</span><br><span class="line"><span class="built_in">cp</span> -rf ./vsnip /home/<span class="variable">$USER</span>/.vsnip</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装插件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvim +PackerSync</span><br></pre></td></tr></table></figure>
注意：插件安装完成后，请输入<code>:qa</code>
退出<code>neovim</code></p></li>
<li><p>安装完整配置 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span>  ./nvim/init.vim /home/<span class="variable">$USER</span>/.config/nvim/init.vim</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装<code>vim-latex</code>插件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NeoTexPath=<span class="string">&quot;/home/<span class="variable">$USER</span>/.local/share/nvim/site/pack/packer/start/vim-latex/ftplugin/latex-suite/templates&quot;</span></span><br><span class="line"><span class="built_in">cp</span> ./latex-templates <span class="variable">$NeoTexPath</span></span><br></pre></td></tr></table></figure></p></li>
<li><p>更改<code>vim-templates</code>插件的默认模板
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cp</span> ./vim-templates/*   ~/.local/share/nvim/site/pack/packer/start/vim-template/templates/</span><br></pre></td></tr></table></figure></p></li>
</ol></div></div></div>
<h2 id="neovim健康检查">Neovim健康检查</h2>
<p>在安装<code>Neovim</code>后自检发现还有一些插件的依赖程序，没有安装，执行下述命令：</p>
<figure class="highlight sh"><figcaption><span>fix neovim's checkhealth</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S wget cargo composer php luarocks ruby julia ripgrep fd jdk-openjdk wl-clipboard go xclip cpanminus python-neovim</span><br><span class="line"><span class="built_in">sudo</span> npm install -g neovim</span><br><span class="line"><span class="built_in">sudo</span> cpanm -n Neovim::Ext</span><br></pre></td></tr></table></figure>
<h3 id="neovim使用clipboard粘贴板">neovim使用clipboard粘贴板</h3>
<figure class="highlight sh"><figcaption><span>Install clipboard</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$XDG_SESSION_TYPE</span> = <span class="string">&quot;wayland&quot;</span> ]; <span class="keyword">then</span> <span class="built_in">sudo</span> pacman --needed --noconfirm -S wl-clipboard ; <span class="keyword">else</span> <span class="built_in">sudo</span> pacman --needed --noconfirm -S xclip ; <span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<div class="note primary"><ul>
<li>如果使用的是<code>wayland</code>,
安装<code>wl-clipboard</code>:</li>
<li>如果使用的是<code>xorg</code>, 安装<code>xclip</code></li>
</ul>
</div>
<h3 id="解决-warning-neovimext-cpan-module-is-not-installed">解决
WARNING "Neovim::Ext" cpan module is not installed</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm cpanminus</span><br><span class="line"><span class="built_in">sudo</span> cpanm -n Neovim::Ext</span><br></pre></td></tr></table></figure>
<h3 id="perl-无法写入到文件夹问题">perl 无法写入到文件夹问题</h3>
<figure class="highlight sh"><figcaption><span>perl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Perl provider (optional) ~</span><br><span class="line">- perl executable: /usr/bin/perl</span><br><span class="line">- WARNING  Can<span class="string">&#x27;t write to /usr/share/perl5/site_perl and /usr/bin: Installing modules to /home/feng/perl5</span></span><br><span class="line"><span class="string">  - ADVICE:</span></span><br><span class="line"><span class="string">    -  To turn off this warning, you have to do one of the following:</span></span><br><span class="line"><span class="string">    -    - run me as a root or with --sudo option (to install to /usr/share/perl5/site_perl and /usr/bin)</span></span><br><span class="line"><span class="string">    -    - Configure local::lib in your existing shell to set PERL_MM_OPT etc.</span></span><br><span class="line"><span class="string">    -    - Install local::lib by running the following commands</span></span><br><span class="line"><span class="string">    - </span></span><br><span class="line"><span class="string">    -          cpanm --local-lib=~/perl5 local::lib &amp;&amp; eval $(perl -I ~/perl5/lib/perl5/ -Mlocal::lib)</span></span><br><span class="line"><span class="string">- OK Latest &quot;Neovim::Ext&quot; cpan module is installed: 0.06</span></span><br></pre></td></tr></table></figure>
<p>按照提示，执行第2条的配置路径和第3条的安装命令，由于配置路径到文件<code>~/.zshrc</code>可以保证不必每次重装都重新设置，所以更推荐使用配置路径的方式。</p>
<div class="tabs" id="configureperlpath"><ul class="nav-tabs"><li class="tab active"><a href="#configureperlpath-1">Configure local::lib</a></li><li class="tab"><a href="#configureperlpath-2">Install local::lib</a></li></ul><div class="tab-content"><div class="tab-pane active" id="configureperlpath-1"><figure class="highlight sh"><figcaption><span>~/.zshrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PERL_BASE=<span class="string">&quot;/usr/local/perl&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL_MM_OPT=<span class="string">&quot;INSTALL_BASE=<span class="variable">$PERL_BASE</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL_MB_OPT=<span class="string">&quot;--install_base <span class="variable">$PERL_BASE</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL5LIB=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/lib/perl5&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/bin<span class="variable">$&#123;PATH:+:$PATH&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> MANPATH=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/man<span class="variable">$&#123;MANPATH:+:$MANPATH&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="configureperlpath-2"><p>执行下面的命令，但是为了目录纯净将<code>per15</code>隐藏，即
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpanm --local-lib=~/.perl5 <span class="built_in">local</span>::lib &amp;&amp; <span class="built_in">eval</span> $(perl -I ~/.perl5/lib/perl5/ -Mlocal::lib)</span><br></pre></td></tr></table></figure></p></div></div></div>
<h3 id="javac命令找不到的问题">javac命令找不到的问题</h3>
<p><code>nvim</code>运行<code>checkhealth</code>就会发出警告:<code>javac</code>
找不到！</p>
<p>注意：</p>
<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr>
<th>模块</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>JRE(Java Runtime Environment)</td>
<td><label style="color:DarkViolet">运行</label>Java程序所必须的环境，包括JVM和一些核心类库，用于运行字节码。</td>
</tr>
<tr>
<td>JDK(Java Development Kit)</td>
<td><label style="color:DarkViolet">开发</label>Java程序所必须的环境，包括JRE和一些编译工具比如javac.exe。</td>
</tr>
<tr>
<td>openJDK</td>
<td>JDK的开源，有很多种实现，可以自由选择。</td>
</tr>
</tbody>
</table>
<p>所以<code>javac</code>命令找不到应当安装一下<code>jdk-openjdk</code>,
这样问题就解决了。</p>
<p>linux下支持多个版本的<code>jdk-openjdk</code>，
当安装了多个版本<code>java</code>时，可以使用<code>archlinux-java</code>进行选择和设置默认。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S jdk-openjdk</span><br><span class="line"><span class="built_in">sudo</span> pacman -S java-runtime-common</span><br><span class="line"><span class="built_in">sudo</span> archlinux-java <span class="built_in">unset</span> </span><br><span class="line"><span class="built_in">sudo</span> archlinux-java fix</span><br></pre></td></tr></table></figure>
<h3 id="python-pynvim-的支持问题">python-pynvim 的支持问题</h3>
<p><code>nvim</code>运行<code>checkhealth</code>后出现错误</p>
<figure class="highlight sh"><figcaption><span>pynvim错误</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Python 3 provider (optional) ~</span><br><span class="line">- `g:python3_host_prog` is not <span class="built_in">set</span>.  Searching <span class="keyword">for</span> python3 <span class="keyword">in</span> the environment.</span><br><span class="line">- Multiple python3 executables found.  Set `g:python3_host_prog` to avoid surprises.</span><br><span class="line">- Executable: /usr/bin/python3</span><br><span class="line">- Other python executable: /bin/python3</span><br><span class="line">- Python version: 3.11.7</span><br><span class="line">- pynvim version: 0.4.3 (outdated; from ~/.local/lib/python3.11/site-packages/neovim)</span><br><span class="line">- WARNING Latest pynvim is NOT installed: 0.5.0</span><br></pre></td></tr></table></figure>
<p>解决方法为删除<code>~/.local/lib/python*</code>,
然后<code>nvim</code>就会调用系统安装的<code>python-pynvim</code>,这样可以保证<code>pynvim</code>是最新的。</p>
<h2
id="vim和neovim配置fcitx5自动切换">vim和neovim配置fcitx5自动切换</h2>
<p>当使用<code>vim</code>或<code>nvim</code>时，经学在插入模式和命令模式切换，而在命令模式需要英文输入法，特别是编辑中文文件时，每次切换都需要切换输入法特别麻烦。于是根据网络上的方法我修改得到一个更好的方法，同时原理相同在<code>archlinux</code>官网上给出了更加简洁的写法，此处都列出来，供大家自由选择。</p>
<h3 id="fcitx5-archwiki">Fcitx5-ArchWiki</h3>
<p>If you are using <code>Vim9</code>, then the code should be</p>
<figure class="highlight vim"><figcaption><span>~/.vimrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Only taking affect after using vim9script grammar <span class="built_in">or</span> <span class="built_in">has</span> `vim9script` keyword.</span><br><span class="line">var fcitx5state = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)</span><br><span class="line"><span class="keyword">autocmd</span> InsertLeave * :<span class="keyword">silent</span> fcitx5state = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)[<span class="number">0</span>] | <span class="keyword">silent</span> !fcitx5-remote -<span class="keyword">c</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertEnter * :<span class="keyword">silent</span> <span class="keyword">if</span> fcitx5state == <span class="string">&#x27;2&#x27;</span> | <span class="keyword">call</span> <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote -o&quot;</span>) | <span class="keyword">endif</span></span><br></pre></td></tr></table></figure>
<p>If you are using <code>neovim</code>, then append the above code to
<code>~/.config/nvim/init.vim</code>.</p>
<details>
<summary>
<label style="color:blue">版本低于Vim9及VSCodeVim</label>
</summary>
<p>It is recommended to use the <a
target="_blank" rel="noopener" href="https://github.com/lilydjwg/fcitx.vim">fcitx.vim</a> plugin. This
plugin will keep different buffer-specific input method states in their
respective insert modes.</p>
<p>For a simple solution, you can append the code to
<code>~/.vimrc</code>:</p>
<figure class="highlight vim"><figcaption><span>~/.vimrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fcitx5state=<span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)</span><br><span class="line"><span class="keyword">autocmd</span> InsertLeave * :<span class="keyword">silent</span> <span class="keyword">let</span> fcitx5state=<span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)[<span class="number">0</span>] | <span class="keyword">silent</span> !fcitx5-remote -<span class="keyword">c</span> </span><br><span class="line"><span class="keyword">autocmd</span> InsertEnter * :<span class="keyword">silent</span> <span class="keyword">if</span> fcitx5state == <span class="number">2</span> | <span class="keyword">call</span> <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote -o&quot;</span>) | <span class="keyword">endif</span> </span><br></pre></td></tr></table></figure>
<p>If you are using VSCodeVim, add the following snippet into your
configuration file:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;vim.autoSwitchInputMethod.enable&quot;</span>: true,</span><br><span class="line"><span class="string">&quot;vim.autoSwitchInputMethod.defaultIM&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line"><span class="string">&quot;vim.autoSwitchInputMethod.obtainIMCmd&quot;</span>: <span class="string">&quot;/usr/bin/fcitx5-remote&quot;</span>,</span><br><span class="line"><span class="string">&quot;vim.autoSwitchInputMethod.switchIMCmd&quot;</span>: <span class="string">&quot;/usr/bin/fcitx5-remote -t &#123;im&#125;&quot;</span>,</span><br></pre></td></tr></table></figure>
</details>
<h3 id="我之前使用的方案">我之前使用的方案</h3>
<figure class="highlight vim"><figcaption><span>~/.vimrc or ~/.config/nvim/init.vim</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:input_toggle</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">function!</span> <span class="title">Fcitx2en</span><span class="params">()</span></span><br><span class="line">   <span class="keyword">let</span> <span class="variable">s:input_status</span> = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)</span><br><span class="line">   <span class="keyword">if</span> <span class="variable">s:input_status</span> == <span class="number">2</span></span><br><span class="line">      <span class="keyword">let</span> <span class="variable">g:input_toggle</span> = <span class="number">1</span></span><br><span class="line">      <span class="keyword">let</span> <span class="variable">l:a</span> = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote -c&quot;</span>)</span><br><span class="line">   <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">function!</span> <span class="title">Fcitx2zh</span><span class="params">()</span></span><br><span class="line">   <span class="keyword">let</span> <span class="variable">s:input_status</span> = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote&quot;</span>)</span><br><span class="line">   <span class="keyword">if</span> <span class="variable">s:input_status</span> != <span class="number">2</span> &amp;&amp; <span class="variable">g:input_toggle</span> == <span class="number">1</span></span><br><span class="line">      <span class="keyword">let</span> <span class="variable">l:a</span> = <span class="built_in">system</span>(<span class="string">&quot;fcitx5-remote -o&quot;</span>)</span><br><span class="line">      <span class="keyword">let</span> <span class="variable">g:input_toggle</span> = <span class="number">0</span></span><br><span class="line">   <span class="keyword">endif</span></span><br><span class="line"><span class="keyword">endfunction</span></span><br><span class="line"><span class="keyword">set</span> ttimeoutlen=<span class="number">150</span></span><br><span class="line"><span class="comment">&quot;退出插入模式</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertLeave * <span class="keyword">call</span> Fcitx2en()</span><br><span class="line"><span class="comment">&quot;进入插入模式</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertEnter * <span class="keyword">call</span> Fcitx2zh()</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>注意：由于<code>Fcitx5-ArchWiki</code>给出的方法更加简法，所以建议使用<code>Fcitx5-ArchWiki</code>方法，而此处方法是本人多年前努力改进的办法，所以放在此处作为学习之前。</p>
</div>
<h2 id="必备工具一键安装">必备工具一键安装</h2>
<figure class="highlight sh"><figcaption><span>archlinuxcn源</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S  guake thunderbird  thunderbird-i18n-zh-cn libreoffice-still libreoffice-still-zh-cn calibre zotero goldendict-ng-git python-requests showtime speech-dispatcher fdupes rmlint firefox-ublock-origin thunderbird-ublock-origin</span><br></pre></td></tr></table></figure>
<div class="note primary"><ul>
<li>上述工具依次为：下拉式终端、邮件客户端、办公套装libreoffice、
电子图书库、文献管理、电子词典、视频播放、语音合成(firefox依赖)、删除重复文件、广告过滤</li>
<li>2025年06月17日, 取代<code>mplayer</code>
为现代的<code>showtime</code>或<code>clapper</code></li>
</ul>
</div>
<figure class="highlight sh"><figcaption><span>aur源</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --noconfirm -S xdman-beta-bin wemeet-bin linuxqq listen1-desktop-appimage  aliyunpan-gaozhangmin-bin baidunetdisk-bin</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>上述工具依次为：下载工具、腾讯会议、腾讯QQ、音乐播放器、小白羊阿云盘、百度网盘</p>
</div>
<h2 id="安装deb转换工具debtap">安装deb转换工具debtap</h2>
<p>虽然<code>archlinux</code>的软件包足够多，但有时遇到某些专门针对<code>debian</code>或<code>ubuntu</code>的软件，要在<code>archlinux</code>使用它就可以借助转换工具<code>debtap</code>，安装配置如下：</p>
<ol type="1">
<li><p>由于Arch仓库中不含软件<code>debtap</code>,
于是借助Aur助手<code>paru</code>安装 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru -S debtap</span><br></pre></td></tr></table></figure></p></li>
<li><p>切换<code>debtap</code>为国内源(下述两条命令同时执行)，否则因限速问题容易升级失败
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&quot;s|http://ftp.debian.org/debian/dists|https://mirrors.ustc.edu.cn/debian/dists|g&quot;</span> /usr/bin/debtap</span><br><span class="line"><span class="built_in">sudo</span> sed -i <span class="string">&quot;s|http://archive.ubuntu.com/ubuntu/dists|https://mirrors.ustc.edu.cn/ubuntu/dists|g&quot;</span> /usr/bin/debtap</span><br></pre></td></tr></table></figure></p></li>
<li><p>升级<code>debtap</code> <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> debtap -u </span><br></pre></td></tr></table></figure></p></li>
<li><p>转换软件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> debtap xxxx.deb</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装转换生成的软件 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -U x.tar.zst</span><br></pre></td></tr></table></figure></p></li>
</ol>
<h2 id="安装配置zsh">安装配置zsh</h2>
<p>Zsh（Z-shell）是一款用于交互式使用的shell，也可以作为脚本解释器来使用。其包含了
bash，ksh，tcsh
等其他shell中许多优秀功能，也拥有诸多自身特色。多数发行版中都默认安装了Zsh,
安装配置如下：</p>
<ol type="1">
<li><p>安装zsh和必要插件 <figure class="highlight sh"><figcaption><span>安装zsh的和必要插件</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm zsh nerd-fonts zsh-autosuggestions zsh-autosuggestions zsh-completions zsh-theme-powerlevel10k zsh-syntax-highlighting-git zoxide exa</span><br></pre></td></tr></table></figure></p></li>
<li><p>zsh的配置文件 <figure class="highlight sh"><figcaption><span>~/.zshrc</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.</span></span><br><span class="line"><span class="comment"># Initialization code that may require console input (password prompts, [y/n]</span></span><br><span class="line"><span class="comment"># confirmations, etc.) must go above this block; everything else may go below.</span></span><br><span class="line"><span class="keyword">if</span> [[ -r <span class="string">&quot;<span class="variable">$&#123;XDG_CACHE_HOME:-<span class="variable">$HOME</span>/.cache&#125;</span>/p10k-instant-prompt-<span class="variable">$&#123;(%):-%n&#125;</span>.zsh&quot;</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">source</span> <span class="string">&quot;<span class="variable">$&#123;XDG_CACHE_HOME:-<span class="variable">$HOME</span>/.cache&#125;</span>/p10k-instant-prompt-<span class="variable">$&#123;(%):-%n&#125;</span>.zsh&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh</span><br><span class="line"><span class="built_in">source</span> /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span><br><span class="line"><span class="built_in">source</span> /usr/share/zsh-theme-powerlevel10k/powerlevel10k.zsh-theme</span><br><span class="line"></span><br><span class="line"><span class="comment"># History file for zsh</span></span><br><span class="line">HISTFILE=~/.zsh_history</span><br><span class="line"><span class="comment"># How many commands to store in history</span></span><br><span class="line">HISTSIZE=10000</span><br><span class="line">SAVEHIST=10000</span><br><span class="line"><span class="comment"># Share history in every terminal session</span></span><br><span class="line"><span class="built_in">setopt</span> SHARE_HISTORY</span><br><span class="line"><span class="comment"># 配置zsh-autosuggestions</span></span><br><span class="line">ZSH_AUTOSUGGEST_STRATEGY=(<span class="built_in">history</span> completion)</span><br><span class="line"><span class="comment"># ZSH_AUTOSUGGEST_STRATEGY=(match_prev_cmd)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># set for zsh-z-git</span></span><br><span class="line"><span class="comment"># source /usr/share/zsh/plugins/zsh-z/zsh-z.plugin.zsh</span></span><br><span class="line"><span class="comment"># set for z.lua 功能上不如zsh-z-git完善</span></span><br><span class="line"><span class="comment"># eval &quot;$(lua /usr/share/z.lua/z.lua --init zsh enhanced once)&quot;</span></span><br><span class="line"><span class="comment"># set for zoxide instead of z.lua</span></span><br><span class="line"><span class="built_in">eval</span> <span class="string">&quot;<span class="subst">$(zoxide init zsh)</span>&quot;</span></span><br><span class="line"><span class="comment"># To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.</span></span><br><span class="line">[[ ! -f ~/.p10k.zsh ]] || <span class="built_in">source</span> ~/.p10k.zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启拼写检查，带颜色</span></span><br><span class="line"><span class="built_in">autoload</span> U colors &amp;&amp; colors</span><br><span class="line"><span class="built_in">setopt</span> correct</span><br><span class="line"><span class="built_in">export</span> SPROMPT=<span class="string">&quot;Correct <span class="variable">$fg</span>[red]%R<span class="variable">$reset_color</span> to <span class="variable">$fg</span>[green]%r<span class="variable">$reset_color</span> [Yes, No, Abort, Edit]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 补全大小写敏感</span></span><br><span class="line"><span class="built_in">autoload</span> -Uz compinit &amp;&amp; compinit</span><br><span class="line"><span class="built_in">zstyle</span> <span class="string">&#x27;:completion:*&#x27;</span> matcher-list <span class="string">&#x27;&#x27;</span> <span class="string">&#x27;m:&#123;a-z&#125;=&#123;A-Z&#125;&#x27;</span> <span class="string">&#x27;+m:&#123;A-Z&#125;=&#123;a-z&#125;&#x27;</span></span><br><span class="line"><span class="comment"># 切换npm为淘宝的cnpm,加速下载</span></span><br><span class="line"><span class="comment"># alias npm=cnpm</span></span><br><span class="line"><span class="comment"># 配置Pel</span></span><br><span class="line"><span class="built_in">export</span> PERL_BASE=<span class="string">&quot;/usr/local/perl&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL_MM_OPT=<span class="string">&quot;INSTALL_BASE=<span class="variable">$PERL_BASE</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL_MB_OPT=<span class="string">&quot;--install_base <span class="variable">$PERL_BASE</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> PERL5LIB=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/lib/perl5&quot;</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/bin<span class="variable">$&#123;PATH:+:$PATH&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">export</span> MANPATH=<span class="string">&quot;<span class="variable">$PERL_BASE</span>/man<span class="variable">$&#123;MANPATH:+:$MANPATH&#125;</span>&quot;</span></span><br><span class="line"><span class="comment"># For a full list of active aliases, run `alias`.</span></span><br><span class="line"><span class="comment"># Example aliases</span></span><br><span class="line"><span class="comment"># alias paru=&quot;paru --needed --noconfirm&quot;</span></span><br><span class="line">UGIT_COMMIT=<span class="string">&quot;<span class="variable">$&#123;USER&#125;</span>@<span class="subst">$(fastfetch |grep Host| awk -F&#x27;(&#x27; &#x27;&#123;print $2&#125;&#x27;|awk -F&#x27;)</span>&#x27; &#x27;&#123;print <span class="variable">$1</span>&#125;&#x27;)&quot;</span></span><br><span class="line">UGIT_COMMIT=$(<span class="built_in">echo</span> <span class="variable">$UGIT_COMMIT</span> | sed <span class="string">&#x27;s/ /\-/g&#x27;</span>)</span><br><span class="line"><span class="built_in">alias</span> \</span><br><span class="line">    zpull=<span class="string">&quot;git pull&quot;</span> \</span><br><span class="line">    zpush=<span class="string">&quot;git add . &amp;&amp; git commit -m &quot;</span><span class="variable">$UGIT_COMMIT</span><span class="string">&quot; &amp;&amp; git push&quot;</span> \</span><br><span class="line">    del=<span class="string">&#x27;trash-put&#x27;</span> \</span><br><span class="line">    nvimdiff=<span class="string">&quot;nvim -d&quot;</span> \</span><br><span class="line">    ip=<span class="string">&quot;ip -color=auto&quot;</span> \</span><br><span class="line">    e=<span class="string">&quot;exa --long --header --color=auto --icons -a&quot;</span> \</span><br><span class="line">    <span class="built_in">ls</span>=<span class="string">&quot;exa --header --color=auto --icons &quot;</span> \</span><br><span class="line">    grep=<span class="string">&quot;grep --color=auto&quot;</span> \</span><br><span class="line">    diff=<span class="string">&quot;diff --color=auto&quot;</span> \</span><br><span class="line">    bat=<span class="string">&quot;bat --color=auto&quot;</span> \</span><br><span class="line">    make=<span class="string">&quot;colormake&quot;</span> \</span><br><span class="line">    ping=<span class="string">&quot;gping&quot;</span> \</span><br></pre></td></tr></table></figure></p></li>
</ol>
<h2 id="安装配置texlive">安装配置TexLive</h2>
<div class="tabs" id="texlive"><ul class="nav-tabs"><li class="tab active"><a href="#texlive-1">pacman安装texlive</a></li><li class="tab"><a href="#texlive-2">镜像安装texlive</a></li></ul><div class="tab-content"><div class="tab-pane active" id="texlive-1"><p>在<code>ArchLinux</code>中包含了软件包<code>texlive</code>其包括了所有的宏包，同时也有<code>texlive-doc</code>软件包，其包括了所有包的说明文档，体积较大，如果电脑一直联网则可以不安装<code>texlive-doc</code>,
当使用<code>texdoc</code>来查阅说明文档时，它会自动连网查询。</p>
<figure class="highlight sh"><figcaption><span>Install Texlive</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S texlive texlive-langchinese texlive-doc </span><br></pre></td></tr></table></figure>
<div class="note primary">
<p>
注意：当安装完<code>texlive</code>后，其自动安装了命令<code>texdoc</code>,
这方便查询宏包说明。在我的新台式机上采用了<code>pacman</code>安装方式，以取代<code>Texlive.iso</code>镜像的安装方法,
因为使用<code>pacman</code>管理<code>texlvie</code>可以不受每年都安装一遍<code>texlive</code>的麻烦，实现一劳永逸。具体问题可以参考:
<a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/wiki/TeX_Live">Texlive-ArchWiki</a>
</p>
</div></div><div class="tab-pane" id="texlive-2"><p>由于<code>TexLive</code>每年都会有新的版本，可以下载带年份的也可以下载不带年份的ISO镜像。</p>
<ol type="1">
<li>下载安装镜像<code>Texlive.iso</code>：
<ul>
<li><a
target="_blank" rel="noopener" href="https://mirror.ctan.org/systems/texlive/Images/">最近CTAN(自动检测)</a></li>
<li><a
target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/Images/">清华大学镜像源</a></li>
<li><a
target="_blank" rel="noopener" href="https://mirrors.ustc.edu.cn/CTAN/systems/texlive/Images/">中国科学技术大学镜像源</a></li>
</ul></li>
<li>挂载ISO镜像</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -o loop texlive2024.iso  /mnt/</span><br><span class="line">cd /mnt</span><br><span class="line">sudo ./install-tl	</span><br></pre></td></tr></table></figure>
<p>出现选项后，输入 I 直接安装（也可以更改选项）。不出意外的话，5
分钟应该就 OK 了， 然后退出 root 用户。</p>
<ol start="3" type="1">
<li>设置环境变量</li>
</ol>
<p>如果在安装过程中选择了建立超链接，则不必考虑环境变量，所以<label style="color:red">在安装时要建立超链接</label>，这样子可方便一些。texlive-en.pdf
中说明：</p>
<div class="note primary">
<p>
If you elected to create symlinks in standard directories (described in
section 3.2.4), then there is no need to edit environment variables.
Otherwise, on Unix systems, the directory of the binaries for your
platform must be added to the search path. (On Windows, the installer
takes care of this.)
</p>
</div>
<ol start="4" type="1">
<li>卸载ISO镜像并更新texlive</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo umount /mnt/</span><br><span class="line">sudo tlmgr update --self</span><br><span class="line">sudo tlmgr update --all</span><br></pre></td></tr></table></figure>
<ul>
<li>默认情况下，会自动搜索合适的镜像来更新，也可以使用<code>–repository</code>
选项指定了要使用哪一个<code>CTAN</code>镜像。例如使用<code>USTC</code>镜像：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo tlmgr update --self --repository http://mirrors.ustc.edu.cn/CTAN/systems/texlive/tlnet/</span><br><span class="line">sudo tlmgr update --all  --repository http://mirrors.ustc.edu.cn/CTAN/systems/texlive/tlnet/</span><br></pre></td></tr></table></figure>
<ul>
<li>为了方便我们也可以直接设置<code>texlive</code>
源为国内源，例如切换为清华源或华中科技大学源</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo tlmgr option repository https://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet</span><br><span class="line">sudo tlmgr repository set    http://mirror.hust.edu.cn/CTAN/systems/texlive/tlnet</span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>字体设置</li>
</ol>
<p>XeTeX和LuaTeX可以直接使用系统字体,
但Texlive自带的字体不在系统的字体目录中,所以当使用XeLaTeX
编译文件时,如果使用了texlive里面带的字体,就会出错,这时需要进行如下配置,让系统可以识别texlive所带的字体就可以了.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /usr/local/texlive/2024/texmf-var/fonts/conf/texlive-fontconfig.conf   /etc/fonts/conf.d/09-texlive.conf</span><br><span class="line">sudo fc-cache -fsv</span><br></pre></td></tr></table></figure>
<ol start="6" type="1">
<li><p>大版本升级。下载新的ISO镜像，然后直接删除旧版镜像或者备份
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/texlive/2023</span><br></pre></td></tr></table></figure> 清空路径 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> tlmgr path remove</span><br></pre></td></tr></table></figure> 重复步骤<code>1-5</code>,
重新安装最新版本。另外也可以直接参考官方不重装升级法：<a
target="_blank" rel="noopener" href="https://tug.org/texlive/upgrade.html">Upgrade from TeX Live 2023
to 2024</a>,
这个方法我没有测试成功，感觉还是重新安装一下吧，问题较少。如果你能够提供一个标准的安装方法，请邮件联系本人，先行谢过了。</p></li>
<li><p>卸载旧版<code>TexLive20**</code>的其他方法</p>
<ul>
<li>执行内置命令<code>sudo tlmgr remove --all</code></li>
<li>直接删除对应目录： <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/texlive/20**</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf ~/.texlive20**</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /usr/local/share/texmf</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/lib/texmf</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /etc/texmf</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf ~/.texlive</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ol></div></div></div>
<p>自定义宏包的安装路径，为了确保在使用<code>pacman</code>安装<code>texlvie</code>和使用镜像<code>texlive202*.iso</code>安装<code>texlive</code>均能使用自定义宏包，应当把自定义的宏包存放在<code>latex</code>的默认路径中，此处根据使用<code>xelate</code>编译文件时的输入信息确定为：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/texmf-dist/tex/latex/YourPackage/xxxx.sty</span><br></pre></td></tr></table></figure></p>
<h2 id="安装texmacs">安装TeXmacs</h2>
<ul>
<li><p>安装基本程序和建立系统字体链接，确保可以输入中文：
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S texmacs</span><br><span class="line"><span class="built_in">ln</span> -s /user/share/fonts/Windows11  <span class="variable">$HOME</span>/.TeXmacs/fonts/truetype/Windows11</span><br></pre></td></tr></table></figure></p></li>
<li><p>下载官方中文字体： <a
target="_blank" rel="noopener" href="https://ftp.texmacs.org/TeXmacs/fonts/TeXmacs-chinese-fonts.tar.gz">Chinese
fonts(6.8Mb)</a> , 将字体保存到<code>~/.TeXmacs</code>下，然后执行命令:
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gunzip -c TeXmacs-language-fonts.tar.gz | tar xvf -</span><br><span class="line"><span class="built_in">rm</span> ~/.TeXmacs/TeXmacs-chinese-fonts.tar.gz</span><br></pre></td></tr></table></figure></p></li>
<li><p>立刻使字体生效: <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">texmacs --delete-font-cache</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>参考资料：<a href="/2022/10/11/Texmacs%20的安装配置">Texmacs
的安装配置</a></p>
<hr />
<center>
<i class="fa fa-angle-double-down" style="font-size:48px;color:red"></i><font color="DarkViolet" size="8" >其他替代品或分别安装命令</font>
</center>
<hr />
<h2 id="安装usb无线网卡驱动">安装USB无线网卡驱动</h2>
<p>在使用有线网络台式机，如果有一个USB的无线网卡提供无线网络服务，那我们的手机、平板等设备会方便不少。偶然机会获得一个<code>TRL8188GU</code>无线网卡，经过互联网查询在<code>Archlinux</code>成功启用此无线网卡，实现无线网分享上网。具体可以参考我的另一篇文章<a
href="/2024/07/17/Archlinux安装USB无线网卡驱动">Archlinux安装USB无线网卡驱动</a>,
安装软件为：</p>
<ol type="1">
<li><p>克隆下<code>rtl8xxxu</code>的源文件： <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/a5a5aa555oo/rtl8xxxu.git</span><br></pre></td></tr></table></figure></p></li>
<li><p>如果您使用的<code>USB Wifi</code>发射器基于<code>RTL8188GU</code>或<code>RTL8192FU</code>芯片，您需要首先使用命令<code>usb_modeswitch</code>或<code>eject</code>切换到<code>Wifi</code>模式。</p></li>
<li><p>安装构建模块需要的软件包：<code>gcc</code>,<code>make</code>,<code>linux-headers</code>,<code>dkms</code>和其他的依赖软件。</p></li>
<li><p>构建和安装模块</p>
<ul>
<li><p><em>使用传统方式</em></p>
<p><code>make clean modules &amp;&amp; sudo make install</code></p></li>
<li><p><em>使用 DKMS 方式<strong>(推荐)</strong></em></p>
<p><code>sudo dkms install $PWD</code></p></li>
<li><p><em>基于<code>ArchLinux</code>的发行版用户</em></p>
<p>在<code>AUR</code>中安装软件包： <a
target="_blank" rel="noopener" href="https://aur.archlinux.org/packages/rtl8xxxu-dkms-git">rtl8xxxu-dkms-git</a>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru -S rtl8xxxu-dkms-git</span><br></pre></td></tr></table></figure></p></li>
</ul></li>
<li><p>为芯片
<code>RTL8188EU/RTL8188FU/RTL8188GU/RTL8192EU/RTL8192FU</code>
安装固件(关键)</p>
<p><code>sudo make install_fw</code></p></li>
<li><p>载入模块</p>
<p><code>sudo modprobe rtl8xxxu_git</code></p></li>
</ol>
<div class="note primary"><p>驱动<code>rtl8xxxu-dkms-git</code>是为利用
<code>Linux mac80211</code> 堆栈而编写的各种
<code>Realtek RTL8XXX</code> 部件的替代驱动程序。
已知该驱动程序适用于许多 <code>RTL8723AU</code>，
<code>RL8188CU</code>、<code>RTL8188RU</code>、<code>RTL8191CU</code> 和
<code>RTL8192CU</code> 设备
此驱动程序正在开发中，功能有限集。特别是，它还不支持 40MHz 信道
和电源管理。但是，它应该比供应商驱动程序和内核 <code>mac80211</code>
堆栈中的 <code>benetifs</code> 内存占用量小。 它可以与
<code>drivers/staging/rtl8723au</code>、
<code>drivers/staging/rtl8192u</code> 和
<code>drivers/net/wireless/rtlwifi</code> 的驱动程序共存，
但您需要控制要加载的模块. 已启用<code>RTL8XXXU_UNTESTED</code>。
此选项可以检测尚未由驱动程序直接测试的
<code>Realtek 8723/8188/8191/8192 WiFi USB</code> 设备
作者或报告由第三方处理. 引用自<a
target="_blank" rel="noopener" href="https://openwrt.org/packages/pkgdata/kmod-rtl8xxxu">package:
kmod-rtl8xxxu</a></p>
</div>
<h2 id="安装绘图软件">安装绘图软件</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S pinta</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>此处提供两个绘图软件<code>pinta</code>和<code>drawing</code>，替代windows中的画图软件，个人在使用中感觉<code>pinta</code>相对更好用一些。除此之外还有一款适用于<code>KDE</code>桌面环境的<code>krita</code>,
它比<code>pinta</code>功能更加强大，但是其要求电脑有更好的性能，所以电脑性能有限的情况下安装<code>pinta</code>,
足够的话建议使用<code>krita</code>.</p>
</div>
<h2 id="安装截图工具">安装截图工具</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S flameshot</span><br></pre></td></tr></table></figure>
<h2 id="安装图像查看器">安装图像查看器</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S nomacs</span><br><span class="line">or </span><br><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S feh imagemagick</span><br><span class="line">or  </span><br><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S xnviewmp</span><br></pre></td></tr></table></figure>
<h2 id="安装浏览器firefox">安装浏览器<code>firefox</code></h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S firefox xdg-desktop-portal xdg-desktop-portal-kde</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>注意：2023年12月24日发现，<code>cn</code>源内去除了<code>tor-browser</code>,
所以不能使用<code>pacman</code>安装了,
如果执行<code>sudo pacman -S torbrowser</code>
将会出现一个<code>torbrowser</code>的安装器，它不是浏览器本身。</p>
</div>
<h2 id="安装下载软件xtreme-download-manager">安装下载软件Xtreme Download
Manager</h2>
<p>Xtreme下载管理器是一款强大的工具，能提高下载速度达500%，保存流媒体视频，恢复中断下载，并安排和转换下载。XDM与Chrome、Firefox
Quantum、Opera、Vivaldi等基于Chromium和Firefox的浏览器无缝集成，接管下载并保存网络流媒体视频。内置的视频转换器可将下载的视频转换为多种格式，支持100多种设备。</p>
<div class="tabs" id="xdman"><ul class="nav-tabs"><li class="tab active"><a href="#xdman-1">aur源安装</a></li><li class="tab"><a href="#xdman-2">手动安装</a></li></ul><div class="tab-content"><div class="tab-pane active" id="xdman-1"><figure class="highlight sh"><figcaption><span>Install Xtreme Download Manager</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview --noconfirm -S xdman-beta-bin</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="xdman-2"><p><a
target="_blank" rel="noopener" href="https://xtremedownloadmanager.com/#downloads">xdm官网</a>,点开链接→解压缩→切换到解压后的文件夹
<code>xdm-setup-7.2.11</code>→执行脚本安装程序.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ./xdm-setup-7.2.11</span><br><span class="line">chmod +x install.sh</span><br><span class="line">./install.sh</span><br></pre></td></tr></table></figure></div></div></div>
<h2 id="安装词典软件goldendict">安装词典软件Goldendict</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman --needed --noconfirm -S goldendict-ng-git mplayer</span><br></pre></td></tr></table></figure>
<ul>
<li>配置词典：打开软件<code>goldendict</code>→点击<code>编辑</code>→<code>词典</code>
→设置词典软件路径。</li>
<li>配置构词法规则：点击<code>构词法规则</code>→设置好构词法路径。</li>
<li>关闭全文搜索：点击<code>编辑</code>→ <code>首选项</code>
→<code>全文搜索</code> 关闭全文搜索。</li>
<li>配置播放声音：切换到<code>音频</code> → <code>播放</code>
→<code>使用外部程序播放:mplayer</code> 。</li>
</ul>
<details>
<summary>
<label style="color:blue">Goldendict添加文本翻译</label>
</summary>
<figure class="highlight python"><figcaption><span>translatorGD.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python3</span></span><br><span class="line"><span class="comment"># vim:fenc=utf-8</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> hashlib <span class="keyword">import</span> md5</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line">caiyunxiaoyiKey=<span class="string">&quot;&quot;</span></span><br><span class="line">baiduKey=&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;YourID&quot;</span>,<span class="string">&quot;secret&quot;</span>:<span class="string">&quot;YourSecret&quot;</span>&#125;</span><br><span class="line">xiaoniuKey=<span class="string">&quot;YourKey&quot;</span></span><br><span class="line">sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">originalText = sys.argv[<span class="number">1</span>]</span><br><span class="line">css = <span class="string">&quot;&quot;&quot;&lt;style type=&quot;text/css&quot;&gt;</span></span><br><span class="line"><span class="string">.engine &#123;</span></span><br><span class="line"><span class="string">  font-family: &quot;MiSansVF&quot;;</span></span><br><span class="line"><span class="string">  font-size: 18px;</span></span><br><span class="line"><span class="string">  color: #578bc5;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.originalText &#123;</span></span><br><span class="line"><span class="string">    font-size: 120%;</span></span><br><span class="line"><span class="string">    font-family: &quot;MiSansVF&quot;;</span></span><br><span class="line"><span class="string">    font-weight: 600;</span></span><br><span class="line"><span class="string">    display: inline-block;</span></span><br><span class="line"><span class="string">    margin: 0rem 0rem 0rem 0rem;</span></span><br><span class="line"><span class="string">    color: #2a5598;</span></span><br><span class="line"><span class="string">    margin-bottom: 0.6rem;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">.frame &#123;</span></span><br><span class="line"><span class="string">    margin: 1rem 0.5rem 0.5rem 0;</span></span><br><span class="line"><span class="string">    padding: 0.7rem 0.5rem 0.5rem 0;</span></span><br><span class="line"><span class="string">    border-top: 3px dashed #eaeef6;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">definition &#123;</span></span><br><span class="line"><span class="string">    font-family: &quot;MiSansVF&quot;;</span></span><br><span class="line"><span class="string">    color: #2a5598;</span></span><br><span class="line"><span class="string">    height: 120px;</span></span><br><span class="line"><span class="string">    padding: 0.05em;</span></span><br><span class="line"><span class="string">    font-weight: 500;</span></span><br><span class="line"><span class="string">    font-size: 16px;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/style&gt;&quot;&quot;&quot;</span></span><br><span class="line"><span class="built_in">print</span>(css)</span><br><span class="line"><span class="built_in">print</span>( <span class="string">&#x27;&lt;div class=&quot;originalText&quot;&gt;&#x27;</span> + originalText + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;&lt;br&gt;&lt;br&gt;&#x27;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">output</span>(<span class="params">engineName:<span class="built_in">str</span>,definition:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;span class=&quot;engine&quot;&gt;&#x27;</span> + engineName + <span class="string">&quot;&lt;/span&gt;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;div class=&quot;frame&quot;&gt;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&lt;definition&gt;&#x27;</span> + definition + <span class="string">&#x27;&lt;/definition&gt;&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&lt;/div&gt;&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&lt;br&gt;&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Youdao</span>():</span><br><span class="line">    <span class="keyword">global</span> originalText</span><br><span class="line">    headers = &#123;</span><br><span class="line">            <span class="string">&#x27;authority&#x27;</span>: <span class="string">&#x27;aidemo.youdao.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;accept&#x27;</span>: <span class="string">&#x27;application/json, text/javascript, */*; q=0.01&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;accept-language&#x27;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;origin&#x27;</span>: <span class="string">&#x27;https://ai.youdao.com&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;referer&#x27;</span>: <span class="string">&#x27;https://ai.youdao.com/&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-ch-ua&#x27;</span>: \</span><br><span class="line">                    <span class="string">&#x27;&quot;Chromium&quot;;v=&quot;106&quot;,\</span></span><br><span class="line"><span class="string">                    &quot;Microsoft Edge&quot;;v=&quot;106&quot;,\</span></span><br><span class="line"><span class="string">                    &quot;Not;A=Brand&quot;;v=&quot;99&quot;&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-fetch-dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-fetch-mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;sec-fetch-site&#x27;</span>: <span class="string">&#x27;same-site&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;user-agent&#x27;</span>: \</span><br><span class="line">                    <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64)\</span></span><br><span class="line"><span class="string">                    AppleWebKit/537.36 (KHTML, like Gecko)\</span></span><br><span class="line"><span class="string">                    Chrome/106.0.0.0 Safari/537.36 Edg/106.0.1370.47&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">            <span class="string">&#x27;q&#x27;</span>: originalText,</span><br><span class="line">            <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;Auto&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;to&#x27;</span>: <span class="string">&#x27;Auto&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        output(<span class="string">&quot;有道翻译&quot;</span>,</span><br><span class="line">               requests.post(<span class="string">&#x27;https://aidemo.youdao.com/trans&#x27;</span>,</span><br><span class="line">                             headers=headers, data=data).json()[<span class="string">&quot;translation&quot;</span>][<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        output(<span class="string">&quot;有道翻译&quot;</span>,<span class="string">&quot;错误&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Google</span>():</span><br><span class="line">    <span class="keyword">global</span> originalText</span><br><span class="line">    definition=<span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> requests.get(<span class="string">&quot;https://translate.googleapis.com/translate_a/single?\</span></span><br><span class="line"><span class="string">                client=gtx&amp;sl=auto&amp;tl=&amp;dt=at&amp;dt=bd&amp;dt=ex&amp;dt=ld&amp;dt=md&amp;dt=qca&amp;dt=rw&amp;\</span></span><br><span class="line"><span class="string">                dt=rm&amp;dt=ss&amp;dt=t&amp;q=&quot;</span>+originalText,\</span><br><span class="line">                headers=&#123;<span class="string">&quot;user-agent&quot;</span>:\</span><br><span class="line">                <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0;\</span></span><br><span class="line"><span class="string">                Win64; x64; rv:59.0)&quot;</span>&#125;).json()[<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">if</span> x[<span class="number">0</span>]:</span><br><span class="line">                definition += x[<span class="number">0</span>]</span><br><span class="line">        output(<span class="string">&quot;谷歌翻译&quot;</span>,definition)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        output(<span class="string">&quot;谷歌翻译&quot;</span>,<span class="string">&quot;错误&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Caiyun</span>():</span><br><span class="line">    <span class="keyword">global</span> originalText</span><br><span class="line">    <span class="keyword">global</span> caiyunxiaoyiKey</span><br><span class="line">    payload = &#123;</span><br><span class="line">        <span class="string">&quot;source&quot;</span>: originalText,</span><br><span class="line">        <span class="string">&quot;trans_type&quot;</span>: <span class="string">&quot;auto2zh&quot;</span>,</span><br><span class="line">        <span class="string">&quot;request_id&quot;</span>: <span class="string">&quot;demo&quot;</span>,</span><br><span class="line">        <span class="string">&quot;detect&quot;</span>: <span class="literal">True</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;content-type&quot;</span>: <span class="string">&quot;application/json&quot;</span>,</span><br><span class="line">        <span class="string">&quot;x-authorization&quot;</span>: <span class="string">&quot;token &quot;</span> + caiyunxiaoyiKey,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        output(<span class="string">&quot;彩云小译&quot;</span>,</span><br><span class="line">               json.loads(requests.post(</span><br><span class="line">                   <span class="string">&quot;http://api.interpreter.caiyunai.com/v1/translator&quot;</span>,</span><br><span class="line">                   data=json.dumps(payload), headers=headers).text)[<span class="string">&quot;target&quot;</span>])</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        output(<span class="string">&quot;彩云小译&quot;</span>,<span class="string">&quot;错误:&quot;</span>+<span class="built_in">str</span>(e))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Baidu</span>():</span><br><span class="line">    <span class="keyword">global</span> originalText</span><br><span class="line">    <span class="keyword">global</span> baiduKey</span><br><span class="line">    salt = random.randint(<span class="number">32768</span>, <span class="number">65536</span>)</span><br><span class="line">    s=baiduKey[<span class="string">&quot;id&quot;</span>] + originalText + <span class="built_in">str</span>(salt) + baiduKey[<span class="string">&quot;secret&quot;</span>]</span><br><span class="line">    sign = md5(s.encode(<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        output(<span class="string">&quot;百度翻译&quot;</span>,</span><br><span class="line">               requests.post(</span><br><span class="line">                   <span class="string">&#x27;http://api.fanyi.baidu.com/api/trans/vip/translate&#x27;</span>,</span><br><span class="line">                   params=&#123;<span class="string">&#x27;appid&#x27;</span>: baiduKey[<span class="string">&quot;id&quot;</span>],</span><br><span class="line">                           <span class="string">&#x27;q&#x27;</span>: originalText, <span class="string">&#x27;from&#x27;</span>: <span class="string">&#x27;auto&#x27;</span>, <span class="string">&#x27;to&#x27;</span>: <span class="string">&#x27;zh&#x27;</span>,</span><br><span class="line">                           <span class="string">&#x27;salt&#x27;</span>: salt, <span class="string">&#x27;sign&#x27;</span>: sign&#125;</span><br><span class="line">                   ).json()[<span class="string">&quot;trans_result&quot;</span>][<span class="number">0</span>][<span class="string">&quot;dst&quot;</span>])</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        output(<span class="string">&quot;百度翻译&quot;</span>,<span class="string">&quot;错误&quot;</span>+<span class="built_in">str</span>(e))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">Xiaoniu</span>():</span><br><span class="line">    <span class="keyword">global</span> originalText</span><br><span class="line">    <span class="keyword">global</span> xiaoniuKey</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        output(<span class="string">&quot;小牛翻译&quot;</span>,</span><br><span class="line">               json.loads(requests.post(</span><br><span class="line">                   <span class="string">&quot;http://api.niutrans.com/NiuTransServer/translation?&quot;</span>,</span><br><span class="line">                   data=&#123;<span class="string">&quot;from&quot;</span>: <span class="string">&#x27;en&#x27;</span>, <span class="string">&quot;to&quot;</span>: <span class="string">&#x27;zh&#x27;</span>,\</span><br><span class="line">                           <span class="string">&quot;apikey&quot;</span>: xiaoniuKey,\</span><br><span class="line">                           <span class="string">&quot;src_text&quot;</span>: originalText&#125;).text)[<span class="string">&#x27;tgt_text&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        output(<span class="string">&quot;小牛翻译&quot;</span>,<span class="string">&quot;错误&quot;</span>+<span class="built_in">str</span>(e))</span><br><span class="line">threads=[]</span><br><span class="line"><span class="comment"># threads.append(threading.Thread(target=Caiyun))</span></span><br><span class="line"><span class="comment"># threads.append(threading.Thread(target=Google))</span></span><br><span class="line">threads.append(threading.Thread(target=Xiaoniu))</span><br><span class="line">threads.append(threading.Thread(target=Baidu))</span><br><span class="line">threads.append(threading.Thread(target=Youdao))</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.start()</span><br></pre></td></tr></table></figure>
<p><strong>translatorGD脚本配置方法</strong></p>
<ul>
<li><p>在使用脚本前，请输入申请到的百度帐号和密钥，小牛的密钥</p></li>
<li><p>Linux中配置 <figure class="highlight sh"><figcaption><span>命令行</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python <span class="string">&quot;/home/feng/软件/goldendict/translatorGD.py&quot;</span> %GDWORD%</span><br></pre></td></tr></table></figure></p></li>
<li><p>Windows配置 <img src="/Picture/pygoldendict.png"
title="Python文本翻译" alt="translatorGD配置方法" /></p></li>
</ul>
</details>
<h2 id="安装腾讯会议和qq">安装腾讯会议和QQ</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview -S wemeet-bin linuxqq</span><br></pre></td></tr></table></figure>
<h2 id="安装音乐播放器">安装音乐播放器</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview -S listen1-desktop-appimage</span><br></pre></td></tr></table></figure>
<h2 id="安装小白羊云盘">安装小白羊云盘</h2>
<figure class="highlight sh"><figcaption><span>完美运行版本</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S nodejs-lts-hydrogen</span><br><span class="line">paru --skipreview -S electron22-bin</span><br><span class="line">paru --skipreview -S aliyunpan-gaozhangmin-bin</span><br></pre></td></tr></table></figure>
<div class="note primary"><ul>
<li><code>aur</code>中有两个版本的小白羊云盘，分别是<code>xbydriver-bin</code>和<code>aliyunpan-gaozhangmin-bin</code>，前者更新快一些，但是会导致一些错误，同时基本的下载也不能保证，后者更新慢一些，估计应该是作者在修复问题，这一版可以完美运行，所以此处推荐安装后者。</li>
<li>使用<code>paru</code>安装<code>electron22-bin</code>是因为<code>bin</code>版已经编译好，不再需要系统编译，成功率更高。</li>
<li>虽然<code>aliyunpan-gaozhangmin-bin</code>依赖于<code>nodejs-lts-hydrogen</code>，但是在安装成功之后使用<code>pacman</code>再安装最新的<code>nodejs</code>后，小白羊云盘仍然可以正确运行。</li>
</ul>
</div>
<h2
id="关于windows与linux的双系统设置">关于Windows与Linux的双系统设置</h2>
<p>文章前述是先安装好 Windows, 然后再安装 Linux
的操作步骤。但是在使用过程中不可避免的会遇到重装 windows的情况，比如我的
ThinkpadT490 由于安装的Windows11
随着升级变的越来越不好用，于是决定重新换回 <code>Windows10 LTSC</code>
版本，但是在安装完成后如前所述 <code>Windows</code>的安装程序会覆盖掉
<code>Linux</code>的引导程序<code>grub</code>.
但是<code>Linux</code>系统却没有受到影响，于是要恢复双系统在<code>grub</code>
中选择启动，需要重新构建一下<code>grub</code>。</p>
<ol type="1">
<li><p>将启动U盘插入电脑<code>USB</code>口，重启电脑使其U盘启动。</p></li>
<li><p>由于Ventoy是多系统启动盘，原来的系统安装的是<code>ArchLinux</code>,
于是选择<code>ArchLinux</code>的镜像启动。</p></li>
<li><p>在我的电脑分区情况下执行： <figure class="highlight sh"><figcaption><span>恢复grub双系统启动</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p2  /mnt/</span><br><span class="line">mount /dev/nvme0n1p1 /mnt/boot/efi</span><br><span class="line">mount /dev/nvme0n1p4 /mnt/home</span><br><span class="line">arch-chroot /mnt</span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ArchLinux</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>
这样<code>Linux</code>系统就完成了<code>grub</code>的安装,
退出系统后重新启动。</p></li>
<li><p>此时<code>grub</code>并没有识别到<code>windows</code>的启动项，进入<code>Linux</code>后，再次执行命令
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
此时<code>grub</code>识别到<code>windows</code>系统，重新系统则实现了双系统的完美选择启动。</p></li>
</ol>
<h2 id="软件故障修复">软件故障修复</h2>
<h3 id="sddm启动时英文改中文">SDDM启动时英文改中文</h3>
<p>当KDE升级为Plasma6后，发现刚安装的系统启动时登录界面一直显示英文，解决方法为：</p>
<p>修改文件<code>/usr/lib/systemd/system/sddm.service</code>，
在<code>[Service]</code>下添加<code>Environment=LANG=zh_CN.UTF-8</code>,
即</p>
<figure class="highlight sh"><figcaption><span>/usr/lib/systemd/system/sddm.service</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Simple Desktop Display Manager</span><br><span class="line">Documentation=man:sddm(1) man:sddm.conf(5)</span><br><span class="line">Conflicts=getty@tty1.service</span><br><span class="line">After=systemd-user-sessions.service getty@tty1.service plymouth-quit.service systemd-logind.service</span><br><span class="line">PartOf=graphical.target</span><br><span class="line">StartLimitIntervalSec=30</span><br><span class="line">StartLimitBurst=2</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/usr/bin/sddm</span><br><span class="line">Restart=always</span><br><span class="line">Environment=LANG=zh_CN.UTF-8</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">Alias=display-manager.service</span><br></pre></td></tr></table></figure>
<h3 id="guake终端f12失效">Guake终端F12失效</h3>
<p>2024年03月08日, 升级Archlinux后，KDE桌面环境由Plasma5升级为Plasma6,
其默认启用了<code>wayland</code>,
这会导致<code>guake</code>的<code>F12</code>快捷键失效。解决方法为：</p>
<ol type="1">
<li>打开<code>Guake 首选项</code>
→<code>键盘快捷键</code>→<code>切换Guake是否可见</code>,
点右侧的快捷键后，再按<code>Backspace</code>键取消<code>F12</code>绑定。</li>
<li><code>系统设置</code>→<code>键盘</code>→<code>快捷键</code>→<code>新增</code>→<code>命令或脚本</code>→输入<code>guake-toggle</code>或<code>guake -v</code>
→<code>添加自定义快捷键</code>→按<code>F12</code>→右下角<code>应用</code>。</li>
</ol>
<h3
id="文件管理器dolphin挂载双系统的windows11-ntfs分区失败">文件管理器Dolphin挂载双系统的Windows11
NTFS分区失败</h3>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S ntfs-3g</span><br><span class="line"><span class="built_in">sudo</span> ntfsfix -d /dev/nvme0n1p6</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>注意：此命令是删除了之前系统挂载NTFS硬盘时，产生的多余错误标签,
并不会格式硬盘，不会造成资料损失，放心使用。如果您并没有遇到<code>Dolphin</code>无法挂载<code>NTFS</code>分区的情况，请忽视此问题修复。</p>
</div>
<h3 id="grub丢失导致系统无法启动">Grub丢失导致系统无法启动</h3>
<p>2023年12月29日,
由于设置BIOS时，点了<code>F9</code>,导致BIOS恢复了默认设置。启动项中的<code>Grub</code>丢失，系统无法启动。解决方法为：插入安装系统时的启动<code>U</code>盘，然后按前述安装过程依次挂载各硬盘到指定目录(<label style="color:red">特别注意！不要格式化，因为系统其他部分还是完好的！！</label>)，
由于<code>ArchLinux Live</code>默认没有安装<code>os-prober</code>,
而此程序的作用就是自动探测操作系统，于是执行命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mount /dev/nvme0n1p2  /mnt/</span><br><span class="line">mount /dev/nvme0n1p1 /mnt/boot/efi</span><br><span class="line">mount /dev/nvme0n1p4 /mnt/home</span><br><span class="line">arch-chroot /mnt</span><br><span class="line">pacman -S os-prober</span><br><span class="line">grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=ArchLinux</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">exit</span> </span><br><span class="line">reboot -h now</span><br></pre></td></tr></table></figure>
<details>
<summary>
<label style="color:blue">Firefox的问题及修复汇总</label>
</summary>
<ol type="1">
<li>播放多媒体时不出声音了</li>
</ol>
<p>2022-06-14 在使用<code>firefox</code> 版本号为
V101.0.1(64位)收看视频时，发现都默认禁用了声音自动播放，这里给出设置方法。
2023-12-12 <code>firefox</code> 版本号 V120.0.1(64位)
再次遇到这个问题。</p>
<div class="note primary"><p>点击右上角<code>三个横杠</code> →点击左侧<code>隐私与安全</code> →
点击右侧<code>权限</code> → 向下<code>自动播放</code> →
向右<code>设置...</code> →
最上面<code>所有网站的默认值</code>设置为<code>音频和视频</code>。</p>
</div>
<ol start="2" type="1">
<li>安装 firefox-ublock 插件</li>
</ol>
<div class="tabs" id="installublock"><ul class="nav-tabs"><li class="tab active"><a href="#installublock-1">aur源安装</a></li><li class="tab"><a href="#installublock-2">手动安装</a></li></ul><div class="tab-content"><div class="tab-pane active" id="installublock-1"><p>2022-10-07
在新安装的Archlinux上安装此插件时，由于网络原因不能正常访问<code>uBlock</code>的发布网站，但是在<code>Archlinux</code>下可以使用<code>yay</code>
或 <code>paru</code> 安装，安装到<code>firefox</code>的命令如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">paru --skipreview -S firefox-ublock-origin</span><br><span class="line">or </span><br><span class="line">yay -S  firefox-ublock-origin</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>升级KDE-Plasma6后不显示<code>最大化</code>、<code>最小化</code>按钮</li>
</ol>
<p>参考<a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Firefox">Firefox-ArchWik</a>,采用<code>4.5 KDE integration</code>
的第二种方法：</p>
<figure class="highlight sh"><figcaption><span>fix firefox missing min and max button</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman --needed --noconfirm -S xdg-desktop-portal xdg-desktop-portal-kde</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="installublock-2"><p>不知道从何时开始，火狐Firefox禁止中国大陆IP访问商店内的广告拦截扩展页面。当打开uBlockOrigin
, AdGuard,AdBlocker 等页面时，会显示“此页面在您的地区不可用”
。所以本节记录手动安装<code>uBlock</code>的方法。</p>
<ol type="1">
<li>打开<code>uBlock</code>发布页<a
target="_blank" rel="noopener" href="https://github.com/gorhill/uBlock/releases">https://github.com/gorhill/uBlock/releases</a></li>
<li>点击发页页上对应Firefox的发布链接，等待安装即可。</li>
</ol></div></div></div>
</details>
<h3 id="thinkpad-t490-识别m2.-2248固态硬盘">ThinkPad-T490 识别M2.
2248固态硬盘</h3>
<p>在安装好<code>TLP</code>之后解决了<code>ArchLinux</code>无法从睡眠中唤醒的问题，意外的部分解决了<code>M2. 2248</code>固态硬盘的识别问题。说其部分解决，因为系统正常启动后并不识别这个外加于<code>WWAN</code>口上的固态硬盘，其在睡眠后再唤醒，文件管理器<code>Dolphin</code>左侧就可以识别出此硬盘。在<code>Windows</code>下启动后就是识别的，而在<code>Linux</code>下部分的识别也是一大进步。</p>
<p>关于这个问题，或许是系统启动机制导致的，<code>Linux</code>启动时会扫描硬盘识别硬件，但是这个<code>WWAN</code>口本是一个无线网卡槽，所以不是标准设计，系统就没有识别。但是，睡眠后再唤醒，这期间电脑肯定又触发了某一个操作，此操作使得系统识别了这个<code>M2. 2248</code>固态硬盘，只是目前我还没有确定是哪一个操作，如果把这个操作添加到开机启动中，那么这个问题也就完全解决了。当前时间<label style="color:gold">2023-12-14
22:06</label>, 先记录下这个问题，待后面研究透后，再来修改。</p>
<h3 id="修复asus华硕主板在amd-cpu下的启动bug">修复ASUS华硕主板在AMD
CPU下的启动BUG</h3>
<p>最近入手一台组装机，主板型为华硕<code>TUF-GAMING-B550M</code>,
出厂日期为2020年，每次启动时会出现错误提示信息<code>No irq handler for vector</code>，
经过文章<a target="_blank" rel="noopener" href="https://bbs.archlinux.org/viewtopic.php?id=262899">"No
irq handler for vector" messages during boot with AMD CPU</a>,
得到答案，这个错误提示是原来的<code>BIOS</code>的<code>BUG</code>,
更新到最新的<code>BIOS</code>即可解决。解决方法为：</p>
<ul>
<li>到华硕官网下载对应型号的<code>BIOS</code>:
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.asus.com.cn/support/download-center/">华硕下载中心</a>,
输入主板型号<code>TUF-GAMING-B550M</code>,
在右侧找到<code>驱动程序和工具软件</code></li>
<li><a
target="_blank" rel="noopener" href="https://www.asus.com.cn/motherboards-components/motherboards/tuf-gaming/tuf-gaming-b550m-plus/helpdesk_download?model2Name=TUF-GAMING-B550M-PLUS">驱动程序和工具软件</a>,
选择右侧的<code>BIOS &amp; 固件</code>,
点击<code>下载</code>下载最新的<code>BIOS</code>固件</li>
</ul></li>
<li>解压缩<code>TUF-GAMING-B550M-PLUS-WIFI-ASUS-3607.zip</code>到<code>U盘</code>中，得到<code>TUF-GAMING-B550M-PLUS-WIFI-ASUS-3607.CAP</code></li>
<li>重启系统，按<code>DEL</code>键进入到<code>BIOS</code>,
再切换到<code>Tool</code>选项卡，并点击<code>ASUS EZ Flash</code>.
选择<code>Storage</code>模式（本地更新更安全），
找到<code>U</code>盘中存放的文件<code>TUF-GAMING-B550M-PLUS-WIFI-ASUS-3607.CAP</code>,
稍后便开始自动更新。</li>
<li>确保电源稳定，不乱动鼠标，静等更新完毕。更新<code>BIOS</code>完成后，重新启动电脑，再次进入到<code>BIOS</code>中就可以看到更新好的最新版本<code>BIOS</code>版本了。</li>
<li>更新<code>BIOS</code>固件后，错误提示消失，电脑正常工作。</li>
<li>参考文章：
<ul>
<li><a
target="_blank" rel="noopener" href="https://www.asus.com.cn/support/faq/1044348/">如何更新主板的BIOS（包括不同CPU世代）</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1ig4y1372r/?p=1">华硕主板如何升级bios？保姆级教程来啦！</a>,
升级前重点看一下此视频。</li>
</ul></li>
</ul>
<h3 id="台式机接耳机时有嗒嗒声">台式机接耳机时有嗒嗒声</h3>
<p>在淘宝上买了一个14元的音响，连接电脑后发现有电流的噪音，于是今天暂时替换掉这个音响，转而使用蓝牙音响，此噪音消失。晚上插上耳机测试时，发现总是有规律的发出嗒嗒声，百度之后有人说是连接耳机孔的线与其他USB线的缠在一起，会有电磁感应，理论上这不可避免，但是如此有规律声响应当就是电脑运行时发出的电磁波产生的干扰。解决问题的关键应该是<label style="color:red">换一个好点的耳机</label>！真正的原因是，耳机的连线较长，它恰好充当了天线的作用！电脑工作时发现的有规律的电磁波会被它接收到，于是就有了这个有规律噪声，
而好一些的耳机在线上会有金属膜屏蔽外界信号或耳机有降噪功能，这样就不会嗒嗒声了。记住换个好点的耳机哈<code>^_^</code></p>
<h3 id="nautilus卡死">Nautilus卡死</h3>
<p>这两天实然<code>Nautilus</code>和<code>Firefox</code>都变的很不稳定，总是卡死，今天找到问题所在：因为对系统升级或安装卸载软件，导致一些系统不再需要的软件包仍有残余，从而使一些软件变的不稳定。解决方法是，当升级或安装卸载一些软件后，要及时使用命令<code>sudo pacman -Rns $(pacman -Qtdq)</code>清理掉无用的软件包。</p>
<h3 id="蓝牙无法打开">蓝牙无法打开</h3>
<p>由于系统升级等操作有可能造成<code>蓝牙无法打开</code>, 在文章<a
target="_blank" rel="noopener" href="https://blog.csdn.net/Insight__/article/details/132777714">Ubuntu
20.04出现蓝牙无法打开的问题（已解决）</a>中共找到以下四种解决方案：</p>
<h4 id="卸载并重新加载btusb内核模块支持蓝牙设备的内核模块">1.
卸载并重新加载<code>btusb</code>内核模块（支持蓝牙设备的内核模块）</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> rmmod btintel</span><br><span class="line"><span class="built_in">sudo</span> rmmod btusb</span><br><span class="line"><span class="built_in">sudo</span> modprobe btusb</span><br><span class="line"><span class="built_in">sudo</span> modprobe btintel</span><br></pre></td></tr></table></figure>
<div class="note primary"><p>2024年08月02日遇到此问题，通过重新加载<code>btusb</code>解决。2024年08月29日升级ArchLinux后再次遇到此问题，通过上述方法成功修复，于是做出修改。</p>
</div>
<h4 id="安装蓝牙工具和工具包">2. 安装蓝牙工具和工具包</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S --needed --noconfirm bluez bluez-utils pipewire-pulse bluedevil blueman</span><br></pre></td></tr></table></figure>
<h4 id="启动蓝牙服务">3. 启动蓝牙服务</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service bluetooth start</span><br></pre></td></tr></table></figure>
<h4 id="重新解除蓝牙设备的阻止">4. 重新解除蓝牙设备的阻止</h4>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rfkill block bluetooth</span><br><span class="line">rfkill unblock bluetooth</span><br></pre></td></tr></table></figure>
<h2 id="硬件故障修复">硬件故障修复</h2>
<h3 id="电脑开机噪音变大">电脑开机噪音变大</h3>
<ul>
<li><p>如果是用润滑油的风扇，那么时间用长了之后里面的润滑油会渐渐挥发掉，再加上现在气温很低，必然出现噪音的现象，建议给风扇加润滑油。打开机箱开机，仔细听听是哪个风箱发出的噪声，然后把风扇拆下，揭开风扇上的标签，会看到一个轴承，滴二滴润滑油就行了。</p></li>
<li><p>跟机箱内灰尘也有一定关系，建议定期除尘。</p></li>
<li><p>机箱外壳与机体衔接不紧，风扇在运转的时候会产生轻微振动导致外壳和机体连接不紧处产生噪音，建议重新安装机箱外壳，再不行就把外壳稍稍弄弯一点点，使得外壳与机体衔接更紧密。</p></li>
<li><p>电脑主机要放在一个平稳而坚固的台面上（比如地上）。</p></li>
<li><p>如机箱发出噪音应在适当的地方贴上泡沫塑料条，再盖紧机箱盖。</p></li>
<li><p>如果用户的电源噪音是由于开机的瞬间高电流造成的，可以安装滤波器或者是换用一个质量更好的电源，防止大电流冲击产生噪音。还可以购买一些具有滤波器功能的智能电源插座连接主机，以确保电脑电源不受到外界电流的干扰。</p></li>
</ul>
<h3 id="g无线键盘延迟"><code>2.4G</code>无线键盘延迟</h3>
<p><code>2.4G</code>无线键盘使用相当广泛，相对而言罗技、雷柏等大品牌对于无线信号处理较好，所以其不会发生无线电干扰。相对而言，一些国产的无线键盘鼠标都使用的公版<code>2.4G</code>发射接收装置，对于有多个无线装备的电脑，特别是台式机后机箱的<code>USB</code>插孔会导致<code>2.4G</code>频段的信号发生干扰，从而导致无线信号的丢失，于是出现了漏掉字母，输入延迟等故障。解决方法很简单：使用一根<code>USB</code>延长线，将<code>2.4G</code>发射器放在远离主机箱前后的位置。</p>
<h2 id="附录windows纯净版系统下载">附录:Windows纯净版系统下载</h2>
<h3 id="直接下载">直接下载</h3>
<ul>
<li><p><a
href="ed2k://%7Cfile%7Cen-us_windows_11_iot_enterprise_ltsc_2024_x64_dvd_f6b14814.iso%7C5144817664%7C5E748CCAC9DB8C0783B1559731BD7183%7C/">2024
windows11 企业LTSC版 x64(LoT)</a></p></li>
<li><p><a
href="ed2k://%7Cfile%7Cen-us_windows_11_enterprise_ltsc_2024_x64_dvd_965cfb00.iso%7C5125844992%7C6037A721E65A837B91C4F84356D7333F%7C/">2024
windows11 企业LTSC版 x64(英文)</a></p></li>
<li><p><a
href="ed2k://%7Cfile%7Czh-cn_windows_11_enterprise_ltsc_2024_x64_dvd_cff9cd2d.iso%7C5287520256%7CD6E4FE0BA5FD8A2F22FC9C0326481791%7C/">2024
windows11 企业LTSC版 x64(中文)</a></p></li>
<li><p><a
href="ed2k://%7Cfile%7CSW_DVD9_WIN_ENT_LTSC_2021_64BIT_ChnSimp_MLF_X22-84402.ISO%7C5044211712%7C1555B7DCA052B5958EE68DB58A42408D%7C/">2021
windows10 企业LTSC版 x64(中文)</a></p></li>
<li><p><a
href="ed2k://%7Cfile%7CSW_DVD9_WIN_ENT_LTSC_2021_32BIT_ChnSimp_MLF_X22-84401.ISO%7C3621132288%7CF67BB339ADFEFCF6ED22400EAACBD068%7C/">2021
windows10 企业LTSC版 x32(中文)</a></p></li>
</ul>
<div class="note primary"><p>注意：上述链接为磁力链，请使用<a
target="_blank" rel="noopener" href="https://www.xunlei.com/">迅雷</a>下载; 非LTSC版本，请到<a
target="_blank" rel="noopener" href="https://www.microsoft.com/zh-cn/software-download">Windows官网</a>下载。</p>
</div>
<h3 id="下载站">下载站</h3>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://hellowindows.cn/">Hello Windows</a></p></li>
<li><p><a
target="_blank" rel="noopener" href="https://msdn.sjjzm.com/win11.html">山己几子木</a></p></li>
<li><p><a target="_blank" rel="noopener" href="https://www.xitongku.com/">MSDN系统库</a></p></li>
</ul>
<h2 id="参考文章">参考文章</h2>
<details>
<summary>
<label style="color:blue">参考文章</label>
</summary>
<ol type="1">
<li>安装教程参考</li>
</ol>
<ul>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinuxcn.org/zh-cn/安装指南">安装指南-ArchLinux
中文维基</a></li>
<li><a target="_blank" rel="noopener" href="https://arch-linux.osrc.com/">archlinux简明指南</a></li>
<li><a
target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37367301/article/details/120343495">全网最简洁ArchLinux安装教程</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.jianshu.com/p/55dc4eab7014">无线网络（WiFi）下安装
ArchLinux + KDE 全过程教程（UEFI）</a></li>
</ul>
<ol start="2" type="1">
<li>Pacman 使用手册</li>
</ol>
<ul>
<li><a href="/2023/12/10/Pacman常用命令">Pacman常用命令</a></li>
</ul>
<ol start="3" type="1">
<li>配置国内源参考</li>
</ol>
<ul>
<li>最初配置: <a
target="_blank" rel="noopener" href="https://fengzhenhua.gitlab.io/2023/05/01/">ArchLinuxCN软件仓库</a></li>
<li>标准配置: <a
target="_blank" rel="noopener" href="https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/">Arch
Linux 中文社区仓库</a></li>
</ul>
<ol start="4" type="1">
<li>配置电源管理参考</li>
</ol>
<ul>
<li><a
target="_blank" rel="noopener" href="https://linrunner.de/tlp/installation/arch.html#thinkpads-only">Arch
Linux-TLP1.6documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://bbs.deepin.org/post/264669">TLP
电源管理简述</a></li>
</ul>
<ol start="5" type="1">
<li>配置<code>nvim</code>参考</li>
</ol>
<ul>
<li><a
target="_blank" rel="noopener" href="https://gitee.com/houdunwang/nvim">向军的Neovim配置</a></li>
</ul>
<ol start="6" type="1">
<li>配置<code>Goldendict</code>参考</li>
</ol>
<ul>
<li><a
target="_blank" rel="noopener" href="https://fengzhenhua.gitlab.io/2023/11/16/Goldendict添加文本翻译">Goldendict添加文本翻译</a></li>
<li><a
target="_blank" rel="noopener" href="https://fengzhenhua.gitlab.io/2023/12/02/Windows下配置Goldendict">Windows下配置Goldendict</a></li>
<li><a
target="_blank" rel="noopener" href="https://fengzhenhua.gitlab/io/2023/11/13/申请百度翻译Key">申请百度翻译Key</a></li>
<li><a href="/2023/05/08/Goldendict手册">Goldendict手册</a></li>
</ul>
</details>
<h2 id="archlinux相关">ArchLinux相关</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://arch.icekylin.online">archlinux 简明指南</a></li>
<li><a target="_blank" rel="noopener" href="https://ariesnine.cn">Archlinux 小记</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%94%B5%E8%84%91%E6%8A%80%E6%9C%AF/" rel="tag"># 电脑技术</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/02/23/%E8%AE%A1%E7%AE%97%E7%89%A9%E7%90%86%E5%9F%BA%E7%A1%802024/" rel="prev" title="计算物理基础2024">
                  <i class="fa fa-angle-left"></i> 计算物理基础2024
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/04/15/2022%E5%B9%B4%E6%98%9F%E5%BA%A7/" rel="next" title="2022年星座">
                  2022年星座 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; Sat Sep 03 2022 08:00:00 GMT+0800 (中国标准时间) – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa-solid fa-star"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">fengzhenhua</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/fungzhenhua" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://s4.zstatic.net/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://s4.zstatic.net/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://s4.zstatic.net/ajax/libs/pdfobject/2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://s4.zstatic.net/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://s4.zstatic.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
