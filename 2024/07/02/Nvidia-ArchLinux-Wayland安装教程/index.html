<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#9400D3"><meta name="generator" content="Hexo 5.4.2">
<link rel="preconnect" href="https://s4.zstatic.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#9400D3">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.css" integrity="sha256-gkQVf8UKZgQ0HyuxL/VnacadJ+D2Kox2TCEBuNQg5+w=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":"default"},"fold":{"enable":true,"height":500},"bookmark":{"enable":true,"color":"#9400D3","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":false,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":true,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":true}}</script><script src="/js/config.js"></script>



<link rel="canonical" href="http://example.com/2024/07/02/Nvidia-ArchLinux-Wayland%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2024/07/02/Nvidia-ArchLinux-Wayland%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/","path":"2024/07/02/Nvidia-ArchLinux-Wayland安装教程/","title":"Nvidia-ArchLinux-Wayland安装教程"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Nvidia-ArchLinux-Wayland安装教程 | BNU-FZH</title>
  







<script async src="/lib/fireworks.js"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">BNU-FZH</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">fengzhenhua@outlook.com</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-导航"><a href="/%E5%AF%BC%E8%88%AA/" rel="section"><i class="fa fa-paper-plane fa-fw"></i>导航</a></li><li class="menu-item menu-item-软件"><a href="/%E8%BD%AF%E4%BB%B6/" rel="section"><i class="fa fa-briefcase fa-fw"></i>软件</a></li><li class="menu-item menu-item-收藏"><a href="/%E6%94%B6%E8%97%8F/" rel="section"><i class="fa fa-folder fa-fw"></i>收藏</a></li><li class="menu-item menu-item-工作"><a href="/%E5%B7%A5%E4%BD%9C/" rel="section"><i class="fa fa-folder fa-fw"></i>工作</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#install-nvidia-driver"><span class="nav-number">1.</span> <span class="nav-text">1、Install NVIDIA Driver</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#set-environment-variables"><span class="nav-number">2.</span> <span class="nav-text">2、Set Environment Variables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#loading-the-nvidia-modules-at-system-boot"><span class="nav-number">3.</span> <span class="nav-text">3、Loading the NVIDIA
Modules at System Boot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#enable-drm"><span class="nav-number">4.</span> <span class="nav-text">4、Enable DRM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#testing-wayland-with-nvidia-on-arch-linux"><span class="nav-number">5.</span> <span class="nav-text">5、Testing Wayland
with NVIDIA on Arch Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE-nvidia-%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-number">6.</span> <span class="nav-text">6、设置 nvidia 电源管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AEwayland"><span class="nav-number">7.</span> <span class="nav-text">7、配置wayland</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bottom-line"><span class="nav-number">8.</span> <span class="nav-text">8、Bottom Line</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#references"><span class="nav-number">9.</span> <span class="nav-text">9、References</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">550</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="http://192.168.1.14/" title="实验信息 → http:&#x2F;&#x2F;192.168.1.14&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>实验信息</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhixue.com/" title="智学阅卷 → https:&#x2F;&#x2F;www.zhixue.com" rel="noopener me" target="_blank"><i class="fa-solid fa-cloud fa-fw"></i>智学阅卷</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://chat.deepseek.com/" title="深度求索 → https:&#x2F;&#x2F;chat.deepseek.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>深度求索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tongyi.com/" title="通义千问 → https:&#x2F;&#x2F;www.tongyi.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>通义千问</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.scnet.cn/ui/chatbot/" title="国家超算 → https:&#x2F;&#x2F;www.scnet.cn&#x2F;ui&#x2F;chatbot&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>国家超算</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yuanbao.tencent.com/chat" title="腾讯元宝 → https:&#x2F;&#x2F;yuanbao.tencent.com&#x2F;chat" rel="noopener me" target="_blank"><i class="fa-solid fa-brain fa-fw"></i>腾讯元宝</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/" title="必应搜索 → https:&#x2F;&#x2F;cn.bing.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>必应搜索</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.hao268.com/" title="网址之家 → https:&#x2F;&#x2F;www.hao268.com" rel="noopener me" target="_blank"><i class="fa fa-search fa-fw"></i>网址之家</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ac.scmor.com/" title="思谋学术 → https:&#x2F;&#x2F;ac.scmor.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>思谋学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://search.essclick.com/" title="爱思学术 → https:&#x2F;&#x2F;search.essclick.com" rel="noopener me" target="_blank"><i class="fa fa-graduation-cap fa-fw"></i>爱思学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://scholar.lanfanshu.cn/" title="番薯学术 → https:&#x2F;&#x2F;scholar.lanfanshu.cn&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>番薯学术</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://xmsoushu.com/" title="熊猫搜书 → https:&#x2F;&#x2F;xmsoushu.com&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>熊猫搜书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://cn.bing.com/translator" title="必应翻译 → https:&#x2F;&#x2F;cn.bing.com&#x2F;translator" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>必应翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.baidu.com/#zh/en" title="百度翻译 → https:&#x2F;&#x2F;fanyi.baidu.com&#x2F;#zh&#x2F;en" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>百度翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://fanyi.youdao.com/?keyfrom=fanyi.logo" title="有道翻译 → https:&#x2F;&#x2F;fanyi.youdao.com&#x2F;?keyfrom&#x3D;fanyi.logo" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>有道翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.oxfordlearnersdictionaries.com/definition/english/" title="牛津翻译 → https:&#x2F;&#x2F;www.oxfordlearnersdictionaries.com&#x2F;definition&#x2F;english&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-language fa-fw"></i>牛津翻译</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://wx.qq.com/" title="网页微信 → https:&#x2F;&#x2F;wx.qq.com" rel="noopener me" target="_blank"><i class="fab fa-weixin fa-fw"></i>网页微信</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://login.partner.microsoftonline.cn/" title="微软办公 → https:&#x2F;&#x2F;login.partner.microsoftonline.cn" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软办公</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mathsolver.microsoft.com/" title="微软数学 → https:&#x2F;&#x2F;mathsolver.microsoft.com" rel="noopener me" target="_blank"><i class="fas fa-file fa-fw"></i>微软数学</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.mail.bnu.edu.cn/" title="师大邮箱 → https:&#x2F;&#x2F;www.mail.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>师大邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://mail.sina.com.cn/" title="新浪邮箱 → https:&#x2F;&#x2F;mail.sina.com.cn" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>新浪邮箱</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.aliyundrive.com/sign/in" title="阿里云盘 → https:&#x2F;&#x2F;www.aliyundrive.com&#x2F;sign&#x2F;in" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>阿里云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://yun.139.com/w/#/" title="移动云盘 → https:&#x2F;&#x2F;yun.139.com&#x2F;w&#x2F;#&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>移动云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianguoyun.com/d/login" title="坚果网盘 → https:&#x2F;&#x2F;www.jianguoyun.com&#x2F;d&#x2F;login" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>坚果网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://efss.qloud.my/index.php/login?clear=1" title="Next云盘 → https:&#x2F;&#x2F;efss.qloud.my&#x2F;index.php&#x2F;login?clear&#x3D;1" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>Next云盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.123pan.com/" title="123 网盘 → https:&#x2F;&#x2F;www.123pan.com&#x2F;" rel="noopener me" target="_blank"><i class="fa fa-hdd fa-fw"></i>123 网盘</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://annas-archive.org/" title="安娜档案 → https:&#x2F;&#x2F;annas-archive.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>安娜档案</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://book.sciencereading.cn/" title="科学文库 → https:&#x2F;&#x2F;book.sciencereading.cn" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>科学文库</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ylibrary.org/" title="Ylibrary → https:&#x2F;&#x2F;ylibrary.org&#x2F;" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Ylibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.tboxn.com/sites/320.html" title="Zlibrary → https:&#x2F;&#x2F;www.tboxn.com&#x2F;sites&#x2F;320.html" rel="noopener me" target="_blank"><i class="fas fa-book fa-fw"></i>Zlibrary</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.koushare.com/" title="蔻享官网 → https:&#x2F;&#x2F;www.koushare.com" rel="noopener me" target="_blank"><i class="fas fa-globe-asia fa-fw"></i>蔻享官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.duolingo.cn/" title="多邻国官 → https:&#x2F;&#x2F;www.duolingo.cn" rel="noopener me" target="_blank"><i class="fas fa-school fa-fw"></i>多邻国官</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.bnu.edu.cn/" title="师大官网 → https:&#x2F;&#x2F;www.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>师大官网</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://one.bnu.edu.cn/" title="数字京师 → https:&#x2F;&#x2F;one.bnu.edu.cn" rel="noopener me" target="_blank"><i class="fas fa-university fa-fw"></i>数字京师</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.runoob.com/font-awesome/fontawesome-icons-brand.html" title="图站图标 → https:&#x2F;&#x2F;www.runoob.com&#x2F;font-awesome&#x2F;fontawesome-icons-brand.html" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>图站图标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://shields.io/badges" title="项目微标 → https:&#x2F;&#x2F;shields.io&#x2F;badges" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>项目微标</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jd.com/" title="京东购物 → https:&#x2F;&#x2F;www.jd.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>京东购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.taobao.com/" title="淘宝购物 → https:&#x2F;&#x2F;www.taobao.com&#x2F;" rel="noopener me" target="_blank"><i class="fa-solid fa-cart-shopping fa-fw"></i>淘宝购物</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/" title="LaTeXLiv → https:&#x2F;&#x2F;www.latexlive.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXLiv</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.latexlive.com/help" title="LaTeXHel → https:&#x2F;&#x2F;www.latexlive.com&#x2F;help" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>LaTeXHel</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://p2t.breezedeus.com/" title="Pix2Text → https:&#x2F;&#x2F;p2t.breezedeus.com" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Pix2Text</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://simpletex.cn/" title="Simplete → https:&#x2F;&#x2F;simpletex.cn" rel="noopener me" target="_blank"><i class="fas fa-globe fa-fw"></i>Simplete</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/07/02/Nvidia-ArchLinux-Wayland%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BNU-FZH">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Nvidia-ArchLinux-Wayland安装教程 | BNU-FZH">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Nvidia-ArchLinux-Wayland安装教程
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-07-02 13:43:09" itemprop="dateCreated datePublished" datetime="2024-07-02T13:43:09+08:00">2024-07-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-03-26 18:21:20" itemprop="dateModified" datetime="2025-03-26T18:21:20+08:00">2025-03-26</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>As you know, the transition to Wayland from the traditional Xorg
server in the Linux ecosystem has been a hot topic that caused much
controversy and, admittedly, a fair share of troubleshooting.</p>
<p>While Wayland promises a more streamlined and secure interface than
its predecessor, Xorg, users have often encountered hurdles,
particularly regarding compatibility with NVIDIA graphics cards.</p>
<p>In other words, the journey hasn’t always been without bumps, from
rendering issues to compatibility quirks. However, it’s becoming
increasingly clear that the NVIDIA and Wayland combo, while not yet a
perfect match, is evolving into a viable, working solution for many.</p>
<p>Still, with the proper guidance and a bit of patience, using NVIDIA
with Wayland on Arch is not just a possibility but a largely workable
solution. You can approach this transition with confidence.</p>
<p>This guide is designed to do precisely this: usher you through the
setup process and offer solutions to ensure you can take most of your
NVIDIA and Wayland experience on Arch Linux. So, let’s get started.</p>
<h2 id="install-nvidia-driver">1、Install NVIDIA Driver</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pacman -S nvidia nvidia-settings</span><br></pre></td></tr></table></figure>
<h2 id="set-environment-variables">2、Set Environment Variables</h2>
<p>With NVIDIA’s introduction of GBM (Generic Buffer Management)
support, a crucial component of the Linux graphics stack that provides
an API for allocating buffers for graphics rendering and display, many
compositors have adopted it as their default. So, to force GBM as a
backend, we need to set some environment variables.</p>
<p>Open the “<em>/etc/environment</em>” file, paste the following two
lines, then save the file and exit.</p>
<figure class="highlight sh"><figcaption><span>/etc/environment</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GBM_BACKEND=nvidia-drm</span><br><span class="line">__GLX_VENDOR_LIBRARY_NAME=nvidia</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland07.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland07-1024x396.jpg"
alt="Set environment variables." /></a></p>
<h2 id="loading-the-nvidia-modules-at-system-boot">3、Loading the NVIDIA
Modules at System Boot</h2>
<p>To ensure that the NVIDIA modules are loaded at the earliest possible
stage, i.e., on the system boot, we need to add the ‘<em>nvidia</em>,’
‘<em>nvidia_modeset</em>,’ ‘<em>nvidia_uvm</em>,’ and
‘<em>nvidia_drm</em>‘ modules to the initramfs – a temporary root file
system loaded into memory as part of the boot process before the real
root file system is mounted.</p>
<p>This is possible by entering them in the “<em>MODULES</em>” section
of the “<em>/etc/mkinitcpio.conf</em>” file. This is a configuration
file for mkinitcpio, a tool Arch uses to generate initial ramdisk
images.</p>
<p>So, open the “<em>/etc/mkinitcpio.conf</em>” file. Then, enter the
modules mentioned above, as the final version should look like this:</p>
<figure class="highlight sh"><figcaption><span>/etc/mkinitcpio.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MODULES=(nvidia nvidia_modeset nvidia_uvm nvidia_drm)</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland03.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland03.jpg"
alt="Loading the NVIDIA modules at system boot." /></a></p>
<p>Great, but we’re not done with this file yet. Scroll down and remove
the “<em>kms</em>” from the “<em>HOOKS</em>” section. This ensures that
the initramfs will avoid including the open-source “<em>nouveau</em>”
driver to mess with the work of the proprietary NVIDIA one we have
installed and rely on.</p>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland04.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland04.jpg"
alt="Removing KMS from the Hooks." /></a></p>
<p>We’ve finished modifying “<em>/etc/mkinitcpio.conf</em>“. Save your
changes and close the file. Next, we’ll proceed to regenerate the
initramfs. To do this, execute the following command:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mkinitcpio -P</span><br></pre></td></tr></table></figure>
<p>In the command’s output, you might notice messages like “<em>WARNING:
Possibly missing firmware for module…</em>” These shouldn’t cause
concern and are unrelated to the modifications we are currently
implementing.</p>
<h2 id="enable-drm">4、Enable DRM</h2>
<p>DRM (Direct Rendering Manager) is a subsystem of the Linux kernel
responsible for interfacing with GPUs. It provides a framework for
graphics drivers to enable direct access to the graphics hardware, which
is crucial for performance in rendering tasks, 3D graphics, video
playback, and more.</p>
<p>NVIDIA provides proprietary graphics drivers for Linux that use the
DRM subsystem to interact with their GPUs. These drivers are essential
for getting the best performance and feature support on NVIDIA hardware
under Linux.</p>
<p>Enabling the DRM kernel mode setting is required for Wayland
compositors to function properly. So, we will pass it as a parameter to
the Linux kernel during its initial boot through the GRUB
bootloader.</p>
<p>Open its configuration file<code>/etc/default/grub</code>. Locate the
line that begins with “<em>GRUB_CMDLINE_LINUX_DEFAULT</em>” and append
“<em>nvidia-drm.modeset=1</em>” to its end. The completed line should
resemble the example provided below.</p>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland05.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland05-1024x501.jpg"
alt="Enabling DRM (Direct Rendering Manager) via GRUB." /></a></p>
<p>Finally, regenerate the GRUB configuration by running:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland06.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland06-1024x396.jpg"
alt="Regenerating the main GRUB configuration file." /></a></p>
<h2 id="testing-wayland-with-nvidia-on-arch-linux">5、Testing Wayland
with NVIDIA on Arch Linux</h2>
<p>You are all set up. Now, reboot your Arch system. At the login screen
of the display manager you’re using, choose the Wayland Session
option.</p>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland09.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland09-1024x640.jpg"
alt="Switching to Wayland session on Arch." /></a></p>
<p>Log in and enjoy a seamless Wayland experience with NVIDIA and your
beloved Arch Linux.</p>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland10.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland10-1024x640.jpg"
alt="Arch Linux is running on Wayland with NVIDIA GPU." /></a></p>
<p>In addition, to verify that the NVIDIA DRM settings were correctly
applied after a reboot, execute the following command; in response, you
should get “<em>Y</em>.”</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">cat</span> /sys/module/nvidia_drm/parameters/modeset</span><br></pre></td></tr></table></figure>
<p><a
target="_blank" rel="noopener" href="https://linuxiac.b-cdn.net/wp-content/uploads/2024/04/nvidia-arch-wayland11.jpg"><img
src="https://cdn.shortpixel.ai/spai/q_lossy+ret_img+to_auto/linuxiac.com/wp-content/uploads/2024/04/nvidia-arch-wayland11.jpg"
alt="Verifying the NVIDIA DRM settings." /></a></p>
<h2 id="设置-nvidia-电源管理">6、设置 nvidia 电源管理</h2>
<ol type="1">
<li><p>Create a file
<code>/etc/modprobe.d/nvidia-power-management.conf</code> with the
following content: <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">options nvidia NVreg_PreserveVideoMemoryAllocations=1 NVreg_TemporaryFilePath=/var/tmp</span><br></pre></td></tr></table></figure></p></li>
<li><p><code>sudo update-initramfs -c -k all</code> to re-generate the
kernels.
此处我没有执行成功命令，但是并没有影响，系统正常配置成功。</p></li>
<li><p>Reboot</p></li>
<li><p>Go to suspend mode.</p></li>
<li><p>Get an error when trying to load a saved state.</p></li>
</ol>
<h2 id="配置wayland">7、配置wayland</h2>
<p>经过上述配置后，我发现重启系统将会默认进入到<code>x11</code>,
它是可以正常工作的，效果良好。但是，既然有强大的独立<code>nvidia</code>显卡，我们还是需要设置好<code>nvidia</code>.
下述根据 <a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/GDM#Wayland_and_the_proprietary_NVIDIA_driver">Wayland
and the proprietary NVIDIA driver</a>主操作，详细信息可以参考。</p>
<ul>
<li><p>启用<code>nvidia</code>相关服务 <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> nvidia-suspend.service nvidia-hibernate.service nvidia-resume.service</span><br></pre></td></tr></table></figure> 此项参考：<a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA/Tips_and_tricks#Preserve_video_memory_after_suspend">Preserve
video memory after suspend</a></p></li>
<li><p>强制启用<code>Wayland</code>, As of GDM 42 and NVIDIA driver 510,
GDM defaults to Wayland. For older NVIDIA drivers (in between version
470 and 510), GDM has chipset-dependent udev rules to use Xorg rather
than Wayland. To force-enable Wayland, override these rules by creating
the following symlink: <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">ln</span> -s /dev/null /etc/udev/rules.d/61-gdm.rules</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>注意：如果没有第<code>6</code>到<code>7</code>步，在<code>GNOME</code>桌面环境启动后，<code>GDM</code>不能显示<code>wayland</code>启动选项，而只是默认启动<code>Xorg</code>,
设置好<code>6</code>和<code>7</code>后，系统正常进入到<code>wayland</code>。</p>
<h2 id="bottom-line">8、Bottom Line</h2>
<p>In the end, it’s essential to clarify a key point. Our guide has
confidently demonstrated that Wayland can operate smoothly with NVIDIA
on an Arch system. This, however, does not extend to guaranteeing that
every application, game, or desktop environment will also function
flawlessly.</p>
<p>The compatibility of these components with Wayland varies and is
dependent on the extent to which they have integrated support for
it.</p>
<p>For example, desktop environments like KDE Plasma and GNOME offer
very good support for Wayland, ensuring a seamless experience. On the
other hand, environments like Cinnamon, with only basic Wayland support,
may not deliver the same smoothness. So, it’s important to consider
these differences.</p>
<p>Similarly, using the Hyprland dynamic tiling Wayland compositor would
result in a smooth user experience, whereas others that are still
dependent on Xorg may not offer the necessary support for Wayland. This
variability in compatibility applies to individual applications too, so
it’s important to be aware of potential issues when using specific
software.</p>
<p>In conclusion, navigating the complexities of setting up Wayland on
Arch can seem daunting, especially for those wielding the power of
NVIDIA GPUs, who have historically faced hurdles ranging from rendering
glitches to compatibility concerns.</p>
<p>Yet, with the proper knowledge, a dash of perseverance, and our
guidance, the hurdles that once seemed impossible begin to shrink to the
level that, with the correct setup, NVIDIA and Wayland can indeed create
a synergy that brings out the best in your Arch setup.</p>
<p>Finally, we recommend referring to the specific <a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Wayland">Wayland</a> and <a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA">NVIDIA</a> sections on
the official Arch wiki for a more comprehensive understanding. They
provide detailed information on setting up and troubleshooting Wayland
and NVIDIA on Arch, making them valuable resources for further
exploration.</p>
<p>And, of course, we’d love to hear your feedback or thoughts, so
please don’t hesitate to share them in the comment box below.</p>
<h2 id="references">9、References</h2>
<ul>
<li><a
target="_blank" rel="noopener" href="https://linuxiac.com/nvidia-with-wayland-on-arch-setup-guide/">NVIDIA
+ Wayland on Arch: A Comprehensive Setup Guide</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.maketecheasier.com/wayland-work-with-nvidia-graphics-cards/">How
to Get Wayland to Work on Nvidia Graphics Cards</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv25617874/">ArchLinux
安装Nvidia 驱动使用Wayland</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Wayland">Wayland-ArchWiki</a></li>
<li><a
target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/NVIDIA">Nvidia-ArchWiki</a></li>
<li><a target="_blank" rel="noopener" href="https://sh.alynx.one/posts/NVIDIA-GNOME-Wayland/">NVIDIA
驱动和 GNOME 和 Wayland</a></li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%94%B5%E8%84%91%E6%8A%80%E6%9C%AF/" rel="tag"># 电脑技术</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/06/29/Shell%E8%84%9A%E6%9C%AC%E6%88%AA%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8F%98%E9%87%8F/" rel="prev" title="Shell脚本截取字符串变量">
                  <i class="fa fa-angle-left"></i> Shell脚本截取字符串变量
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/07/02/%E5%A6%82%E4%BD%95%E6%B7%B1%E5%88%BB%E7%90%86%E8%A7%A3%E4%BB%8E%E4%BA%8C%E9%A1%B9%E5%88%86%E5%B8%83%E5%88%B0%E6%B3%8A%E6%9D%BE%E5%88%86%E5%B8%83/" rel="next" title="如何深刻理解从二项分布到泊松分布">
                  如何深刻理解从二项分布到泊松分布 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; Sat Sep 03 2022 08:00:00 GMT+0800 (中国标准时间) – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa-solid fa-star"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">fengzhenhua</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/fungzhenhua" class="github-corner" title="在 GitHub 上关注我" aria-label="在 GitHub 上关注我" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://s4.zstatic.net/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://s4.zstatic.net/ajax/libs/fancyapps-ui/5.0.31/fancybox/fancybox.umd.js" integrity="sha256-a+H7FYzJv6oU2hfsfDGM2Ohw/cR9v+hPfxHCLdmCrE8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://s4.zstatic.net/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>

  <script class="next-config" data-name="pdf" type="application/json">{"object_url":{"url":"https://s4.zstatic.net/ajax/libs/pdfobject/2.3.0/pdfobject.min.js","integrity":"sha256-JJZNsid68vnh3/zyj0lY9BN5ynxVX/12XgOa1TlaYN0="},"url":"/lib/pdf/web/viewer.html"}</script>
  <script src="/js/third-party/tags/pdf.js"></script>

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://s4.zstatic.net/ajax/libs/mermaid/11.4.0/mermaid.min.js","integrity":"sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>


  <script src="/js/third-party/fancybox.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"ams","js":{"url":"https://s4.zstatic.net/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
